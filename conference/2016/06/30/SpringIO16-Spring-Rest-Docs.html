<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Spring I/O 16: Test-driven documentation with Spring REST Docs - Kevin Van Houtte">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/springio.jpg"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/conference/2016/06/30/SpringIO16-Spring-Rest-Docs.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Spring I/O 16: Test-driven documentation with Spring REST Docs - Kevin Van Houtte"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/springio.jpg"/>

    
    <title>Spring I/O 16: Test-driven documentation with Spring REST Docs - Kevin Van Houtte &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/meet-the-team">Meet the team</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="https://join.ordina-jworks.io/">JOIN</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>Spring I/O 16: Test-driven documentation with Spring REST Docs</h2>
                

                
                    Posted Jun 30, 2016


    in <a href="/categories/conference/">Conference</a>



    by
    
        <a href="/author/kevin-van-houtte/">Kevin Van Houtte</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/spring-io/">Spring IO</a>, 
    
        <a href="/tags/spring/">Spring</a>, 
    
        <a href="/tags/conference/">Conference</a>
    

                

                

            </div>
        </header>
    </section>


    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <h2 id="spring-io-2016">Spring IO 2016</h2>
<p>The main focus this year was definitely about cloud, reactive and microservices.
But it is important not to forget other topics, like documentation! 
Keep calm, you don’t have to do it manually! 
Spring made it easy for us with Spring REST Docs! 
This year at Spring IO, Andy Wilkinson himself talked about why, how and when Spring REST Docs are being used. 
Last but not least, he talked about the new features that came out in version 1.1.
Since I implemented Spring REST Docs in a project, I’ll use examples from my experiences.</p>

<p><span class="image left small"><img class="p-image" alt="Andy Wilkinson" src="/img/rest-docs/andywilkinson.jpg" /></span></p>

<h3 id="andy-wilkinson">Andy Wilkinson</h3>

<p>Andy is a Spring Boot, REST docs committer and Spring IO platform lead at Pivotal. 
You can find him on Twitter using the handle <a href="https://twitter.com/ankinson">@ankinson</a>.</p>

<blockquote class="clear"><p>
Writing documentation is critical in the world of development. 
It is used to make an accurate and straight declaration and intent of what the service has to offer. 
Frontend developers will be able to know which endpoints they have to call and receive the right data. 
Now, we all know it's tedious for developers to write documentation...
It's your lucky day! Spring REST Docs will make your life easier.
While you are writing tests, Spring will generate a fully HTML api guide for you and your team. 
This blog post will take you through the best practices, how to and new features in 1.1.
</p></blockquote>

<p><strong>Why Test driven approach</strong></p>

<ul>
  <li>It’s an accurate definition of your application (no side effects)</li>
  <li>It describes the specific HTTP request and response</li>
  <li>It’s straight forward without repetition</li>
  <li>It’s easier to write (no annotations like Swagger)</li>
</ul>

<h3 id="markup-languages">Markup languages</h3>

<h4 id="asciidoctor">Asciidoctor</h4>
<p>Asciidoctor is a markup language that processes plain text and produces HTML, completely styled to suit your needs.
If you are interested in writing in Asciidoctor be sure to check out the <a href="http://asciidoctor.org/docs/user-manual/#introduction-to-asciidoctor">manual</a>.</p>

<h4 id="markdown-new-in-11">Markdown (New in 1.1)</h4>
<p>With the newest version of REST Docs, the developer now has more options in terms of markup languages.
The Markdown support is not as feature-rich as Asciidoctor, but Markdown can work very well when combined with existing documentation toolchains such as <a href="https://github.com/tripit/slate">Slate</a>.
Here is a good <a href="https://github.com/spring-projects/spring-restdocs/tree/master/samples/rest-notes-slate">sample</a> working with slate.</p>

<h4 id="andys-pick">Andy’s pick</h4>
<p>Asciidoctor!
Since Asciidoctor boasts more features than Markdown, it gives Asciidoctor the edge.</p>

<h3 id="test-tools">Test Tools</h3>
<p>When we want to use Spring REST Docs, we’ll have to use one of the test tools. 
Here are the different tools of choice. To use these tools we’ll have to initialise which document, <code class="language-plaintext highlighter-rouge">Mockmvc</code> and <code class="language-plaintext highlighter-rouge">ObjectWriter</code> we’ll be using.</p>

<h4 id="mockmvc">MockMvc</h4>
<p>A lightweight server-less documentation generation by the Spring Framework that has been the default use in Spring REST Docs.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

<span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">WebApplicationContext</span> <span class="n">context</span><span class="o">;</span>

 <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">document</span> <span class="o">=</span> <span class="n">document</span><span class="o">(</span><span class="s">"{method-name}"</span><span class="o">);</span>
        <span class="n">mockMvc</span> <span class="o">=</span> <span class="nc">MockMvcBuilders</span><span class="o">.</span><span class="na">webAppContextSetup</span><span class="o">(</span><span class="n">wac</span><span class="o">)</span>
                <span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">documentationConfiguration</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">restDocumentation</span><span class="o">).</span><span class="na">uris</span><span class="o">().</span><span class="na">withScheme</span><span class="o">(</span><span class="s">"https"</span><span class="o">)).</span><span class="na">alwaysDo</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">)</span>
                <span class="o">.</span><span class="na">addFilter</span><span class="o">(</span><span class="k">new</span> <span class="nc">JwtFilter</span><span class="o">(),</span><span class="s">"/*"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">objectWriter</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">writer</span><span class="o">();</span>

        <span class="n">authToken</span> <span class="o">=</span> <span class="nc">TestUtil</span><span class="o">.</span><span class="na">getAuthToken</span><span class="o">();</span>
        <span class="nc">TestUtil</span><span class="o">.</span><span class="na">setAuthorities</span><span class="o">();</span>
    <span class="o">}</span></code></pre></figure>

<h4 id="restassured-new-11">RestAssured (New 1.1)</h4>
<p>As an alternative, you can use RestAssured to test and document your RESTful services. 
Available in V1.1, RestAssured will be more expandable than MockMvc.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="nc">RequestSpecification</span> <span class="n">spec</span><span class="o">;</span>

<span class="nd">@Before</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">spec</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestSpecBuilder</span><span class="o">().</span><span class="na">addFilter</span><span class="o">(</span>
            <span class="n">documentationConfiguration</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">restDocumentation</span><span class="o">))</span> 
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<h4 id="andys-pick-1">Andy’s pick</h4>
<p>This time he didn’t favor one but he mentioned that RestAssured gives you more functionality and extends your possibilities with HTTP.</p>

<h3 id="snip-snip-snippets-everywhere">Snip, snip, snippets everywhere!</h3>

<h4 id="default-snippet">Default Snippet</h4>
<p>Snippets are generated by the documented test method.
Once you run the test method, you can add these snippets in your Markdown/Asciidoctor file. 
Be aware, these type of snippet will fail if you don’t have the correct response/request syntax.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
                <span class="n">links</span><span class="o">(</span>
                        <span class="n">halLinks</span><span class="o">(),</span> <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"self"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's resource"</span><span class="o">),</span>
                        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"employee"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's projection"</span><span class="o">)),</span>
                        <span class="n">responseFields</span><span class="o">(</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's first name"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's last name"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"linkedin"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's linkedin"</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"unit"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's unit"</span><span class="o">).</span><span class="na">type</span><span class="o">(</span><span class="nc">Unit</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
                                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"_links"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"links to other resources"</span><span class="o">)</span>
                        <span class="o">));</span>
 <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span>
                <span class="n">get</span><span class="o">(</span><span class="s">"/employees/1"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">));</span></code></pre></figure>

<h4 id="relaxed-snippet-new-in-11">Relaxed Snippet (New in 1.1)</h4>
<p>In contrast to default snippets, relaxed snippets don’t complain when something was neglected in the document.
This is an advantage when you only need to focus on a certain scenario or specific part of the response/request.</p>

<h4 id="reusable-snippet-new-in-11">Reusable Snippet (New in 1.1)</h4>
<p>With the newly introduced reusable snippet, you can define a snippet at the beginning of your test class and reuse it every time you need it. 
When added to your test method, you can extend it with extra variables.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// First we define a snippet for reuse</span>
<span class="kd">protected</span> <span class="kd">final</span> <span class="nc">LinksSnippet</span> <span class="n">pagingLinks</span> <span class="o">=</span> <span class="n">links</span><span class="o">(</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"first"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The first page of results"</span><span class="o">),</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"last"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The last page of results"</span><span class="o">),</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"next"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The next page of results"</span><span class="o">),</span>
        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"prev"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The previous page of results"</span><span class="o">));</span>

<span class="c1">// Then you perform the mockMvc and add the snippet to the document.</span>
<span class="c1">// As you can see, it is expendable.</span>
<span class="k">this</span><span class="o">.</span><span class="na">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">))</span>
    <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
    <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"example"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">pagingLinks</span><span class="o">.</span><span class="na">and</span><span class="o">(</span> 
            <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"alpha"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Link to the alpha resource"</span><span class="o">),</span>
            <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"bravo"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Link to the bravo resource"</span><span class="o">))));</span></code></pre></figure>

<h2 id="type-of-snippets">Type of Snippets:</h2>
<p>A snippet can be one of the following:</p>

<h3 id="hypermedia-links">Hypermedia links</h3>
<p>When documenting your hypermedia application, you’ll have to define your links and where they go to. 
If you have dynamic links that can disappear at one time, you can use relaxed snippets or optional so it won’t complain.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> <span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
                <span class="n">links</span><span class="o">(</span>
                        <span class="n">halLinks</span><span class="o">(),</span> <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"self"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's resource"</span><span class="o">),</span>
                        <span class="n">linkWithRel</span><span class="o">(</span><span class="s">"employee"</span><span class="o">).</span><span class="na">optional</span><span class="o">().</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's projection"</span><span class="o">)),</span>
                <span class="n">responseFields</span><span class="o">(</span>
                        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">).</span><span class="na">type</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
                        <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"_links"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"links to other resources"</span><span class="o">)</span>
                <span class="o">));</span></code></pre></figure>

<h3 id="request-fields">Request fields</h3>
<p>This defines the fields you request from the client.
Normally Spring REST Docs will complain when you neglect a field but with v1.1 we now have support for Relaxed Snippets.
Because I use constraints, I made my own method `withPath, this will add an extra column constraint to the documentation.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"> 
 <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ConstrainedFields</span> <span class="o">{</span>
         <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ConstraintDescriptions</span> <span class="n">constraintDescriptions</span><span class="o">;</span>
         <span class="nc">ConstrainedFields</span><span class="o">(</span><span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">this</span><span class="o">.</span><span class="na">constraintDescriptions</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConstraintDescriptions</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
         <span class="o">}</span>
         <span class="kd">private</span> <span class="nc">FieldDescriptor</span> <span class="nf">withPath</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
             <span class="k">return</span> <span class="nf">fieldWithPath</span><span class="o">(</span><span class="n">path</span><span class="o">).</span><span class="na">attributes</span><span class="o">(</span><span class="n">key</span><span class="o">(</span><span class="s">"constraints"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="nc">StringUtils</span>
                     <span class="o">.</span><span class="na">collectionToDelimitedString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">constraintDescriptions</span>
                             <span class="o">.</span><span class="na">descriptionsForProperty</span><span class="o">(</span><span class="n">path</span><span class="o">),</span> <span class="s">". "</span><span class="o">)));</span>
         <span class="o">}</span>
     <span class="o">}</span>

 <span class="nd">@Test</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postEmployee</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
         <span class="nc">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">employeeRepository</span><span class="o">.</span><span class="na">findByUsernameIgnoreCase</span><span class="o">(</span><span class="s">"Nivek"</span><span class="o">);</span>
         <span class="n">employee</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
         <span class="n">employee</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"Keloggs"</span><span class="o">);</span>
         <span class="nc">String</span> <span class="n">string</span> <span class="o">=</span> <span class="n">objectWriter</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
 
         <span class="nc">ConstrainedFields</span> <span class="n">fields</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConstrainedFields</span><span class="o">(</span><span class="nc">Employee</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 
         <span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
                 <span class="n">requestFields</span><span class="o">(</span>
                         <span class="n">fields</span><span class="o">.</span><span class="na">withPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">),</span>
                         <span class="n">fields</span><span class="o">.</span><span class="na">withPath</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's first name"</span><span class="o">),</span>
                         <span class="n">fields</span><span class="o">.</span><span class="na">withPath</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's last name"</span><span class="o">),</span>
                         <span class="o">));</span>
 
         <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/employees"</span><span class="o">).</span><span class="na">content</span><span class="o">(</span><span class="n">string</span><span class="o">).</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaTypes</span><span class="o">.</span><span class="na">HAL_JSON</span><span class="o">).</span><span class="na">header</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="n">authToken</span><span class="o">)).</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isCreated</span><span class="o">()).</span><span class="na">andReturn</span><span class="o">().</span><span class="na">getResponse</span><span class="o">().</span><span class="na">getHeader</span><span class="o">(</span><span class="s">"Location"</span><span class="o">);</span>
     <span class="o">}</span>
                        
      </code></pre></figure>

<h3 id="response-fields">Response fields</h3>
<p>This defines the result after consultation of a resource.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="k">this</span><span class="o">.</span><span class="na">document</span><span class="o">.</span><span class="na">snippets</span><span class="o">(</span>
              <span class="n">responseFields</span><span class="o">(</span>
                       <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"username"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee unique database identifier"</span><span class="o">),</span>
                       <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's first name"</span><span class="o">),</span>
                       <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"lastName"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The employee's last name"</span><span class="o">),</span>
                           <span class="o">));</span></code></pre></figure>

<h3 id="requestresponse-headers">Request/response headers</h3>
<p>Defines your request/response headers in your API. 
This is useful when there are extra headers to set. 
When the request has to involve an authorization header for security reasons, you can add this header to your document.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span>
                <span class="n">get</span><span class="o">(</span><span class="s">"/employees/1"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
                <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">,</span> <span class="n">authToken</span><span class="o">)</span>
                <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"headers"</span><span class="o">,</span>
                				<span class="n">requestHeaders</span><span class="o">(</span> 
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"Authorization"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"Basic auth credentials"</span><span class="o">)),</span> 
                				<span class="n">responseHeaders</span><span class="o">(</span> 
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"X-RateLimit-Limit"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"The total number of requests permitted per period"</span><span class="o">),</span>
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"X-RateLimit-Remaining"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"Remaining requests permitted in current period"</span><span class="o">),</span>
                						<span class="n">headerWithName</span><span class="o">(</span><span class="s">"X-RateLimit-Reset"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span>
                								<span class="s">"Time at which the rate limit period will reset"</span><span class="o">)))));</span></code></pre></figure>

<h3 id="request-parameters">Request parameters</h3>
<p>The parameters passed by in the uri as a query string are documented with the requestParameters.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">this</span><span class="o">.</span><span class="na">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/users?page=2&amp;per_page=100"</span><span class="o">))</span> 
	<span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
	<span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"users"</span><span class="o">,</span> <span class="n">requestParameters</span><span class="o">(</span> 
			<span class="n">parameterWithName</span><span class="o">(</span><span class="s">"page"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The page to retrieve"</span><span class="o">),</span> 
			<span class="n">parameterWithName</span><span class="o">(</span><span class="s">"per_page"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"Entries per page"</span><span class="o">)</span> 
	<span class="o">)));</span>
	
	</code></pre></figure>

<h3 id="request-parts-new-in-11">Request parts (new in 1.1)</h3>
<p>The parts of a multipart request can be documenting using <code class="language-plaintext highlighter-rouge">requestParts</code></p>

<p>Example</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">RestAssured</span><span class="o">.</span><span class="na">given</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">spec</span><span class="o">)</span>
	<span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"users"</span><span class="o">,</span> <span class="n">requestParts</span><span class="o">(</span> 
			<span class="n">partWithName</span><span class="o">(</span><span class="s">"file"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"The file to upload"</span><span class="o">))))</span> 
	<span class="o">.</span><span class="na">multiPart</span><span class="o">(</span><span class="s">"file"</span><span class="o">,</span> <span class="s">"example"</span><span class="o">)</span> 
	<span class="o">.</span><span class="na">when</span><span class="o">().</span><span class="na">post</span><span class="o">(</span><span class="s">"/upload"</span><span class="o">)</span> 
	<span class="o">.</span><span class="na">then</span><span class="o">().</span><span class="na">statusCode</span><span class="o">(</span><span class="n">is</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span></code></pre></figure>

<h2 id="what-makes-good-documentation">What makes good documentation?</h2>

<h3 id="andys-pick-2">Andy’s pick</h3>
<p>He told us that the <a href="https://developer.github.com/v3/">GitHub API</a> is one of the most complete and correct documentation there is. 
So if you want some guidelines, inspire yourself with this API.</p>

<h3 id="structure-and-accuracy">Structure and accuracy</h3>
<p>When documenting your application, your accuracy has to be 100% correct and understandable. 
The structure of your API is the representation of your application, so it better be good.</p>

<h3 id="cross-cutting-concerns">Cross-cutting concerns</h3>
<p>Andy put forward to document cross-cutting concerns on a general documentation level, avoiding repeating yourself in every single documented API call.
Concerns who made it to the top are:</p>

<ul>
  <li>Rate limiting</li>
  <li>Authentication and authorisation</li>
</ul>

<h4 id="and-http-verbscodes-patch-vs-put">And HTTP verbs/codes (PATCH VS PUT)</h4>
<p>To be RESTfull, you’ll have to follow the guidelines in having a correct API design. 
This <a href="https://upload.wikimedia.org/wikipedia/commons/8/88/Http-headers-status.png">picture</a> shows you how and when to use the correct verbs and HTTP codes</p>

<h3 id="3-main-questions-if-you-are-working-with-resources">3 main questions if you are working with resources</h3>
<ul>
  <li>What do they represent?</li>
  <li>What kind of input do they accept?</li>
  <li>What output do they produce?</li>
</ul>

<p>Last but not least: do not document uri’s!</p>

<h2 id="questions">Questions</h2>

<h3 id="will-constraints-be-officially-added-in-future-releases">Will constraints be officially added in future releases?</h3>
<p>The constraints snippets won’t be added in the future.
This is because Andy wants to give the developers the choice of what they want to implement.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Since Spring REST Docs is so effective in bringing documentation to the fun part of development I highly recommend to use this in your future Spring applications. 
Not only you will be smiling when the API guide is being generated but the Frontend developers will get a more understandable view of the backend.</p>

<h2 id="sources">Sources</h2>
<ul>
  <li><a href="https://twitter.com/ankinson">@ankinson</a></li>
  <li><a href="http://docs.spring.io/spring-restdocs/docs/1.0.x/reference/html5/">Spring REST Docs</a></li>
  <li><a href="https://developer.github.com/v3/">GitHub API</a></li>
  <li><a href="https://upload.wikimedia.org/wikipedia/commons/8/88/Http-headers-status.png">Verbs &amp; HTTP codes</a></li>
  <li><a href="http://asciidoctor.org/docs/user-manual/#introduction-to-asciidoctor">Asciidoctor manual</a></li>
  <li><a href="https://github.com/spring-projects/spring-restdocs/tree/master/samples/rest-notes-slate">Slate example</a></li>
</ul>


        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/conference/2016/06/30/SpringIO16-Spring-Rest-Docs.html&title=Spring I/O 16: Test-driven documentation with Spring REST Docs&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=Spring I/O 16: Test-driven documentation with Spring REST Docs&url=https://ordina-jworks.github.io/conference/2016/06/30/SpringIO16-Spring-Rest-Docs.html&via=lifeatordinabe&related=lifeatordinabe" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/conference/2016/06/30/SpringIO16-Spring-Rest-Docs.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/kevin-van-houtte/" class="image spotlight-image" title="">
            <img src="/img/author/kevin-van-houtte.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Kevin Van Houtte is a Software Engineer at Ordina Belgium. Passionate in the Spring ecosystem, Kevin is eager to discover new and efficient ways to solve problems. He enjoys a good challenge and is interested in cutting edge technologies. Kevin has a strong focus on building cloud native architectures with the right mindset on security and API design.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2023 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/springio.jpg";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
