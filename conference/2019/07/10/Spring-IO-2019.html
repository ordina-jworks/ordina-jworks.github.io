<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Spring IO 2019 - Nick Van Hoof, Tom Van den Bulck, Yolan Vloeberghs, Jago Staes, Gina De Beukelaer and Tim Schmitte">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/2019-05-16-Spring-IO-2019/spring-io.png"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/conference/2019/07/10/Spring-IO-2019.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Spring IO 2019 - Nick Van Hoof, Tom Van den Bulck, Yolan Vloeberghs, Jago Staes, Gina De Beukelaer and Tim Schmitte"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/2019-05-16-Spring-IO-2019/spring-io.png"/>

    
    <title>Spring IO 2019 - Nick Van Hoof, Tom Van den Bulck, Yolan Vloeberghs, Jago Staes, Gina De Beukelaer and Tim Schmitte &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/meet-the-team">Meet the team</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="https://join.ordina-jworks.io/">JOIN</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>Spring IO 2019</h2>
                

                
                    Posted Jul 10, 2019


    in <a href="/categories/conference/">Conference</a>



    by
    
        <a href="/author/nick-van-hoof">Nick Van Hoof</a>
        
            
                , 
            
        
    
        <a href="/author/tom-van-den-bulck">Tom Van den Bulck</a>
        
            
                , 
            
        
    
        <a href="/author/yolan-vloeberghs/">Yolan Vloeberghs</a>
        
            
                , 
            
        
    
        <a href="/author/jago_staes/">Jago Staes</a>
        
            
                , 
            
        
    
        <a href="/author/gina-de-beukelaer">Gina De Beukelaer</a>
        
            
                 and 
        
        
    
        <a href="/author/tim-schmitte/">Tim Schmitte</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/spring-io/">Spring IO</a>, 
    
        <a href="/tags/spring/">Spring</a>, 
    
        <a href="/tags/java/">Java</a>, 
    
        <a href="/tags/conference/">Conference</a>
    

                

                

            </div>
        </header>
    </section>


    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <h1 id="spring-io-2019">Spring IO 2019!</h1>

<p>Spring I/O has become a yearly tradition for our JWorks consultants. 
With 21 colleagues we went to the conference in beautiful Barcelona on the 16th and 17th of May.</p>

<p>The conference was held at the same location as last year, the <strong>Palau de Congressos de Barcelona</strong>. 
As indicated last year, this year there was an overlap at the venue with the <a href="http://www.automobilebarcelona.com/es/visitar" target="_blank" rel="noopener noreferrer">Barcelona 
International Motor Show</a>.
This gave us the opportunity to take a look at some beautiful cars during breaks.</p>

<hr />

<p><img class="image fit" src="/img/2019-05-16-Spring-IO-2019/venue.jpg" alt="Venue Spring I/O 2019" /></p>

<hr />

<p><img class="image fit" src="/img/2019-05-16-Spring-IO-2019/jworks.jpg" alt="JWorks at Spring I/O 2019" /></p>

<hr />

<p>In this blog post we’ll talk about some of the presentations of this year but it is not a complete list.
There were so many interesting talks and all of them are available on <a href="https://www.youtube.com/playlist?list=PLe6FX2SlkJdTlXfwer8JB-WGm-TEyIB2k" target="_blank" rel="noopener noreferrer">Youtube</a>.</p>

<p>Let us know if we missed anything by <a href="https://github.com/ordina-jworks/ordina-jworks.github.io/issues/new" target="_blank" rel="noopener noreferrer">filing an issue</a> or contacting us at <a href="mailto:jworks@ordina.be" target="_blank" rel="noopener noreferrer">our general JWorks email</a>.</p>

<ul>
  <li><a href="#moving-from-imperative-to-reactive-by-paul-harris">Moving from Imperative to Reactive by Paul Harris</a></li>
  <li><a href="#configuration-management-with-kubernetes-a-spring-boot-use-case-by-nicolas-frankel">Configuration Management with Kubernetes, a Spring Boot use case by Nicolas Frankel</a></li>
  <li><a href="#building-better-monoliths---modulithic-applications-with-spring-boot-by-oliver-drotbohm">Building better monoliths - Modulithic Applications with Spring Boot by Oliver Drotbohm</a></li>
  <li><a href="#cutting-edge-continuous-delivery-automated-canary-analysis-through-spring-based-spinnaker-by-andreas-evers">Cutting-Edge Continuous Delivery: Automated Canary Analysis through Spring based Spinnaker by Andreas Evers</a></li>
  <li><a href="#using-java-modules-in-practice-with-spring-boot-by-jaap-coomans">Using Java Modules in Practice with Spring Boot by Jaap Coomans</a></li>
  <li><a href="#stream-processing-with-the-spring-framework-by-josh-long-and-viktor-gamov">Stream Processing with the Spring Framework by Josh Long and Viktor Gamov</a></li>
  <li><a href="#how-fast-is-spring-by-dave-syer">How Fast is Spring by Dave Syer</a></li>
  <li><a href="#kubernetes-andor-cloud-foundry---how-to-run-your-spring-boot-microservices-on-state-of-the-art-cloud-platforms-by-matthias-haeussler">Kubernetes and/or Cloud Foundry - How to run your Spring Boot Microservices on state-of-the-art cloud platforms by Matthias Haeussler</a></li>
  <li><a href="#migrating-a-modern-spring-web-application-to-serverless-by-jeroen-sterken-and-wim-creuwels">Migrating a modern spring web application to serverless by Jeroen Sterken and Wim Creuwels</a></li>
  <li><a href="#testing-spring-boot-applications-by-andy-wilkinson">Testing Spring Boot Applications by Andy Wilkinson</a></li>
  <li><a href="#how-to-live-in-a-post-spring-cloud-netflix-world-by-olga-maciaszek-and-marcin-grzejszczak">How to live in a post-Spring-Cloud-Netflix world by Olga Maciaszek and Marcin Grzejszczak</a></li>
  <li><a href="#event-driven-microservices-with-axon-and-spring-boot-excitingly-boring-by-allard-buijze">Event-Driven Microservices with Axon and Spring Boot: excitingly boring by Allard Buijze</a></li>
  <li><a href="#how-to-secure-your-spring-apps-with-keycloak-by-thomas-darimont">How to secure your Spring apps with Keycloak by Thomas Darimont</a></li>
  <li><a href="#zero-downtime-migrations-with-spring-boot-by-alex-soto">Zero Downtime Migrations with Spring Boot by Alex Soto</a></li>
</ul>

<h1 id="day-1-talks--workshops">Day 1: Talks &amp; Workshops</h1>

<h2 id="moving-from-imperative-to-reactive-by-paul-harris">Moving from Imperative to Reactive by <a href="https://twitter.com/twoseat" target="_blank" rel="noopener noreferrer">Paul Harris</a></h2>

<p><span class="image left"><img class="p-image" alt="Paul Harris" src="/img/2019-05-16-Spring-IO-2019/paul-harris.jpg" /></span></p>

<p>When development started on the Cloud Foundry Java client, <a href="https://projectreactor.io/" target="_blank" rel="noopener noreferrer">Spring Reactor</a> was also rebooted. 
Which means that they became their very first customer.</p>

<p>Paul Harris says that he made all the mistakes you can make with reactive programming.
And now he’ll teach us how to avoid many of those.</p>

<p>It al started with the <strong><a href="https://www.reactivemanifesto.org/" target="_blank" rel="noopener noreferrer">Reactive Manifesto</a></strong> in 2013, which came up with four ideas for reactive applications:</p>
<ul>
  <li>Responsive: it should feel as if the application is progressing, with for example, some feedback.</li>
  <li>Resilient: if a particular part of you application fails, the remainder should be able to cope with that.</li>
  <li>Elastic: make the most out of the resources available to the application.</li>
  <li>Message-Driven: more message-driven than event-driven.</li>
</ul>

<p>A manifesto is nice, but it does not compile.</p>

<p>The next step was <a href="https://www.reactive-streams.org/" target="_blank" rel="noopener noreferrer">Reactive Streams</a> which defined a set of interfaces for how we might deal with reactive streaming situations.
You can distinguish four interfaces:</p>
<ul>
  <li><a href="https://www.reactive-streams.org/reactive-streams-1.0.2-javadoc/org/reactivestreams/Publisher.html" target="_blank" rel="noopener noreferrer">Publisher</a>: which emits ‘things’ or signals in other words.</li>
  <li><a href="https://www.reactive-streams.org/reactive-streams-1.0.2-javadoc/org/reactivestreams/Subscriber.html" target="_blank" rel="noopener noreferrer">Subscriber</a>: listens to those signals.</li>
  <li><a href="https://www.reactive-streams.org/reactive-streams-1.0.2-javadoc/org/reactivestreams/Subscription.html" target="_blank" rel="noopener noreferrer">Subscription</a>: after a subscriber subscribed to a publication a subscription is obtained.</li>
  <li><a href="https://www.reactive-streams.org/reactive-streams-1.0.2-javadoc/org/reactivestreams/Processor.html" target="_blank" rel="noopener noreferrer">Processor</a>: is a combination of a publisher and a subscriber that allows you to process data.</li>
</ul>

<p>The intention of Reactive Streams was that more useful real world implementations would follow.
One of these is Spring Reactor.
For a good introduction to Spring Reactor you can read our <a href="https://ordina-jworks.github.io/reactive/2016/12/12/Reactive-Programming-Spring-Reactor.html" target="_blank" rel="noopener noreferrer">blog post</a> about it.</p>

<p>Spring Reactor contains various reactive frameworks, the three big ones are:</p>
<ul>
  <li><a href="https://projectreactor.io/docs/core/release/api/" target="_blank" rel="noopener noreferrer">Reactor-Core</a>: the basic provision.</li>
  <li><a href="https://projectreactor.io/docs/netty/release/api/" target="_blank" rel="noopener noreferrer">Reactor-Netty</a>: the reactive implementation of Netty.</li>
  <li><a href="https://projectreactor.io/docs/test/release/api/" target="_blank" rel="noopener noreferrer">Reactor-Test</a>: which is a bunch of really good useful methods for testing reactive streams.</li>
</ul>

<p>Before Paul dove in the code he first explained <a href="https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html" target="_blank" rel="noopener noreferrer">Mono</a> and <a href="https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html" target="_blank" rel="noopener noreferrer">Flux</a>.</p>

<h3 id="a-mono">a Mono</h3>
<p>A Reactive Streams <code class="language-plaintext highlighter-rouge">Publisher</code> that emits none or a single element.
<img alt="a Mono" src="/img/2019-05-16-Spring-IO-2019/mono.svg" class="image fit" style="margin:0px auto; max-width: 500px;" /></p>

<h3 id="a-flux">a Flux</h3>
<p>A <code class="language-plaintext highlighter-rouge">Publisher</code> that emits zero to N elements.
<img alt="a Flux" src="/img/2019-05-16-Spring-IO-2019/flux.svg" class="image fit" style="margin:0px auto; max-width: 500px;" /></p>

<p>Paul showed us a demo of how to make a legacy Maven Spring application reactive.
In order to do so the following steps were taken:</p>
<ul>
  <li>Add dependency to <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-webflux" target="_blank" rel="noopener noreferrer">Spring Boot Starter WebFlux</a>.
This is the reactive variant of <code class="language-plaintext highlighter-rouge">Web MVC</code>. 
You shouldn’t need to change anything to keep it running unless you have used specific server features.</li>
  <li>Convert the return of a <code class="language-plaintext highlighter-rouge">List</code> to a <code class="language-plaintext highlighter-rouge">Flux</code>.</li>
  <li>Convert return types for repository methods to <code class="language-plaintext highlighter-rouge">Mono</code> or <code class="language-plaintext highlighter-rouge">Flux</code>.
    <ul>
      <li>Use the static method <code class="language-plaintext highlighter-rouge">.justOrEmpty</code> of the <code class="language-plaintext highlighter-rouge">Mono</code> type in order to deal with an optional.</li>
      <li>Use <code class="language-plaintext highlighter-rouge">.switchIfEmpty</code> to return a proper error response.</li>
      <li>In order to return a <code class="language-plaintext highlighter-rouge">Flux</code>: use <code class="language-plaintext highlighter-rouge">fromIterable</code>.</li>
    </ul>
  </li>
</ul>

<p>Conclusion is that reactive starts off complicated, but it will become easier when you have used it more often. 
It doesn’t have that many different methods you can use, so all in all it is quite easy to wrap your head around.</p>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/vSHNBgY7MGA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="configuration-management-with-kubernetes-a-spring-boot-use-case-by-nicolas-frankel">Configuration Management with Kubernetes, a Spring Boot use case by <a href="https://twitter.com/nicolas_frankel" target="_blank" rel="noopener noreferrer">Nicolas Frankel</a></h2>

<p><span class="image left"><img class="p-image" alt="Nicolas Frankel" src="/img/2019-05-16-Spring-IO-2019/nicolas-frankel.jpg" /></span></p>

<p>Nicolas Frankel is a Developer Advocate who works for <a href="https://www.exoscale.com/" target="_blank" rel="noopener noreferrer">Exoscale</a>, a European cloud hosting provider.</p>

<p>In this session, he explained how to correctly configure each environment with its own parameters and settings.</p>

<p>There are traditional configuration management tools such as Chef, Ansible, Puppet, … . 
But what is the point?</p>

<p><em>Docker images are and should always be immutable.</em><br />
They should be configurable depending on the environment where we want to run our image in.
A Docker image should be able to run in different environments without problems, this is where <a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a> comes in. 
Kubernetes can easily configure and parameterize each Docker image to run in different environments.</p>

<p>One thing to remember is that you should make sure that you are working in the correct environment. 
Nicolas likes to add banners to the page to know in which environment you are currently working. 
For example, if you are working in the development environment, then you might want to show a big blue ‘Development’ banner, while in production you would prefer using a big, red, blinking one.</p>

<p>This can all be done with the power of Kubernetes and immutable images. 
You can simply declare your environment variables in Kubernetes, then you can inject your environment in your Spring Boot application.</p>

<p>There are three ways to access your environment variables in Spring Boot: profiles, <code class="language-plaintext highlighter-rouge">@Value</code> or <code class="language-plaintext highlighter-rouge">@ConfigurationProperties</code>.</p>

<p>To get started in Kubernetes, you have to create a few Kubernetes objects:</p>
<ol>
  <li>(Optional) A <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/" target="_blank" rel="noopener noreferrer">Namespace</a></li>
  <li>A <a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener noreferrer">Service</a></li>
  <li>A <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod/" target="_blank" rel="noopener noreferrer">Pod</a> / <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener noreferrer">Deployment</a></li>
</ol>

<p>In the Deployment, you can give the arguments based on the environment that you want to spin up.
With a <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/" target="_blank" rel="noopener noreferrer">ConfigMap</a>, you can combine your environment variables that belong to each other (ex. database settings, AWS keys, …).
Once done defining the ConfigMap, you can import the ConfigMap in your Deployment declaration.</p>

<p>What’s also very interesting is that you can declare your environment variables in a seperate Git repository with the use of an <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" target="_blank" rel="noopener noreferrer">initContainer</a>. 
Of course, you can already do this with <a href="https://spring.io/projects/spring-cloud-config" target="_blank" rel="noopener noreferrer">Spring Cloud Config</a>. 
This is just an alternative on the Kubernetes side of configuration management.</p>

<p>If you want to read more about Nicolas Frankel’s work, you can read his blog <a href="https://blog.frankel.ch" target="_blank" rel="noopener noreferrer">here</a>.</p>

<p>You can watch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/cTWu_DLqDt4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="building-better-monoliths---modulithic-applications-with-spring-boot-by-oliver-drotbohm">Building better monoliths - Modulithic Applications with Spring Boot by <a href="https://twitter.com/odrotbohm" target="_blank" rel="noopener noreferrer">Oliver Drotbohm</a></h2>
<p><span class="image left"><img class="p-image" alt="Oliver Drotbohm" src="/img/2019-05-16-Spring-IO-2019/oliver-drotbohm.jpg" /></span></p>

<p>This talk caught our attention because we’re currently working at a client where we see some of the limitations of a microservice architecture. 
We are currently considering merging multiple of them into a more coarse-grained architecture containing multiple more ‘monolithic’ applications.</p>

<h3 id="microservice-architectures-also-have-disadvantages">Microservice architectures also have disadvantages!</h3>
<p>The talk starts off explaining some of the key differences between microservice and classic monoliths from an architectural point of view.</p>

<p>The key takeaway here is that although there’s an advantage in terms of architecture degradation, it is harder to accidentally call another microservice than to call a method on another bounded context in a monolith.
This advantage comes at a cost, you lose compile-time safety which makes it harder to refactor than a monolith and it is harder to test the whole system.
These are especially disadvantageous in the early stages of the project when it is not clear yet what the correct bounded contexts are.</p>

<h3 id="the-modulith">The Modulith</h3>
<p>It might thus be useful to consider starting off with a well-structured monolith before considering evolving towards microservices.
But how do we avoid having our architecture degrade quickly?
Enter the modulith; a modulith is basically a monolith with multiple modules with well-defined dependencies in it.
To achieve this, Oliver demonstrated a ‘Moduliths’ tool that he’s in process off developing for the Spring framework.</p>

<p>The idea is to use a package structure convention and enforce it with tests using Java’s Reflection.
In this package structure convention only (public members of) the root package of each module are accessible to other modules.
It’s considered the API package of that module while subpackages are considered internal. 
There’s more to this tool however; another problem of modularizing your application is that you typically want to do integration testing on the bounds of your modules.
The ‘Moduliths’ tool allows to bootstrap your module alone or in various configurations with specific module dependencies for integration testing. 
To top it off, there’s support to generate PlantUML diagrams for documentation purposes!</p>

<p>For more details take a look at <a href="https://github.com/odrotbohm/moduliths" target="_blank" rel="noopener noreferrer">https://github.com/odrotbohm/moduliths</a>.</p>

<h3 id="alternative-approaches">Alternative approaches</h3>
<p>There are of course other ways to divide your application into modules and maintain the architecture:</p>

<h4 id="multiple-artifactsgradlemaven-modules">Multiple artifacts(gradle/maven modules).</h4>
<p>You might get an explosion of artifacts and it can become kind of verbose with all the configuration(<code class="language-plaintext highlighter-rouge">pom.xml</code> or <code class="language-plaintext highlighter-rouge">build.gradle</code>) files.
Additionally, the artifacts are redundant since we’re planning on deploying everything together anyway.
There’s also no support to dynamically compose modules for tests since the dependencies are typically statically defined.</p>

<p>This was actually the way we were considering handling it at our client.
The big advantage here in our eyes is that reflection can be avoided and the architecture can be verified at compile-time. 
The good news is that it is possible to combine it with the moduliths approach, 
which might be useful for integration testing.</p>

<h4 id="java9-module-system">Java(9+) Module System</h4>
<p>Could be used but it’s certainly not designed for this.
It definitely doesn’t have any support for dynamically composing your modules for testing.</p>

<h4 id="external-tools">External tools</h4>
<p>JQAssist, Sonargraph, jDepend… . 
These are powerful tools but usually run during the build making the feedback loop bigger.</p>

<h3 id="wrapping-it-up">Wrapping it up</h3>

<p>The moduliths approach explained in this talk gives us a nice intermediate step towards a better architecture.
It alleviates some of the biggest problems with monoliths without introducing new ones using a more complex architecture like microservices!</p>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/bVaiTPYlHFE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="cutting-edge-continuous-delivery-automated-canary-analysis-through-spring-based-spinnaker-by-andreas-evers">Cutting-Edge Continuous Delivery: Automated Canary Analysis through Spring based Spinnaker by <a href="https://twitter.com/andreasevers" target="_blank" rel="noopener noreferrer">Andreas Evers</a></h2>

<blockquote>
  <p>The ultimate goal of continuous delivery is to deploy software quickly and automatically.
This can only be achieved if we are able to push new code without fear.</p>
</blockquote>

<p><span class="image left"><img class="p-image" alt="Andreas Evers" src="/img/2019-05-16-Spring-IO-2019/andreas-evers.jpg" /></span></p>

<p>Throughout the years, Andreas saw that there are two opposing forces that are battling it out.
On the one hand there is the need for speed while on the other hand there is the need for confidence.
Like, updating in production without testing will give you great speed, but not much confidence.</p>

<p>Microservices using integration tests on an acceptance environment might mean that you test an already obsolete topology because microservices can change that quickly.
Contract testing does not cover all the aspects needed to provide confidence as it does not test behaviour.</p>

<p>A good alternative that Andreas talked about is Canary Analysis.
In order to do so let’s first introduce Spinnaker:
<a href="https://www.spinnaker.io/" target="_blank" rel="noopener noreferrer">Spinnaker</a> is an open source, multi-cloud continuous delivery platform created at Netlfix.
It supports a lot of cloud environments like: OpenStack, AWS, Google Cloud, Microsoft Azure, Cloud Foundry, … 
Major contributors are Netflix, Google, Microsoft, Pivotal, …</p>

<p>Under the hood, Spinnaker is composed of a bunch of Spring Boot microservices.
Another important component of Spinnaker is <a href="https://github.com/spinnaker/halyard" target="_blank" rel="noopener noreferrer">Halyard</a>: a bill of materials for the different microservices of Spinnaker, helping you with the deployment of Spinnaker.
Spinnaker also integrates well with your CI environments.</p>

<p>Cloud deployments are often complex:</p>
<ul>
  <li>Different regions</li>
  <li>Different accounts for your environments (production, acceptance, … )</li>
</ul>

<p>Teams want an easy road into the cloud, no complexity to deploy.
On the other hand easy rollbacks are important.
Spinnaker can help you with this!</p>

<p>Various deployment strategies exist:</p>
<ul>
  <li>Red/Black</li>
  <li>Rolling Red/Black</li>
  <li><a href="https://www.spinnaker.io/guides/user/canary/" target="_blank" rel="noopener noreferrer">Canary analysis</a> 
<img alt="deployment strategies" src="/img/2019-05-16-Spring-IO-2019/deployment-strategies.png" class="image fit" style="margin:0px auto; max-width: 700px;" /></li>
</ul>

<p>You can define a pipeline to deploy into production:
<img alt="pipeline tasks" src="/img/2019-05-16-Spring-IO-2019/pipeline-tasks.png" class="image fit" style="margin:0px auto; max-width: 500px;" /></p>

<p>For every stage you will have a series of steps.
Within every step you can define multiple tasks and every task has some operations which get executed.
A lot of these steps are very specific depending on the cloud which Spinnaker tends to abstract away.</p>

<p>Spinnakers makes it possible to go fast but still do it safely:</p>
<ul>
  <li>Automated rollbacks</li>
  <li>Deployment windows</li>
  <li>Cluster locking</li>
  <li>Traffic guards which are extra safeguards which can be configured</li>
  <li>Manual judgements which makes use of the human “gut” feeling, which a computer does not have</li>
  <li>…</li>
</ul>

<p>Andreas had a Rick &amp; Morty demo application of which he had an old, already deployed version and a new version.
When doing canary, it is wise to startup a baseline, the old version, so that you have the solid baseline to measure against.
Spinnaker will also look at JVM metrics like memory, CPU, etc. 
But you can also define business metrics like startup time of the app, response times, …</p>

<p>When the canary fails, it will just rollback and restore the previous version.
Spinnaker will decide if the canary fails by looking at the statistics it gathered.</p>

<p>Canary testing allows you to test with real users and real production data.
At the same time it reduces the possible impact of your new version on end users.</p>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/uB35m60GAZw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="using-java-modules-in-practice-with-spring-boot-by-jaap-coomans">Using Java Modules in Practice with Spring Boot by <a href="https://twitter.com/JaapCoomans" target="_blank" rel="noopener noreferrer">Jaap Coomans</a></h2>
<p><span class="image left"><img class="p-image" alt="Jaap Coomans" src="/img/2019-05-16-Spring-IO-2019/jaap-coomans.jpg" /></span></p>

<h3 id="current-state">Current State</h3>
<p>First Jaap started with addressing the current state of the module system:</p>
<ul>
  <li>Most tooling support is good (Maven, IDE, …)</li>
  <li>In frameworks the adoption is very low</li>
  <li>For developers it is even lower</li>
</ul>

<p>It can be summarized as: it’s like eating vegetables, we know it is healthy, we know its beneficial, but we don’t do it.</p>

<h3 id="using-modules">Using modules?!</h3>

<p>What challenges will you face when you want to migrate to modules.</p>
<ul>
  <li>Split packages: packages with the same name exposed by more than one module.</li>
  <li>Automatic modules: plain JAR on your module path and thus interpreted as a module.
This exports and opens all packages, reads all other modules and it derives its module name from the filename
The problem with that is that you can only have one module with a certain name on your module path.
    <ul>
      <li>In Maven Central, 3.500 collisions are possible.</li>
      <li>You can circumvent this with the Automatic-Module-Name in your manifest file.</li>
    </ul>
  </li>
</ul>

<p>For the demo application, Jaap used MongoDB.
There is a split package issue in the legacy mongo client, not with the new one, but Spring Data Mongo relies heavily on the legacy mongo client instead of the new one.</p>

<p>In order to get started with modules, the first steps are just to minimize the problems you might encounter.</p>
<h4 id="step-1--2--3">Step 1 + 2 + 3:</h4>
<ul>
  <li>Upgrade your dependencies as this will minimize conflicts.</li>
  <li>Use JDK11+.</li>
  <li>Compile to  JDK11+.</li>
</ul>

<p>These first three steps are just to reduce the problems you might encounter.</p>

<h4 id="step-4">Step 4:</h4>
<p>Prepare the module structure within your code, so you can go from module to module.
Don’t start with one big module from the start.</p>

<h4 id="step-5">Step 5:</h4>
<p>Add module descriptors bottom-up.</p>

<p>Create a new <code class="language-plaintext highlighter-rouge">module-info.java</code>.</p>

<p>This first module has no external dependencies whatsoever making it very easy to define.
You only need to indicate what your are going to expose.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">module</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">domain</span> <span class="o">{</span>
    <span class="n">exports</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">domain</span><span class="o">;</span>
    <span class="n">exports</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">domain</span><span class="o">.</span><span class="na">command</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Note: you might need a newer version of the Maven Surefire Plugin; Jaap used version <code class="language-plaintext highlighter-rouge">3.0.0-M3</code>.</p>

<p>For a module which needs other modules, you will need to define a little bit more within the <code class="language-plaintext highlighter-rouge">module-info</code>.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">module</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">bgg</span> <span class="o">{</span>
    <span class="n">requires</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">domain</span><span class="o">;</span>
    <span class="c1">//requires com.sun.xml.bind;</span>
    <span class="n">requires</span> <span class="n">java</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">bind</span><span class="o">;</span>
    <span class="n">requires</span> <span class="n">feign</span><span class="o">.</span><span class="na">core</span><span class="o">;</span>
    <span class="n">requires</span> <span class="n">feign</span><span class="o">.</span><span class="na">jaxb</span><span class="o">;</span>
   
    <span class="n">exports</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">bgg</span><span class="o">.</span><span class="na">factory</span><span class="o">;</span>
    <span class="n">opens</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">bgg</span><span class="o">.</span><span class="na">xmlapi</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">requires</code>: Defines the modules that you need.</li>
  <li><code class="language-plaintext highlighter-rouge">exports</code>: The packages that you expose.</li>
  <li><code class="language-plaintext highlighter-rouge">opens</code>: This means that this will make a module available for reflection (i.e. at runtime), that you might need for JAXB in this case.</li>
</ul>

<p>Spring is not yet modular, but they did define automatic module names in all of their JARs.</p>

<h4 id="step-6">Step 6:</h4>
<p>Add a module descriptor to the main JAR.
Only then you get all the benefits of the module system.
At this moment you will also encounter all the hurdles as this will also get you into runtime errors.
If you do not execute this step, your main application will still be using the classpath and not the module path.</p>

<p>Export the main class and the application module.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">module</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">application</span> <span class="o">{</span>
    <span class="n">requires</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">bgg</span><span class="o">;</span>
    <span class="o">...</span>
    <span class="n">requires</span> <span class="n">spring</span><span class="o">.</span><span class="na">context</span><span class="o">;</span>
    
    <span class="n">exports</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">;</span>
    <span class="n">exports</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">application</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>You can also define <code class="language-plaintext highlighter-rouge">requires transitive</code>.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">module</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoomans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">persistence</span><span class="o">{</span>
    <span class="n">requires</span> <span class="n">transitive</span> <span class="n">nl</span><span class="o">.</span><span class="na">jaapcoommans</span><span class="o">.</span><span class="na">boardgame</span><span class="o">.</span><span class="na">domain</span><span class="o">;</span>
 <span class="o">}</span>
</code></pre></div></div>
<p>This last part means that when you depend on that module, you will also implicitly depend on that transitive module.</p>

<h3 id="runtime-errors">Runtime Errors.</h3>

<p>When you encounter runtime errors, you can pretty much copy paste the errors you get about opening the modules.
Encountering <code class="language-plaintext highlighter-rouge">ClassNotFoundExceptions</code> hints at missing modules for which you should define a <code class="language-plaintext highlighter-rouge">requires</code> definition.</p>

<p>When you stop getting errors, this means that you have reached the next phase..</p>

<p>Spring does use some of the internals of the JDK, which can be fixed by:<code class="language-plaintext highlighter-rouge">requires jdk.unsupported</code>.
This does help you out for now, but the module name alone screams that you should not use it.</p>

<h3 id="lessons-learned">Lessons Learned.</h3>

<p>As a summary here are the lessons learned by Jaap:</p>
<ul>
  <li>Move bottom up.</li>
  <li>Test all paths on every step, because you will encounter runtime errors.</li>
  <li>The logs have the answer while the JVM gives you a good indication of errors by the module system.</li>
  <li>It still involves pioneering.</li>
</ul>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/UFBH7gHJkb4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="stream-processing-with-the-spring-framework-by-josh-long-and-viktor-gamov">Stream Processing with the Spring Framework by <a href="https://twitter.com/starbuxman" target="_blank" rel="noopener noreferrer">Josh Long</a> and <a href="https://twitter.com/gamussa" target="_blank" rel="noopener noreferrer">Viktor Gamov</a></h2>

<p>All the source code of the live demo can be found on <a href="https://github.com/joshlong/spring_io_2019/tree/master/kafka_and_spring" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>

<p><span class="image left"><img class="p-image" alt="Josh Long" src="/img/2019-05-16-Spring-IO-2019/josh-long.jpg" /></span></p>

<p><span class="image left"><img class="p-image" alt="Viktor Gamov" src="/img/2019-05-16-Spring-IO-2019/viktor-gamov.jpg" /></span></p>

<p>Statement: <em>It is dangerous to think of Kafka as a message queue as it tends to become a vine of data within your organization to move data around thus becoming a database.</em></p>

<p>In the demo they made use of <a href="https://avro.apache.org/" target="_blank" rel="noopener noreferrer">Apache Avro</a>.
The Avro format will be used as a contract for the messages, it also gives you the option to generate Java classes based on the schema.
You can use an Avro Maven plugin for that.</p>

<p>Kafka does not care what you put in there.
But passing along a schema gives your consumers the option to verify that they can process the message or not.</p>

<p><a href="https://spring.io/projects/spring-kafka" target="_blank" rel="noopener noreferrer">Spring Kafka</a> gives you <a href="https://docs.spring.io/spring-kafka/api/org/springframework/kafka/core/KafkaTemplate.html" target="_blank" rel="noopener noreferrer">KafkaTemplates</a> that you can use.
The <code class="language-plaintext highlighter-rouge">KafkaTemplate</code> wraps a producer and provides you with some extra handy methods to send data to Kafka topics.
For more information you can check out the reference guide to <a href="https://docs.spring.io/spring-kafka/reference/html/#kafka-template" target="_blank" rel="noopener noreferrer">use KafkaTemplates</a>.</p>

<p>It is important that you think about the type of the key and the type of the value, serializer and deserializer.</p>

<p>For this you will need to define a <code class="language-plaintext highlighter-rouge">DefaultKafkaProducerFactory</code> which will provide you with some default config options like:</p>
<ul>
  <li>Bootstrap servers: where to find your Kafka.</li>
  <li>Schema registry URL: where to find your Avro schema registry.</li>
  <li>Key serializer: the class to be used to serialize your key when writing the message to Kafka.</li>
  <li>Value serializer: the class to be used to serialize your value.</li>
</ul>

<p>Without those serializers, Kafka will not be able to transform your message.</p>

<p>Various other frameworks worth mentioning:</p>
<ul>
  <li><a href="https://spring.io/projects/spring-cloud-stream" target="_blank" rel="noopener noreferrer">Spring Cloud Stream</a>: allows you to abstract the use of message brokers.
It will manage a lot of the bindings for you with Kafka Streams mapping a lot of the configuration automatically for you.</li>
  <li><a href="https://kafka.apache.org/documentation/streams/" target="_blank" rel="noopener noreferrer">Kafka Streams</a>: a stream processing pipeline that you can use to build processing pipelines.
Similar to Spark but less of a hassle to set up.
Ktable is the representation of state.</li>
</ul>

<p>Some final notes about Kafka Streams:</p>
<ul>
  <li>
    <p>Kafka streams allows you to visualize your topology in a Directed Acyclic Graph using <code class="language-plaintext highlighter-rouge">TopologyDescroption</code>.
For more info see this <a href="https://docs.confluent.io/current/streams/faq.html#visualizing-topologies" target="_blank" rel="noopener noreferrer">link</a>.</p>
  </li>
  <li>
    <p>Kafka Streams allows you to do stateful stream processing in an easy way. 
Its state store is replicated within Kafka so it can restore it in case of failure.</p>
  </li>
  <li>
    <p>Do not forget your <code class="language-plaintext highlighter-rouge">SerDes</code> when writing out Kafka Streams code.
<code class="language-plaintext highlighter-rouge">Spring Cloud Stream</code> automatically converts to JSON but your <code class="language-plaintext highlighter-rouge">Kafka streams</code> code deals with binary data, so it needs to know how to serialize / deserialize. 
Some of them are predefined by Kafka: <code class="language-plaintext highlighter-rouge">StringSerde</code>, <code class="language-plaintext highlighter-rouge">LongSerde</code> and <code class="language-plaintext highlighter-rouge">JsonSerdes</code>.</p>
  </li>
</ul>

<p>It was a very entertaining live coding session which you can rewatch here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/OHjVhTQ3j6g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="how-fast-is-spring-by-dave-syer">How Fast is Spring by <a href="https://twitter.com/david_syer" target="_blank" rel="noopener noreferrer">Dave Syer</a></h2>

<p><span class="image left"><img class="p-image" alt="Dave Syer" src="/img/2019-05-16-Spring-IO-2019/dave-syer.jpg" /></span></p>

<p>In this talk Dave is going over the performance improvements carried out by the Spring team.</p>

<p>Cold startup time of the JVM takes up some time but once started it is an awesome place.</p>

<p>We went through some measurements.
An application started up in 1.300 milliseconds.
This went down to 1.200 milliseconds by tuning Spring a bit.
By then using Spring functional bean definitions it went down to 600 milliseconds.</p>

<p>The overhead of Spring Boot versus no Spring Boot is currently around 15 milliseconds.
Thus, a lot of the overhead has already been dealt with.</p>

<p>If the classloader has been warmed up, the startup time difference is much smaller.
With Spring Devtools you have a warm classloader, which reduces your startup time.</p>

<p>Lots of optimizations have happened e.g. heap memory went down from 10MB to 6MB with the move to Spring Boot 2.</p>

<p><a href="https://github.com/jvm-profiling-tools/async-profiler" target="_blank" rel="noopener noreferrer">Async profiler</a> is a tool you can attach to a running Java process.
It has little to no impact on the running performance and shows the calls being executed.
The width of the flame is the time it took to run.
Red and yellow colour means: not in Java user memory and ready for garbage collection.</p>

<p><img alt="Async profiler" src="/img/2019-05-16-Spring-IO-2019/async-profiler.svg" class="image fit" style="margin:0px auto; max-width: 500px;" /></p>

<p>Spring Boot 2.2 has boosted performance.</p>
<ul>
  <li>Classpath exclusion from Spring Boot web starters.</li>
  <li><code class="language-plaintext highlighter-rouge">spring-context-indexer</code>: this is marginal but with a lot of beans it will have a bigger impact.</li>
  <li>Spring Actuators used to be costly for startup time, but no longer a big impact since the optimizations in Spring Boot 2.0.</li>
  <li>Use explicit <code class="language-plaintext highlighter-rouge">spring.config.location</code>.</li>
  <li>Switch of JMX <code class="language-plaintext highlighter-rouge">spring.jmx.enabled = false</code> (in 2.2 this is the default setting).</li>
  <li>Make bean definitions lazy by default.
In production you might not want this because if a bean is lazy loaded, the application might not fail on startup.
It can make sense to do this during development in order to improve development time.</li>
  <li>Unpack the fat JAR and run it by specifying the explicit classpath as <code class="language-plaintext highlighter-rouge">java --jar</code> is little bit slower compared to using <code class="language-plaintext highlighter-rouge">java --cp</code>.</li>
  <li>Run the JVM with <code class="language-plaintext highlighter-rouge">-noverify</code> and consider <code class="language-plaintext highlighter-rouge">-XX:TieredStopAtLevel=1</code>.
    <ul>
      <li>All JVM experts will tell you not to do this.</li>
      <li><code class="language-plaintext highlighter-rouge">-noverify</code> will gain you 40% time with any app but it does not validate byte code which is less interesting in production as the JVM will just crash and show you no exception whatsoever.</li>
      <li><code class="language-plaintext highlighter-rouge">-XX:TieredStopAtLevel=1</code> this deals with the JIT compiler, will gain you around 10% with any app.</li>
    </ul>
  </li>
  <li>Import auto configuration manually as it is not needed and might give you a small speed gain.</li>
</ul>

<p>A nice list of tools you can use:</p>
<ul>
  <li>Benchmarks: <a href="https://openjdk.java.net/projects/code-tools/jmh/" target="_blank" rel="noopener noreferrer">JMH</a></li>
  <li>JUnit and JMH: <a href="https://github.com/mp911de/microbenchmark-runner" target="_blank" rel="noopener noreferrer">microbenchmark-runner</a></li>
  <li>Profiling: <a href="https://github.com/jvm-profiling-tools/async-profiler" target="_blank" rel="noopener noreferrer">async-profiler</a></li>
  <li>GC pressure: <a href="https://www.oracle.com/technetwork/java/javaseproducts/mission-control/java-mission-control-1998576.html" target="_blank" rel="noopener noreferrer">JMC aka flight controller</a></li>
  <li>Quick metrics for any Spring Boot JAR: <a href="https://github.com/dsyer/spring-boot-startup-bench" target="_blank" rel="noopener noreferrer">Benchmark launcher</a> from dsyer/spring-boot-startup.</li>
  <li>Classpath manipulation: <a href="https://github.com/spring-projects-experimental/spring-boot-thin-launcher" target="_blank" rel="noopener noreferrer">Thin Launcher</a></li>
  <li>Profiling with <a href="https://www.eclipse.org/aspectj/" target="_blank" rel="noopener noreferrer">AspectJ</a></li>
</ul>

<p>Other Remarks:</p>
<ul>
  <li>The Hibernate team is pretty aware of the GC issues and have done serious optimizations around it.</li>
  <li>Lazy beans: Pay attention to custom beans with an expensive <code class="language-plaintext highlighter-rouge">@PostConstruct</code>.
It tends to be misused for opening files, accessing database, which tends to block up the startup.</li>
  <li>You can try using <code class="language-plaintext highlighter-rouge">@ImportAutoConfiguration</code> but then you need to know which <code class="language-plaintext highlighter-rouge">AutoConfigurations</code> you need to include.
Discovering that is the hard part.</li>
  <li>Functional Bean Definitions: 
If you use <code class="language-plaintext highlighter-rouge">@Configuration</code> then you make use of reflection.
You can implement an <code class="language-plaintext highlighter-rouge">ApplicationContextInitializer</code> which makes you reflection free, but it is a bit harder to implement.</li>
  <li>CPU constrained environments benefit from native images built with <a href="https://www.graalvm.org/docs/reference-manual/aot-compilation/" target="_blank" rel="noopener noreferrer">GraalVM</a>.</li>
</ul>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/T22i3WAa6dI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="kubernetes-andor-cloud-foundry---how-to-run-your-spring-boot-microservices-on-state-of-the-art-cloud-platforms-by-matthias-haeussler">Kubernetes and/or Cloud Foundry - How to run your Spring Boot Microservices on state-of-the-art cloud platforms by <a href="https://twitter.com/maeddes" target="_blank" rel="noopener noreferrer">Matthias Haeussler</a></h2>

<p><span class="image left"><img class="p-image" alt="Matthias Haeussler" src="/img/2019-05-16-Spring-IO-2019/matthias-haeussler.jpg" /></span></p>

<p>Matthias Haeussler is a Cloud Advocate at NovaTec Consulting. 
He gave a presentation about the differences between Kubernetes and Cloud Foundry.
He showed us this live with Spring Boot application which was deployed on both Kubernetes and Cloud Foundry.</p>

<h3 id="cloud-foundry">Cloud Foundry</h3>
<p>To deploy your application on Cloud Foundry, you simply have to run one command: <code class="language-plaintext highlighter-rouge">cf push</code> (under the assumption that you have the CLI installed and configured).
This will send your whole codebase to Cloud Foundry, which then builds a container for your application and runs it. 
Cloud Foundry does not use Docker images, only containers.
The thing with Cloud Foundry is that it uses containers behind-the-scenes, but as a CF user, you don’t really notice it.</p>

<h3 id="kubernetes">Kubernetes</h3>
<p>With Kubernetes, it’s a whole different story. You can’t just ‘run’ your application on Kubernetes. You will need a Docker image to run your application, which means
your application must have a Dockerfile inside it. 
This Docker image must be pushed to a Docker registry, which is then pulled from the registry by Kubernetes and ran with the specified configuration.</p>

<h3 id="conclusion">Conclusion</h3>
<p>In Kubernetes, you can configure way more which is a huge benefit.
On the other hand you also need to know more about the platform to do so.
Whereas with Cloud Foundry it is just one command and your codebase is pushed, wrapped into a container and ran on the platform.
Way more simple but with less configuration options.
Thus you can configure less than when using Kubernetes.</p>

<p>Kubernetes also requires more dependencies if you want to get more out of it (ex. Helm, Prometheus, Istio, …).
This requires additional maintenance of those dependencies.</p>

<p>The ideal platform is: the simplicity of Cloud Foundry with the functional features of Kubernetes.</p>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/-WZmhofnfII" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="migrating-a-modern-spring-web-application-to-serverless-by-jeroen-sterken-and-wim-creuwels">Migrating a modern spring web application to serverless by <a href="https://twitter.com/jeroensterken" target="_blank" rel="noopener noreferrer">Jeroen Sterken</a> and <a href="https://twitter.com/wimcreuwels" target="_blank" rel="noopener noreferrer">Wim Creuwels</a></h2>

<p><span class="image left"><img class="p-image" alt="Jeroen Sterken" src="/img/2019-05-16-Spring-IO-2019/jeroen-sterken.jpg" /></span>
<span class="image left">
<img class="p-image" alt="Wim Creuwels" src="/img/2019-05-16-Spring-IO-2019/wim-creuwels.jpg" /></span></p>

<p>Is serverless the holy grail? 
These guys explored the possibilities while migrating an existing monolith to serverless at one of their clients.</p>

<p>Serverless will help your developers focus on the code instead of server management and database setup.
Wim and Jeroen also mention the flip side of the coin.
It’s a new technology and as is the case with every new technology, there is a learning curve.
Developers have to get used to the services that the cloud provider supports.
They need to “think serverless” and model applications as functions in well-defined steps.
Infrastructure has to be modelled using Infrastructure as Code.
A topic on which you can find a great resource on our blog <a href="https://ordina-jworks.github.io/cloud/2019/01/14/Infrastructure-as-code-with-terraform-and-aws-serverless.html" target="_blank">here</a>.</p>

<p>No, serverless is not the holy grail. It is however a great solution for some typical use cases:</p>
<ul>
  <li>Event-driven architectures</li>
  <li>Internet of things</li>
  <li>Applications with varying load</li>
  <li>Data analysis</li>
  <li>…</li>
</ul>

<h4 id="step-functions">Step functions</h4>
<p><span class="image right"><img class="p-image" alt="Step Function Diagram" src="/img/2019-05-16-Spring-IO-2019/step-function-diagram.png" /></span></p>

<p>Jeroen and Wim glued their app together using AWS Step Functions.
Step Functions is a serverless orchestration service that lets you model your workflow as a series of steps.
Step Functions will keep your Lambda functions free of logic that triggers other Lamba functions.
Instead it will use the output of one Lambda function to trigger the next one, thus progressing towards the next step.<br />
These steps are made visible by a clear step diagram that shows your workflow.
This diagram allows you to monitor your flow by changing color when something goes wrong.
In case of an error Step Functions will automatically retry.</p>

<h4 id="spring-cloud-functions">Spring Cloud Functions</h4>
<p>We are at SpringIO and we’re talking about Serverless Cloud technology so Spring Cloud Functions cannot be left unmentioned.
Spring Cloud Function is a project by the Spring team that allows you to write cloud platform independent code.
In the process you can keep using familiar Spring constructs like beans, autowiring and dependency injection.
You can find great guides on <a href="https://www.baeldung.com/spring-cloud-function" target="_blank">baeldung.com</a> and <a href="https://spring.io/projects/spring-cloud-function" target="_blank">spring.io</a>.
Using Spring Cloud Functions will lower the stepping stone towards Serverless because most Java developers are already familiar with the Spring Framework.</p>

<p>Serverless was already a hot topic.
The fact that Spring now has also jumped on the wagon only makes it hotter.
Definitely keep your eyes open for Serverless in the near future.</p>

<p>You can rewatch their talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/594bKxp0wZI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h1 id="day-2-talks--workshops">Day 2: Talks &amp; Workshops</h1>
<h2 id="testing-spring-boot-applications-by-andy-wilkinson">Testing Spring Boot Applications by <a href="https://twitter.com/ankinson" target="_blank" rel="noopener noreferrer">Andy Wilkinson</a></h2>
<p><span class="image left"><img class="p-image" alt="Andy Wilkinson" src="/img/2019-05-16-Spring-IO-2019/andy-wilkinson.jpg" /></span></p>

<p>Andy Wilkinson of Pivotal explained us the importance and essence of writing tests in your application to ensure the quality of your services.
Of course, having a zero risk functionality is practically impossible but testing helps you to reduce your risk to a minimum.</p>

<p>But how do you know if a test is ‘good’? 
Almost everyone is basing this on the amount of code coverage in their project.
This does not determine the quality of your tests.
When you write tests, you want to think about mistakes that you make or that can be made by the end user.</p>

<h3 id="unit-testing">Unit testing</h3>
<p>When you rewrite your application logic, there’s a high chance that you have to rewrite your unit tests as well. 
So make sure that you do not have to spend a lot of time on rewriting your tests when you want to refactor your application or write extra features.</p>

<p>It’s also very important to use descriptive names for your tests. 
Make sure that your tests are readable by the human eye.
No one wants to read a test that is not clear or creates more confusion (JUnit 5 comes with a display annotation to make a test name more readable).</p>

<p>When you are familiar with writing unit tests, you’ve probably also heard of mocking. 
Unit testing is all round mocking external services and dependencies. 
After all, in a unit tests we are under the assumption that all our external dependencies are working as they should.</p>

<h3 id="integration-testing">Integration Testing</h3>
<p>Andy gave us a detailed explanation of how the various testing annotations work such as <code class="language-plaintext highlighter-rouge">@SpringBootTest</code>, which gives us a more Spring Boot way of testing our application (which means less configuration, hooray!). 
<code class="language-plaintext highlighter-rouge">@SpyBean</code> and <code class="language-plaintext highlighter-rouge">@MockBean</code> to create a mock or spy object of a Spring Component, <code class="language-plaintext highlighter-rouge">@ActiveProfiles</code> to run your test class with a specific profile, etc.</p>

<h4 id="testing-against-databases">Testing Against Databases</h4>
<p>One of the more appearing problems in integration testing is working with a database. 
Typically, when you want to test against data in a database you are going to want to use an in-memory database.
Often this is a HSQLDB or H2 database.
This is where it gets interesting. 
You can tell your H2 instance to run in a specific database software mode, such as PostgreSQL.
However, it’s not exactly the same as working with a real PostgreSQL server.
H2 only interprets the queries that are ran in a PostgreSQL dialect and tries to convert to its own syntax. 
This can cause lots of problems, because you are not working with a real Postgres server.
Even though H2 is ran with PostgreSQL compatibility mode, it can still fail with queries that will run perfectly on a real PostgreSQL server.</p>

<p>Andy recommended us to use <a href="https://www.testcontainers.org" target="_blank" rel="noopener noreferrer">TestContainers</a>.
These have the power to spin up a Docker image of a database of your choice.
So you’ll have the full functionality of a database server.</p>

<h3 id="whats-next">What’s next?</h3>
<p>We are really excited to see what the new Spring Boot versions will have in store to help us write better and clearer tests.
Spring Boot 2.2 will come with full JUnit 5 functionality and thus, will leave JUnit 4 behind.</p>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/5sjFn9BsAds" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="how-to-live-in-a-post-spring-cloud-netflix-world-by-olga-maciaszek-and-marcin-grzejszczak">How to live in a post-Spring-Cloud-Netflix world by <a href="https://twitter.com/olga_maciaszek" target="_blank" rel="noopener noreferrer">Olga Maciaszek</a> and <a href="https://twitter.com/mgrzejszczak" target="_blank" rel="noopener noreferrer">Marcin Grzejszczak</a></h2>

<p><span class="image left"><img class="p-image" alt="Olga Maciaszek" src="/img/2019-05-16-Spring-IO-2019/olga-maciaszek.jpg" /></span></p>

<p><span class="image left"><img class="p-image" alt="Andy Wilkinson" src="/img/2019-05-16-Spring-IO-2019/marcin-grzejszczak.jpg" /></span></p>

<p>Discovering the new Spring Cloud stack.
That’s what this talk was all about.
Olga Maciaszek and Marcin Grzejszczak showed us the new solutions for Gateway proxying, circuit breaking and the whole new Spring Cloud stack.</p>

<h3 id="the-world-is-changing">The world is changing</h3>

<h4 id="spring-cloud-load-balancer">Spring Cloud Load Balancer</h4>
<p>Client side load balancing via the <code class="language-plaintext highlighter-rouge">@LoadBalancerClient</code> annotation.
Use the <code class="language-plaintext highlighter-rouge">@LoadBalanced</code> annotation as a marker annotation to indicate that a <code class="language-plaintext highlighter-rouge">RibbonLoadBalancingClient</code> should be used to interact with a service.</p>

<h4 id="spring-cloud-gateway">Spring Cloud Gateway</h4>
<p>Via routes your requests are processed to downstream services.
Spring Cloud Gateway is used as a simple way to achieve this routing to your APIs.
You can keep configuring this as code:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="n">builder</span><span class="o">.</span><span class="na">routes</span><span class="o">()</span>
        <span class="o">.</span><span class="na">route</span><span class="o">(</span><span class="s">"users_service_route"</span><span class="o">,</span>
                <span class="n">route</span> <span class="o">-&gt;</span> <span class="n">route</span><span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">"/user-service/**"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">and</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="nc">HttpMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">filters</span><span class="o">(</span><span class="n">filter</span> <span class="o">-&gt;</span> <span class="n">filter</span><span class="o">.</span><span class="na">stripPrefix</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span>
                        <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">"lb://user-service"</span><span class="o">)).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p>or in your properties file:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">spring</span><span class="p">:</span>
  <span class="py">application</span><span class="p">:</span>
    <span class="py">name</span><span class="p">:</span> <span class="s">proxy</span>
  <span class="py">cloud</span><span class="p">:</span>
    <span class="py">gateway</span><span class="p">:</span>
      <span class="py">routes</span><span class="p">:</span>
      <span class="err">-</span> <span class="py">id</span><span class="p">:</span> <span class="s">fraud</span>
        <span class="py">uri</span><span class="p">:</span> <span class="s">lb://fraud-verifier</span>
        <span class="py">predicates</span><span class="p">:</span>
        <span class="err">-</span> <span class="py">Path</span><span class="p">=</span><span class="s">/fraud-verifier/**</span>
        <span class="py">filters</span><span class="p">:</span>
        <span class="err">-</span> <span class="py">StripPrefix</span><span class="p">=</span><span class="s">1</span>
        <span class="err">-</span> <span class="py">name</span><span class="p">:</span> <span class="s">Retry</span>
          <span class="py">args</span><span class="p">:</span>
            <span class="py">retries</span><span class="p">:</span> <span class="s">3</span>
</code></pre></div></div>

<h4 id="circuit-breaking-and-resilience4j">Circuit Breaking and Resilience4J</h4>
<p>You need a design that is resilient and fault tolerant.</p>

<p>After a number of failed attempts, we can consider a service unavailable.
We will then back off and stop flooding it with requests.
We can save system resources for calls which are likely to fail.
And give the other service some time to get back on their feet.</p>

<h4 id="micrometer-and-prometheus">Micrometer and Prometheus</h4>
<p>Periodically scraping metrics from your services to monitor health.</p>

<h4 id="spring-cloud-config-server">Spring Cloud Config Server</h4>
<p>Externalize your configuration.
You don’t have to restart your application to reload your configuration.
Just fetch it from the remote service again.</p>

<h3 id="resources">Resources</h3>
<p>Check out a fully working Spring Cloud microservices demo here:
<a href="https://github.com/OlgaMaciaszek/spring-cloud-netflix-demo" target="_blank" rel="noopener noreferrer">https://github.com/OlgaMaciaszek/spring-cloud-netflix-demo</a>.
A lot of gratitude to Olga and Marcin for providing a working example that we can play around with to get acquainted with the new services.</p>

<p>You can rewatch their talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/CcL8wrguhhM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="event-driven-microservices-with-axon-and-spring-boot-excitingly-boring-by-allard-buijze">Event-Driven Microservices with Axon and Spring Boot: excitingly boring by <a href="https://twitter.com/allardbz" target="_blank" rel="noopener noreferrer">Allard Buijze</a></h2>

<p><span class="image left"><img class="p-image" alt="Allard Buijze" src="/img/2019-05-16-Spring-IO-2019/allard-buijze.jpg" /></span></p>

<p>In this presentation, Allard Buijze, Founder and CTO of AxonIQ talks about the advantages of event-driven architectures and shows how easy it is to set up your own event-driven microservices using Axon and Spring Boot.</p>

<h3 id="what-is-axon">What is Axon?</h3>

<p>The <a href="https://axoniq.io/" target="_blank" rel="noopener noreferrer">Axon framework</a> is used for building event-driven microservices using Domain-Driven Design, CQRS and Event Sourcing.
It is there to prevent developers from getting lost inside a complex microservice architecture.</p>

<h5 id="cqrs">CQRS</h5>
<p>Command and Query Responsibility Segregation is a design pattern where you split the reading and writing of data into seperate models.
You use queries for reading the data and commands for updating the data.
While for basic CRUD operations having these models combined might be fine but once the amount of business logic and the amount of queries increases it might become increasingly difficult to manage.</p>

<h3 id="state-storage-vs-event-sourcing">State Storage vs Event Sourcing</h3>
<p>A big part of this presentation is about the advantages of using event sourcing rather than state storage.
Events describe the history of an object rather than just the current state of the object.
It is easy to go through the history and generate the current state while also getting a lot of extra information about the object you would otherwise miss out on when just storing its current state. 
Explicit record that something happened, rather than an implicit record of what happened based on changes that occured.
This also makes testing your application easier because you do not have to rely on state but rather on a series of events to take place or an exception to occur.</p>

<p><img class="image fit" alt="event-sourcing" src="/img/2019-05-16-Spring-IO-2019/event-sourcing.png" style="margin:0px auto; max-width: 800px;" /></p>

<h3 id="events">Events</h3>
<p>One of the biggest advantages of events is that they remain valuable over time.
They need to be the source of everything in the application and show a true representation of your entities.
Once again, you don’t save the state of an aggregate, you can generate the state by replaying the history.</p>

<h3 id="the-power-of-not-now">The power of not now</h3>
<p>The power of not now basically means that because you save all the events,
you can generate reports whenever you want based on the captured data.
You don’t have to know in advance what data is important to store for later on, everything is stored.</p>

<h3 id="axon-server">Axon Server</h3>
<p><a href="https://docs.axoniq.io/reference-guide/axon-server" target="_blank" rel="noopener noreferrer">Axon Server</a> is a service that distributes your components, manages routing, stores events and provides high availability and observability.
By combining all these otherwise different services into one single easy to configure service,
you make your entire architecture a lot easier to manage than if you were to use for example the Netflix Eureka Discovery Service for communication between microservices,
the MySQL Event Store for storing events and RabbitMQ to handle messaging.
By simply adding the Axon Server dependency and adding some annotations you can use all of these services while keeping the complexity low.</p>

<h3 id="tracing">Tracing</h3>
<p>Axon can also manage tracing for you by just adding the Axon tracing and Jaeger to your dependencies.
Where otherwise setting up tracing would be a lot of work having to deal with all kinds of headers,
passing headers along and interpreting them,
Axon tracing takes care of all of this for you.</p>

<p>You can rewatch his talk here:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/iVaD3mdwvx4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="how-to-secure-your-spring-apps-with-keycloak-by-thomas-darimont">How to secure your Spring apps with Keycloak by <a href="https://twitter.com/thomasdarimont" target="_blank" rel="noopener noreferrer">Thomas Darimont</a></h2>

<p><span class="image left"><img class="p-image" alt="Thomas Darimont" src="/img/2019-05-16-Spring-IO-2019/thomas-darimont.jpg" /></span></p>

<p>In this presentation Thomas Darimont talks about what Keycloak is,
what you can do with it and gives a demo of how it works and how you can set it up for your own applications.</p>

<h3 id="what-is-keycloak">What is Keycloak?</h3>
<p>Keycloak is a Java based authentication and authorization server. 
It is developed by Red Hat who use it as a base for their enterprise RH-SSO application on which they provide additional support and documentation.
It is also backed by a large open source community providing additional features, documentation and bugfixes.</p>

<h3 id="keycloak-features">Keycloak Features</h3>

<p>One of the most important features of Keycloak is the Single Sign-On and with this the Single logout.
Sign into keycloak once to gain access to multiple applications and sign out once to sign out of all applications.
Do note though that individual applications can disable this single logout so you might not get logged out of all the applications within a realm.
Another great feature of Keycloak is their multi-factor authentication using one of the known authentication apps like the Google Authenticator.
Keycloak also supports authentication through social media platforms such as Facebook, Twitter, Google or even Github. 
Then of course there is the fact that Keycloak is completely customizable and extensible.
It comes with a preferred stack on which we will dive into more detail later on.
You can get away from this and use your own preferred services albeit with some additional configuration.
Keycloak also comes with an easy to use management console for administrators and a user management interface where all users can update their user details.
The last feature to discuss are the realms. 
Sets of applications, users and registered OAuth clients to whom the Keycloak settings will be applied. 
With these realms you can give users specific roles or just authenticate them across multiple applications using the Single Sign-on feature.</p>

<h3 id="the-keycloak-preferred-stack">The keycloak preferred stack</h3>

<p>By default Keycloak is a WildFly based server with a plain JAX-RS application.
It uses JPA for storing data and Infinispan for the horizontal scaling
of multiple Keycloak nodes that all distribute information like user sessions between eachother.
Other than that it uses the Freemarker template engine to render for example the login pages
and Jackson 2.x for everything JSON related like the tokens.</p>

<h3 id="securing-your-application">Securing your application</h3>

<p>To add Keycloak to your applications you have to add a dependency and you will have to register your application within a Keycloak realm.
After doing some configuration within your application and the Keycloak management console,
you will have to authenticate through Keycloak to regain access to your application.</p>

<h3 id="the-authentication-process">The authentication process</h3>

<p>The following steps describe the Keycloak authentication process:</p>
<ul>
  <li>Unauthenticated user accesses application</li>
  <li>The application redirects to Keycloak for login</li>
  <li>When the login is successful, Keycloak will create an SSO session and will emit cookies</li>
  <li>Keycloak generates a random code and redirects the user back to application</li>
  <li>The application receives the code associated with the sign-on session and sends the code back to Keycloak via a separate channel</li>
  <li>If the code sent back is associated with the sign-on session, Keycloak will reply with an access token, a refresh token and an id token</li>
  <li>The application verifies the tokens and associate them with a session</li>
  <li>The user is now logged in to the application</li>
</ul>

<p>For more information you can refer to Keycloak’s <a href="https://www.keycloak.org/documentation.html" target="_blank" rel="noopener noreferrer">official documentation</a> and you can also watch the original talk itself in the following video:</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/KrOd5wIkqls" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="zero-downtime-migrations-with-spring-boot-by-alex-soto">Zero Downtime Migrations with Spring Boot by <a href="https://twitter.com/alexsotob" target="_blank" rel="noopener noreferrer">Alex Soto</a></h2>

<p><span class="image left"><img class="p-image" alt="Alex Soto" src="/img/2019-05-16-Spring-IO-2019/alex-soto.jpg" /></span></p>

<p>In this talk, Alex Soto, Software Engineer at Red Hat covers the subject of zero downtime migrations of microservices in Spring Boot.
He covers some of the different deployment techniques.
Some easy to understand ones and some more advanced techniques for when you are dealing with the persistent states of your applications.</p>

<h3 id="dealing-with-downtime-when-using-microservices">Dealing with downtime when using microservices</h3>

<p>While it is easier and faster to take down a single service rather than a single monolith application,
deployment or redeployment of services will happen a lot more often when using a microservices architecture. 
Another thing to consider is that when you have downtime on a service,
all the services that have a dependency on the offline service will no longer work either.
For this reason it is important to minimise downtime of your applications or even have no downtime at all. 
This is why you need to deploy and release services at different times.
Here are some techniques on how to do this.</p>

<h3 id="bluegreen-deployment">Blue/Green deployment</h3>

<p>Blue/Green deployment is where you will deploy an updated version of the service you want to replace
and release it by changing the routing from the old one to the new one.
It is important to keep the old service deployed and monitor the new one so that in case of errors
you can easily revert the routing back to keep everything up and running.
The downside of blue/green deployment is that if something goes wrong,
all users are affected if changes happen before reverting the routing.
But of course there is a solution to this problem, Canary releases.</p>

<h3 id="canary-releases">Canary releases</h3>

<p>Canary releases is where you route a small percentage of your traffic through an updated service while the rest keeps using the original service.
This limits the amount of users that might be affected by unwanted changes while you monitor your new application.
As everything goes well you increase the percentage of users until eventually your entire userbase uses the new service.
All while still having the advantage of Blue/Green deployment to fall back on when things go wrong.</p>

<h3 id="mirroring-traffic">Mirroring traffic</h3>

<p>Mirroring traffic is another deployment technique where you deploy an updated version of a service next to the original one and send your requests to both services.
Only the original service handles requests while the requests to the updated service are just fire and forget requests while you monitor if everything goes according to plan.
Before eventually changing the routing to the updated version of the service.</p>

<h3 id="but-what-about-sticky-sessions">But what about sticky sessions</h3>

<p>When dealing with sticky sessions, which you often see with for example shopping carts on webshops,
your session is linked to a specific service by IP.
This means that when you get rerouted to an updated service, you will lose your session.
To counter this problem you can use an in-memory datagrid using for example Redis
and duplicate this across all the services that use these sticky sessions in your cluster.
When you do this, your shopping cart will stay, even when the service you are accessing changes.</p>

<h3 id="dealing-with-persistent-data">Dealing with persistent data</h3>

<p>While problems with in-memory data are often fixed quite easily,
when dealing with persistent data, zero downtime deployment becomes a little bit more tricky.
Take for example the change of a column name in a database.
If you were to use different services accessing the same database but using different column names, this would cause issues. 
This exact problem and how to tackle it is shown in the demo.
Together with a more in-depth explanation of the covered topics in a video of the talk below.</p>

<div class="responsive-video">
    <iframe width="1164" height="655" src="https://www.youtube.com/embed/oziyniXdUe8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<h2 id="the-end">The end</h2>
<p>Spring is trendy as ever.
Solid fundamentals and ready for the future of software development.
It was great to further extend our Spring expertise.
And let’s not forget the amazing time we had amongst colleagues.
We’ll be back next year for more!
Will you be there too?!</p>

        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/conference/2019/07/10/Spring-IO-2019.html&title=Spring IO 2019&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=Spring IO 2019&url=https://ordina-jworks.github.io/conference/2019/07/10/Spring-IO-2019.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/conference/2019/07/10/Spring-IO-2019.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/nick-van-hoof" class="image spotlight-image" title="">
            <img src="/img/author/nick-van-hoof.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Nick is passionate about cloud technology. He has major expertise in AWS and AWS serverless but he appreciates other clouds just as well. He wants to be ahead of change and thus he’s also working with IoT and AI.</p>
</p>
            
        </div>
    </div>
    
    <div class="inner">
        <a href="/author/tom-van-den-bulck" class="image spotlight-image" title="">
            <img src="/img/author/tom-van-den-bulck.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Tom is a Senior Developer at Ordina Belgium, passionate about all software related to data. As competence leader Big &amp; Fast Data he guides his fellow developers through dark data swamps by giving workshops and presentations. Tom is passionate about learning new technologies and frameworks.</p>
</p>
            
        </div>
    </div>
    
    <div class="inner">
        <a href="/author/yolan-vloeberghs/" class="image spotlight-image" title="">
            <img src="/img/author/yolan-vloeberghs.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Yolan Vloeberghs is a Java and Cloud engineer with a sharpened focus on all things related to cloud, specifically AWS. He loves to play around with various technologies and frameworks and is very passionated and eager to learn about everything related to cloud-native development.</p>
</p>
            
        </div>
    </div>
    
    <div class="inner">
        <a href="/author/jago_staes/" class="image spotlight-image" title="">
            <img src="/img/author/jago-staes.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Jago Staes is a Java Consultant with a strong interest for Spring Boot projects, enjoys learning about new technologies and wants to learn more about frontend technologies and microservices.</p>
</p>
            
        </div>
    </div>
    
    <div class="inner">
        <a href="/author/gina-de-beukelaer" class="image spotlight-image" title="">
            <img src="/img/author/gina-de-beukelaer.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Gina is a Java consultant at Ordina Belgium. Her main focus is to build quality applications, staying informed with new technologies helps her in doing this.</p>
</p>
            
        </div>
    </div>
    
    <div class="inner">
        <a href="/author/tim-schmitte/" class="image spotlight-image" title="">
            <img src="/img/author/tim-schmitte.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Tim is a Java Developer at Ordina Belgium. His main focus is on back-end development. He is passionate about Microservices, Domain driven design and refactoring.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2023 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/2019-05-16-Spring-IO-2019/spring-io.png";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
