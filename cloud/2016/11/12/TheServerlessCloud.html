<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="The Serverless Cloud - Bart Blommaerts">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/serverless.jpg"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/cloud/2016/11/12/TheServerlessCloud.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="The Serverless Cloud - Bart Blommaerts"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/serverless.jpg"/>

    
    <title>The Serverless Cloud - Bart Blommaerts &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/launch-your-career">Career</a></li>
                <li class="menu-item"><a href="/tech-radar">Tech Radar</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>The Serverless Cloud</h2>
                

                
                    Posted Nov 12, 2016


    in <a href="/categories/cloud/">Cloud</a>



    by
    
        <a href="/author/bart-blommaerts/">Bart Blommaerts</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/cloud/">Cloud</a>, 
    
        <a href="/tags/serverless/">Serverless</a>, 
    
        <a href="/tags/aws/">AWS</a>, 
    
        <a href="/tags/lambda/">Lambda</a>, 
    
        <a href="/tags/azure/">Azure</a>, 
    
        <a href="/tags/google-cloud-platform/">Google Cloud Platform</a>, 
    
        <a href="/tags/ibm-bluemix/">IBM Bluemix</a>, 
    
        <a href="/tags/openwhisk/">OpenWhisk</a>, 
    
        <a href="/tags/webtask/">Webtask</a>, 
    
        <a href="/tags/collaborative-economy/">Collaborative Economy</a>
    

                

                

            </div>
        </header>
    </section>

    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <blockquote>
  <p>In recent years, the uprise of the cloud has brought us a lot of new and disruptive technologies. 
Everybody is talking about SaaS, PaaS, IaaS and other sorts of aaS. 
In 2014, Amazon launched AWS Lambda as the pinnacle of the cloud computing. 
It allows developers to focus on code, without spending time on managing servers.</p>
</blockquote>

<h1 id="part-1">Part 1</h1>

<h2 id="what">What?</h2>

<p>While Microservices have been reigning the Cloud landscape for a couple of years, today the Serverless movement is one of the hottest trends in the industry. 
Historically, software developers have been pretty bad at naming things and Serverless is no exception. 
Disregarding what the name suggests, Serverless does not imply the complete absence of servers. 
It implies that developers who are using the Serverless architectural style, are not responsible for managing or provisioning the servers themselves, but use a vendor-supplied Cloud solution. 
Serverless means less worrying about servers. 
Although in the future, it might be possible to install this kind of service on-premise, for example with the open-source <a href="https://github.com/openwhisk/openwhisk">IBM OpenWhisk</a> implementation.</p>

<p>In regard to this, the definition <a href="https://twitter.com/marak/status/736357543598002176">FaaS</a>: Functions as a Service makes a lot more sense. 
Functions are short-lived pieces of runtime functionality that don’t need a server that’s always running. 
Strictly speaking a function can have a longer execution time, but most FaaS providers will currently limit the allowed computation time. 
When an application calls a function (eg. a calculation algorithm), this function gets instantiated on request. 
When it’s finished, it gets destroyed. 
This leads to a shorter “running” time and thus a significant financial advantage. 
As an example, you can find the AWS Lambda pricing <a href="https://aws.amazon.com/lambda/pricing/">here</a>. 
FaaS functions are also a great match for event-driven behaviour: when an event is dispatched, the function can be started instantly and ran only for the needed time. 
A Serverless application is a composition of event chaining. 
This makes the Serverless style a natural match for <a href="http://www.slideshare.net/BartBlommaerts/the-collaborative-economy-61528579">API Economy</a>.</p>

<p>As a result of being runtime components, FaaS functions are stateless and need to rely on a database (or file system) to store state. 
Being stateless and short-lived naturally lead to extreme horizontal scaling opportunities and all major FaaS providers support these.</p>

<h2 id="noops">NoOps</h2>

<p><a href="http://searchcloudapplications.techtarget.com/definition/noops">NoOps</a> (No Operations) is the concept that an IT environment can become so automated and abstracted from the underlying infrastructure that there is no need for a dedicated team to manage software in-house. 
NoOps isn’t a new concept as this <a href="http://blogs.forrester.com/mike_gualtieri/11-02-07-i_dont_want_devops_i_want_noops">article</a> from 2011 proves. 
When Serverless started gaining popularity, some people claimed there was no longer a need for Operations. 
Since we already established that Serverless doesn’t mean no servers, it’s obvious it also doesn’t mean No Operations.
It might mean that Operations gets outsourced to a team with specialised skills, but we are still going to need: monitoring, security, remote debugging, … 
I am curious to see the impact on current DevOps teams though. 
A very interesting article on the NoOps topic, can be found over <a href="https://charity.wtf/2016/05/31/operational-best-practices-serverless/">here</a>.</p>

<h2 id="aws">AWS</h2>

<h3 id="aws-lambda">AWS Lambda</h3>

<p><a href="http://aws.amazon.com/documentation/lambda/">AWS Lambda</a> was the first major platform to support FaaS functions, running on the AWS infrastructure. 
Currently AWS Lambda supports three languages: Node.js, Java, and Python. 
AWS Lambda can be used both for synchronous and asynchronous services.</p>

<p>Currently the tooling for AWS Lambda is still relatively immature, but this is changing rapidly. 
At the time of writing, the AWS Lambda console offers the possibility to create a Lambda using blueprints. 
This is already easier than setting up a lambda by hand (using a ZIP-file). 
Blueprints are sample configurations of event sources and Lambda functions. 
Currently 45 blueprints are available. 
To give a short introduction, we’ll select the <strong>hello-world</strong> blueprint. 
This blueprint generates a very simple NodeJS function:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'use strict';
console.log('Loading function');
  
exports.handler = (event, context, callback) =&gt; {
   console.log('value1 =', event.key1);
   console.log('value2 =', event.key2);
   console.log('value3 =', event.key3);
   callback(null, event.key1); 
};
</code></pre></div></div>

<p>After creating this function, it can be immediately be tested from the console, using a test event. 
If we want to call this function synchronously, we need to create an API endpoint with the <a href="https://aws.amazon.com/api-gateway/">AWS API Gateway</a>. 
The API Gateway creates API’s that acts as a “front door” to your functions. 
To make this work with the events in our hello-world example, we need to select the resources of our API:</p>

<p><img class="image fit" src="/img/serverless/1.png" alt="Serverless" /></p>

<p>In Integration Request, we add a body mapping template of type <em>application/json</em> with the following template:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ "key3": "$input.params('key3')","key2": "$input.params('key2')","key1": "$input.params('key1')"}
</code></pre></div></div>

<p>In ‘Method request’ we add 3 URL String query parameters: key1, key2 and key3. 
If we then redeploy our API, hitting the Test button gives us an input form to add the 3 query parameters and the function is executed successfully:</p>

<p><img class="image left" src="/img/serverless/2.png" alt="Serverless" /></p>

<p>If you want to test this directly from a browser, you will need to change the Auth to NONE in the ‘Method request’ and do a new deploy of the API. 
The URL itself can be found in the ‘stage’-menu.</p>

<p>This example obviously is not very interesting, so let’s try another blueprint: <em>microservice-http-endpoint</em>. 
This will generate a CRUD backend, using <a href="http://aws.amazon.com/dynamodb">DynamoDB</a> with a RESTful API endpoint. 
The code generated, covers all common use-cases:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'use strict';
letdoc = require('dynamodb-doc');
letdynamo = newdoc.DynamoDB();
exports.handler = (event, context, callback) =&gt; {
   const operation = event.operation;
   if(event.tableName) {
      event.payload.TableName = event.tableName;
   }
   switch(operation) {
   case'create':
      dynamo.putItem(event.payload, callback);
      break;
   case'read':
      dynamo.getItem(event.payload, callback);
      break;
   case'update':
      dynamo.updateItem(event.payload, callback);
      break;
   case'delete':
      dynamo.deleteItem(event.payload, callback);
      break;
   case'list':
      dynamo.scan(event.payload, callback);
      break;
   case'echo':
      callback(null, event.payload);
      break;
   case'ping':
      callback(null, 'pong');
      break;
   default:
      callback(newError(`Unrecognized operation "${operation}"`));
   }
};
</code></pre></div></div>

<p>Obviously you will need a DynamoDB instance with some data in it:</p>

<p><img class="image fit" src="/img/serverless/3.png" alt="Serverless" /></p>

<p>You can reference your new table, from your lambda, using the following event:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"tableName": "garage-car-dev",
"operation": "list",
"payload": { }
} 
</code></pre></div></div>

<p>The only difficult part remaining, is finding out the required <a href="http://docs.aws.amazon.com/lambda/latest/dg/with-on-demand-https-example.html">payload</a> for the different operations :) 
This is a good start for creating new records:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"operation": "create",
"tableName": "garage-car-dev",
"payload": {
   "Item": {
      "id": "1980b61a-f5d7-46e8-b62a-0bbb91e20706",
      "body": "Lamborghini",
      "updatedAt": "1467559284484"
      }
   }
}
</code></pre></div></div>

<p>The blueprint also generates an API in the API Gateway that we can invoke with the above events as body mapping template in integration request of the method execution, just like the first example.</p>

<h3 id="serverless-framework">Serverless Framework</h3>

<p>While the above approach works as expected, it’s quite cumbersome to get your first function working. 
Especially since we didn’t write any actual code in the previous examples. 
Luckily the <a href="http://serverless.com/">Serverless Framework</a> (formerly JAWS) is here to make our lives easier. 
Currently the Serverless Framework only supports AWS Lambda, but support for other IaaS providers is coming. 
A pull-request for <a href="https://azure.microsoft.com/en-us/services/functions/">Microsoft Azure</a> <a href="https://github.com/serverless/serverless/pull/1426">already exists</a> and other providers are also working on an implementation. 
Vendor-neutral FaaS would be a true game-changer!</p>

<p>One problem with FaaS, is the (deliberate) mismatch between runtime unit and deploy unit. 
This is also true for other architectural patterns. 
It should be possible to deploy one specific function, but often functions will hang out in groups. 
I’d prefer to deploy a group of functions in one go, when it makes sense, eg. different CRUD operations on the same resource. 
This way, we benefit from the advantages of functions (scalability, cost, service independence, …) but also ease deployment. 
This is a key feature of the Serverless Framework.</p>

<p><img class="image left" src="/img/serverless/4.png" alt="Serverless" /></p>

<p>On June 29th, Serverless V1.0-alpha1 was announced. 
New Alphas and Betas will be released on a regular basis. 
Currently the documentation can only be found in their <a href="https://github.com/serverless/serverless/tree/v1.0/docs">v1.0 branch on GitHub</a>. Serverless V1.0 introduces the “Serverless Service” concept, which is a group of functions with their specific resource requirements. 
In essence Serverless V1.0 is a powerful and easy to use CLI to create, deploy and invoke functions. 
Serverless V1.0 uses <a href="https://aws.amazon.com/cloudformation/">AWS CloudFormation</a> to create AWS resources. 
It uses the default <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html">AWS profile</a> for access to your AWS account. 
Creating, deploying and invoking a “Hello World” NodeJS function with Serverless is as easy as:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>serverless create --name cars --provider aws 
serverless deploy 
serverless invoke --function hello --path data.json
</code></pre></div></div>

<p>This generates the following lambda:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'use strict'; 
module.exports.hello = (event, context, cb) =&gt; cb(null, 
   { message: 'Go Serverless v1.0! Your function executed successfully!', event } 
); 
</code></pre></div></div>

<p>The current version of the Serverless Framework (unfortunately) doesn’t use the region from the AWS config, so you might need to look for your function in a different region.</p>

<p>Adding an API Gateway endpoint, is also very easy and can be done by adding this http-event:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>events:
  - http:
       path: greet
       method: get
</code></pre></div></div>

<p>The actual URL can be found in the API Gateway in the stages section, as we saw before.</p>

<h1 id="part-2">Part 2</h1>

<p>In the first part of these article, I introduced the Serverless architectural style and focused on “market maker” <a href="https://aws.amazon.com/lambda/details/">AWS Lambda</a> and on the <a href="http://serverless.com/">Serverless Framework</a>. 
In this part, I want to focus on other Faas providers.</p>

<h2 id="auth0-webtask">Auth0 Webtask</h2>

<p>Compared to giants such as Amazon, Google, Microsoft and IBM, <a href="https://auth0.com/">Auth0</a> is a rather small player. 
However acknowledging their experience with BaaS (Backend as a Service), FaaS is a logical choice for them. 
Currently <a href="https://webtask.io/">Webtask</a> only supports NodeJS.</p>

<p>The recommended way of using webtask is through the <a href="https://webtask.io/cli">wt command line interface</a>. 
Auth0 has put the focus on easy of use. 
This is really visible by looking at their <a href="https://webtask.io/docs/101">30 second example</a>. 
The <strong>wt create</strong> command wil generate a function (a webtask) and will automatically return an HTTP endpoint, supporting URL query parameters. 
Every query parameter is available in your webtask in the form of context.data JavaScript object. 
With AWS Lambda you need to configure these in the AWS API Gateway, which is both tedious and time-consuming.</p>

<p>A very interesting feature of Webtask is the availability of <a href="https://webtask.io/docs/storage">built-in storage</a>.
Webtask code can store a single JSON document up to 500KB in size. 
This data can be stored with <strong>ctx.storage.set</strong> and retrieved with <strong>ctx.storage.get</strong>. 
While I don’t believe your function will often need this, it’s a very nice option.</p>

<p>This small example (using <a href="https://lodash.com/">Lodash</a>), shows a webtask using a query parameter and built-in storage.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = function (ctx, cb) {
    var name = ctx.query.name;
 
    if(name) {
        ctx.storage.get(function(err, data){
            if(err) cb(err);
 
            data = data || [];
 
            if(_.indexOf(data, name) === -1 ){
                data.push(name);
 
                ctx.storage.set(data, function(err){
                    if(err){
                        cb(err);
                    } else {
                        cb(null, data);
                    }
                })
            } else {
                cb(null, data);
            }
        })
    } else {
        cb(null, "422");
    }
}
</code></pre></div></div>

<p>Deploying this webtask, using the CLI:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Webtask created
 
You can access your webtask at the following url:
 
https://webtask.it.auth0.com/api/run/wt-&amp;lt;your username&amp;gt;-0/query_store?webtask_no_cache=1
</code></pre></div></div>

<p>Another way to access your webtask is as a CRON job, using the <strong>wt cron</strong> command or as a <a href="https://webtask.io/docs/sample_github">web hook</a>.</p>

<p>Contrary to AWS Lambda, you don’t need to bundle the NodeJS modules you want to use. 
The list of supported modules is available <a href="https://tehsis.github.io/webtaskio-canirequire/">here</a>. 
An option to bundle other modules is also <a href="https://github.com/auth0/webtask-bundle">available</a>. 
Another difference is the use of query parameters.</p>

<p>Not surprisingly, Webtask can be <a href="https://webtask.io/docs/auth">integrated with Auth0</a> for authentication and authorization.</p>

<h2 id="google-cloud-functions">Google Cloud Functions</h2>

<p><a href="https://cloud.google.com/functions/">Google Cloud Functions</a> (GCF) was released early 2016 and is currently in private alpha. 
Being in private alpha not only means that you specifically need to request access to use the GCF API, but also that you’re limited in sharing information. 
While this is obviously very unfortunate, it also means that Google is very serious about releasing a complete product. 
The activity in their (again private) Google Group proves this.</p>

<p>Like its competitors, Cloud Functions can be triggered asynchronously by events (from Cloud Pub/Sub and Cloud Storage) or invoked synchronously via HTTPS. 
Currently GCF only supports NodeJS. 
Tutorials on common use-cases are available in <a href="https://cloud.google.com/functions/docs/tutorials/">their documentation</a>. 
To build functions with GCF, you will first need to download and install the <a href="https://cloud.google.com/sdk/docs/">Google Cloud SDK</a>. 
With the SDK installed, you can create your initial function <em>(replace datastore_gcf with your own staging bucket name)</em>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gsutil mb gs://datastore_gcf
</code></pre></div></div>

<p>From the (very useful) <a href="https://github.com/jasonpolites/gcf-recipes">(unofficial) GCF recipes</a> by <a href="https://github.com/jasonpolites">Jason Polites</a> (Product Manager, GCP), we cloned the datastore example that will persist data to a <a href="https://cloud.google.com/datastore/docs/concepts/overview">Google Coud Datastore</a>.</p>

<p>From this repository, we deployed 2 functions ‘ds-get’ and ‘ds-set’ by executing:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gcloud alpha functions deploy ds-set --bucket datastore_gcf --trigger-http --entry-point set
</code></pre></div></div>

<p>The names of the deployed functions, need to be exported in the Node.js module. These functions can be called with:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gcloud alpha functions call ds-get --data '{"kind": "test", "key": "kid"}'
</code></pre></div></div>

<p>or via the <a href="https://console.cloud.google.com/functions">Cloud Functions Console</a>.</p>

<p>Your newly added data is also available in the <a href="https://console.cloud.google.com/datastore/entities/">Datastore Entities</a> after selecting a project on the top. 
After executing a couple of functions, you can also find some metrics of your function (number of calls, execution time, …)</p>

<p>Other arguments for the deploy command are listed in the <a href="https://cloud.google.com/functions/docs/deploying/">reference documentation</a>. 
These steps are also available in the <a href="https://console.cloud.google.com/home/">Cloud Platform Console</a>.</p>

<p>After deployment, your webtrigger URL will be displayed similar to Webtask.</p>

<p>Although much information on Google Cloud Functions is not (publicly) available yet, Google is well on its way to become a serious FaaS provider.</p>

<h2 id="azure-functions">Azure Functions</h2>

<p>Similar to Google Cloud Functions, <a href="https://azure.microsoft.com/en-us/services/functions/">Microsoft Azure Functions</a> is currently in preview stage, meaning it’s not (yet) meant to be used in a production environment. 
Azure Cloud Functions (ACF) support a variety of languages such as NodeJS, C#, Python, and PHP.</p>

<p>Today, it can be used for these common cases:</p>

<ul>
  <li>Events triggered by other Azure services</li>
  <li>Events triggered by SaaS services (not limited to Microsoft)</li>
  <li>Synchronous requests</li>
  <li>WebHooks</li>
  <li>Timer based processing (CRON)</li>
</ul>

<p>creating quite a large number of possibilities.</p>

<p>Azure Functions are grouped in App Services. 
This is quite different from AWS Lambda, where the functions are organised independently. 
Hardware resources are allocated to an App Service and not directly to an Azure Function. 
It’s important to select a dynamic App Service if you’re aiming for “pay-per-execution”.</p>

<p>When creating a new function, you can start from different templates. 
This can be compared to the blueprints from AWS Lambda. 
Currently 44 templates are available (but some are very similar). 
When selecting HttpTrigger for example, Azure Functions will generate a function that is able to use all query parameters passed to the function, similar to Webtask. 
<a href="https://azure.microsoft.com/en-us/documentation/articles/functions-create-first-azure-function/">This short video</a> demonstrates this use case.</p>

<p>In the example below, an Azure Cloud Function will store entities in a Storage Table when it receives an HTTP request:</p>

<p><strong>function.json</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "bindings": [
    {
      "type": "httpTrigger",
      "direction": "in",
      "name": "req",
      "methods": [
        "post"
      ],
      "authLevel": "function"
    },
    {
      "type": "http",
      "direction": "out",
      "name": "res"
    },
    {
      "type": "table",
      "name": "outTable",
      "tableName": "entities",
      "partitionKey": "functions",
      "rowKey": "%rand-guid%",
      "connection": "YOUR_STORAGE",
      "direction": "out"
    }
  ],
  "disabled": false
}
</code></pre></div></div>

<p><strong>index.js</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    var statusCode = 400;
    var responseBody = "Invalid request object";
 
    if (typeof req.body != 'undefined' &amp;amp;&amp;amp; typeof req.body == 'object') {
        statusCode = 201;
        context.bindings.outTable = req.body;
        responseBody = "Table Storage Created";
    }
 
    context.res = {
        status: statusCode,
        body: responseBody
    };
 
    context.done();
};
</code></pre></div></div>

<p>To retrieve the added entities:</p>

<p><strong>functions.json</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  "bindings": [
    {
      "type": "httpTrigger",
      "direction": "in",
      "name": "req",
      "methods": [
        "get"
      ],
      "authLevel": "function"
    },
    {
      "type": "http",
      "direction": "out",
      "name": "res"
    },
    {
      "type": "table",
      "name": "inTable",
      "tableName": "entities",
      "connection": "YOUR_STORAGE",
      "direction": "in"
    }
  ],
  "disabled": false
</code></pre></div></div>

<p><strong>index.js</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    context.log("Retrieved records:", intable);
    context.res = {
        status: 200,
        body: intable
    };
    context.done();
};
</code></pre></div></div>

<p><img class="image fit" src="/img/serverless/5.png" alt="Serverless" /></p>

<p>What immediately struck me was the quality of their documentation (videos, tours, quickstarts, templates, …) and the user experience from the <a href="https://azure.microsoft.com/en-us/features/azure-portal/">Azure Portal</a>. 
The portal can be a little slow sometimes, but the experience is miles ahead of what Amazon and Google are offering. 
Azure Functions is <a href="https://azure.microsoft.com/en-us/documentation/articles/functions-reference/">open source and available on GitHub</a>.</p>

<p>Azure Functions will soon be supported by the <a href="https://github.com/serverless/serverless/pull/1547">Serverless Framework</a>, which is a big step towards vendor-neutral FaaS.</p>

<h2 id="ibm-bluemix-openwhisk">IBM Bluemix OpenWhisk</h2>

<p><a href="https://developer.ibm.com/openwhisk/">Bluemix OpenWhisk</a> is also an <a href="https://github.com/openwhisk/openwhisk">open source</a> service and currently supports NodeJS and Swift. 
Contrary to other FaaS providers, IBM emphasises on container integration. 
When an event or an API call invokes an action, OpenWhisk creates a container to run the action in a runtime appropriate to the programming language used. 
You can even create Docker functions (called actions in OpenWhisk) allowing you to build in any language. 
OpenWhisk can also run locally on your own hardware, which no other provider currently offers. 
IBM is very open about this and even provides <a href="https://github.com/openwhisk/openwhisk/blob/master/README.md">guidelines</a> on how this can be achieved.</p>

<p>As expected, the documentation has a <a href="https://console.ng.bluemix.net/docs/openwhisk/index.html">getting started</a> guide to build and run a Hello World action. 
While working with the CLI works as advertised, it quickly becomes quite cumbersome, especially when integrating with other <a href="https://console.ng.bluemix.net/docs/openwhisk/openwhisk_catalog.html">Bluemix services</a>. 
After executing your first OpenWhisk function, you can see some metrics in the (pretty) <a href="https://new-console.ng.bluemix.net/openwhisk/dashboard">OpenWhisk dashboard</a>. 
The OpenWhisk dashboard will show all invoked actions, also from actions you didn’t implement yourself. 
For example when using <a href="https://console.ng.bluemix.net/docs/openwhisk/openwhisk_packages.html">existing packages</a>.</p>

<p><img class="image fit" src="/img/serverless/6.png" alt="Serverless" /></p>

<p>What’s even more impressive is the <a href="https://new-console.ng.bluemix.net/openwhisk/editor">Openwhisk Editor</a>. 
This editor only lists the actions you created yourself.</p>

<p><img class="image fit" src="/img/serverless/7.png" alt="Serverless" /></p>

<p>As you can see from the screenshot, you immediately get links to the REST Endpoint.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Currently it’s too soon to draw any conclusions. 
These services are constantly changing. 
What is obvious, is that all major cloud providers want to make sure that they don’t miss the FaaS opportunity. 
Cloud providers create value by integrating FaaS services with their other offerings. 
This confirms the value of a Serverless Cloud. 
The current FaaS solutions have a lot of similar characteristics and choosing one, will likely depend on what other services you already use (or want to use) from a certain provider. 
It’s important to know the environment your FaaS code lives in and the services available to it. 
In this phase available documentation also is crucial.</p>

<p>Obviously, this high-level introduction doesn’t list all the differences or similarities, but it offers a nice starting point to experience the FaaS (r)evolution first-hand.</p>

<h1 id="part-3">Part 3</h1>

<p>In the first part of this article, I introduced the Serverless architectural style. 
In the second part, I compared all major serverless providers. 
In this third and last part, I would like to look at serverless as an enabler of <a href="http://www.slideshare.net/BartBlommaerts/the-collaborative-economy-61528579">collaborative economy</a>.</p>

<h2 id="collaborative-economy">Collaborative Economy</h2>

<p>What is collaborative ecomomy?</p>

<blockquote>
  <p><a href="https://twitter.com/benitamatofska">Benita Matofska</a>: The Sharing Economy is a socio-economic ecosystem built around the sharing of human, physical and intellectual resources.
It includes the shared creation, production, distribution, trade and consumption of goods and services by different people and organisations.</p>
</blockquote>

<p>The last part of Benita’s quote: <em>shared creation, production .. of services by different people and organisations</em> makes a very nice use-case for the serverless style of building applications.</p>

<h3 id="your-data">Your data</h3>

<p>In this day and age, all companies have become IT companies, meaning a lot of data is gathered and stored somewhere. 
Often the usage of the available data changes over time. 
If data is not used for the benefit of the enterprise or its employees, does it still hold value? 
Wouldn’t it be great if we could turn cost into profit?</p>

<p>Thanks to its cost model (pay per execution), its focus on scalability (no risk of overprovisioning) and resilience, serverless enables companies to experiment with exposing their data:</p>

<ul>
  <li>Offering an API for others to consume</li>
  <li>Enriching existing API’s with their data</li>
  <li>…</li>
</ul>

<h3 id="your-ideas">Your ideas</h3>

<p>Serverless also makes a lot of sense for companies that don’t want to expose their data, but have great or new ideas on how to use others data:</p>

<ul>
  <li>Combining data from multiple providers</li>
  <li>Filtering and transforming data</li>
  <li>New business cases beyond the scope of the original API</li>
  <li>…</li>
</ul>

<h3 id="example">Example</h3>
<p>I implemented a small and simple application that will consume data from different serverless cloud providers. 
Every “hop” in the system will parse its input and add some new data.</p>

<h4 id="component-diagram">Component diagram</h4>

<p><img class="image fit" src="/img/serverless/8.png" alt="Serverless" /></p>

<h4 id="description">Description</h4>
<p>Any client can post a JSON to the first function, made with <a href="https://webtask.io/">Auth0 webtask</a>. 
The body of the post request is simple:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{"temp":"42"}
</code></pre></div></div>

<p>The WebTask will parse that input, add some input of its own and POST request to an <a href="http://www.ibm.com/cloud-computing/bluemix/openwhisk/">IBM OpenWhisk</a> action. 
The body of this POST request:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "hops": [
    {
      "provider": "Auth 0 Webtask",
      "start": "2016-08-24T20:32:03.629Z",
      "temperature": "42",
      "stop": "2016-08-24T20:32:03.629Z"
    }
  ]
}
</code></pre></div></div>

<p>To continue the chain, IBM OpenWhisk will POST the parsed JSON to a function on the <a href="https://aws.amazon.com/lambda/details/">AWS Lambda</a> platform after adding a new “hop”:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "hops": [
    {
      "provider": "Auth 0 Webtask",
      "start": "2016-08-26T18:38:25.021Z",
      "temperature": "44",
      "stop": "2016-08-26T18:38:25.021Z"
    },
    {
      "provider": "IBM OpenWhisk",
      "start": "2016-08-26T18:38:35.024Z",
      "temperature": "42",
      "stop": "2016-08-26T18:38:35.024Z"
    }
  ]
}
</code></pre></div></div>

<p>The Lambda, created with <a href="https://serverless.com/">Serverless V1.0 Beta 2</a> will parse the input again and create items in an <a href="http://aws.amazon.com/dynamodb">AWS DynamoDB</a>:</p>

<p><img class="image fit" src="/img/serverless/9.png" alt="Serverless" /></p>

<p>The AWS DynamoDB table will stream events to another AWS Lambda that will log the content of the event to the logs of AWS CloudWatch:</p>

<p><img class="image fit" src="/img/serverless/10.png" alt="Serverless" /></p>

<p>The source code of all these components is available on <a href="https://github.com/bart-blommaerts/serverless-demo">GitHub</a>.</p>

<h4 id="best-practice">Best practice</h4>

<p>Obviously I wouldn’t recommend anyone to use a different cloud provider for every function. 
Choosing the right one will depend on your specific needs, goals and current cloud landscape. 
In previous parts of this article, you may find some tips on how to make a reasoned choice.</p>

<h3 id="final-note">Final note</h3>

<p>This article was originally posted in three parts on the <a href="https://jaxlondon.com/the-serverless-cloud-part-1/">JAX London blog</a> and is also available in <a href="https://jaxenter.de/serverless-cloud-teil-1-48379">German</a>.</p>


        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/cloud/2016/11/12/TheServerlessCloud.html&title=The Serverless Cloud&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=The Serverless Cloud&url=https://ordina-jworks.github.io/cloud/2016/11/12/TheServerlessCloud.html&via=lifeatordinabe&related=lifeatordinabe" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/cloud/2016/11/12/TheServerlessCloud.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/bart-blommaerts/" class="image spotlight-image">
            <img src="/img/author/bart-blommaerts.png"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Bart Blommaerts is a passionate Software Architect at Ordina, who believes closing the model-code gap is essential to make rapid, agile delivery sustainable. Bart has a strong focus on API design, reuse, automation and security. He is always looking for technical challenges.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://twitter.com/lifeatordinabe" target="_blank">
                <i class="fa fa-fw fa-twitter"></i><span>Twitter</span>
            </a>
        </li>
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordina-belgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="https://plus.google.com/113222464071666722451" target="_blank">
                <i class=" fa fa-fw fa-google-plus"></i><span>Google+</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2018 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/serverless.jpg";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
