<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Immo chatbot - Iebe Maes">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/2021-05-27-Chatbot-Immo/cover_blog.jpg"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/cloud/2021/05/27/Chatbot-Immo.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Immo chatbot - Iebe Maes"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/2021-05-27-Chatbot-Immo/cover_blog.jpg"/>

    
    <title>Immo chatbot - Iebe Maes &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/meet-the-team">Meet the team</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="https://join.ordina-jworks.io/">JOIN</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>Immo chatbot</h2>
                

                
                    Posted May 27, 2021


    in <a href="/categories/cloud/">Cloud</a>



    by
    
        <a href="/author/iebe-maes/">Iebe Maes</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/spring/">Spring</a>, 
    
        <a href="/tags/solid/">Solid</a>, 
    
        <a href="/tags/chatbot/">Chatbot</a>
    

                

                

            </div>
        </header>
    </section>


    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <h1 class="no_toc" id="table-of-contents">Table of contents</h1>
<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#architecture" id="markdown-toc-architecture">Architecture</a></li>
  <li><a href="#chatlayer" id="markdown-toc-chatlayer">Chatlayer</a>    <ul>
      <li><a href="#chatbots-in-general" id="markdown-toc-chatbots-in-general">Chatbots in general</a></li>
      <li><a href="#intents-expressions-and-entities" id="markdown-toc-intents-expressions-and-entities">Intents, expressions, and entities</a></li>
      <li><a href="#building-blocks" id="markdown-toc-building-blocks">Building blocks</a></li>
      <li><a href="#the-multilingualism-of-the-bots" id="markdown-toc-the-multilingualism-of-the-bots">The multilingualism of the bots</a></li>
      <li><a href="#flows" id="markdown-toc-flows">Flows</a>        <ul>
          <li><a href="#search-a-premises" id="markdown-toc-search-a-premises">Search a premises</a>            <ul>
              <li><a href="#api-implementation" id="markdown-toc-api-implementation">API implementation</a></li>
            </ul>
          </li>
          <li><a href="#report-a-problem--ask-a-question" id="markdown-toc-report-a-problem--ask-a-question">Report a problem / ask a question</a>            <ul>
              <li><a href="#database" id="markdown-toc-database">Database</a></li>
              <li><a href="#repairs" id="markdown-toc-repairs">Repairs</a></li>
              <li><a href="#renovations--design" id="markdown-toc-renovations--design">Renovations / design</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#google-calendar-integration" id="markdown-toc-google-calendar-integration">Google calendar integration</a>        <ul>
          <li><a href="#getting-access" id="markdown-toc-getting-access">Getting access</a>            <ul>
              <li><a href="#enable-api" id="markdown-toc-enable-api">Enable API</a></li>
              <li><a href="#get-authorization-code" id="markdown-toc-get-authorization-code">Get authorization code</a></li>
              <li><a href="#exchange-authorization-code-for-refresh-and-access-tokens" id="markdown-toc-exchange-authorization-code-for-refresh-and-access-tokens">Exchange authorization code for refresh and access tokens</a></li>
              <li><a href="#getting-an-access-token-with-the-refresh-token" id="markdown-toc-getting-an-access-token-with-the-refresh-token">Getting an access token with the refresh token</a></li>
            </ul>
          </li>
          <li><a href="#getting-the-data-from-the-calendar" id="markdown-toc-getting-the-data-from-the-calendar">Getting the data from the calendar</a>            <ul>
              <li><a href="#creating-new-client" id="markdown-toc-creating-new-client">Creating new client</a></li>
              <li><a href="#get-freebusy-schedule" id="markdown-toc-get-freebusy-schedule">Get freebusy schedule</a></li>
              <li><a href="#get-free-meeting-times" id="markdown-toc-get-free-meeting-times">Get free meeting times</a></li>
              <li><a href="#send-the-meeting-times-back-to-chatlayer" id="markdown-toc-send-the-meeting-times-back-to-chatlayer">Send the meeting times back to Chatlayer</a></li>
            </ul>
          </li>
          <li><a href="#create-an-event" id="markdown-toc-create-an-event">Create an event</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#solid" id="markdown-toc-solid">Solid</a>    <ul>
      <li><a href="#introduction-to-solid" id="markdown-toc-introduction-to-solid">Introduction to Solid</a>        <ul>
          <li><a href="#why-do-we-use-solid" id="markdown-toc-why-do-we-use-solid">Why do we use Solid?</a></li>
          <li><a href="#what-is-solid" id="markdown-toc-what-is-solid">What is Solid?</a></li>
        </ul>
      </li>
      <li><a href="#self-hosting-solid-pod-server" id="markdown-toc-self-hosting-solid-pod-server">Self hosting Solid pod server</a>        <ul>
          <li><a href="#register" id="markdown-toc-register">Register</a></li>
          <li><a href="#login" id="markdown-toc-login">Login</a></li>
          <li><a href="#edit-profile" id="markdown-toc-edit-profile">Edit profile</a></li>
        </ul>
      </li>
      <li><a href="#your-data" id="markdown-toc-your-data">Your data</a>        <ul>
          <li><a href="#sharing-of-data" id="markdown-toc-sharing-of-data">Sharing of data</a></li>
          <li><a href="#turtle-rdf" id="markdown-toc-turtle-rdf">Turtle (RDF)</a></li>
          <li><a href="#how-to-access-your-data" id="markdown-toc-how-to-access-your-data">How to access your data?</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

<hr />

<h1 id="introduction">Introduction</h1>
<p>As we all know, Ordina is a company that is always looking to be ahead of change, by looking for the newest technologies to work with and seeing where these technologies can be useful. 
This is also one of the main objectives of my internship, investigating a new technology, investigating how fast and easy it is for non-IT users with almost no knowledge of chatbots, to set one up.</p>

<p>In this case, I made a chatbot for a real estate agency. 
At the moment, the real estate agency plays an intermediary role between tenant and landlord. 
All the questions of the tenants are coming straight to the customer service. 
Chatbots are a handy tool for customer services because they are able to take over a lot of frequently asked questions, and are available 24/7. Therefore, the customer service can run more efficiently and they will have extra time for their other tasks.</p>

<p>My official mentor was Frederick Bousson, he had help from Jasper Rosiers and Hans Vanbellingen who were my daily mentors and the people who I could reach out to if I had any questions.</p>

<h1 id="architecture">Architecture</h1>
<div style="text-align: center;">
  <img alt="Architecture" src="/img/2021-05-27-Chatbot-Immo/architecture.jpg" width="auto" height="auto" target="_blank" class="image fit" />
</div>
<p>This is the setup of the project. 
This architecture has been changed a few times during the internship. 
This mostly has to do with the Solid database because this is such a new technology. 
At the start, we didn‚Äôt quite know how to start and how it all worked.
So as the internship progressed, the architecture grew bigger. 
All the different parts of the architecture will be explained in depth in the next chapters.
For the APIs, connecting everything together, we built a Spring Boot application.</p>

<h1 id="chatlayer">Chatlayer</h1>
<p>First things first, the chatbot. 
This is where the project begins. 
But before we dive into the platform I‚Äôm using to build the bot, we must have an understanding of how chatbots actually work.</p>

<h2 id="chatbots-in-general">Chatbots in general</h2>
<p>Almost everyone has come across a site with a chatbot, maybe without even realizing it. 
Think about those little popups you see on a website offering you some help with whatever you are doing. 
That‚Äôs a chatbot. 
There are three main types of chatbots:</p>

<ul>
  <li>
    <p>Rule-based <br />
 This one is the simplest type of chatbot today. People interact with this chatbot with buttons and pre-defined options.</p>
  </li>
  <li>
    <p>Intellectually independent chatbots<br />
 This kind of chatbot uses machine learning which helps the bot learn from the user‚Äôs inputs and requests.</p>
  </li>
  <li>
    <p>AI-powered chatbots<br />
 AI-powered bots combine the best of the previous two types. 
 So they have  predefined flows but they can also understand free written language. 
 For the understanding of the language, the chatbot uses NLP (Natural Language Processing). 
 This involves two processes, NLU (Natural Language Understanding) and NLG (Natural Language Generation).
 NLU is the ability that a chatbot has to understand the user. 
 It maps the text that a user enters to a format that a computer can understand. 
 Then we have NLG, the other important part of NLP. 
 NLG is the process that, as you can probably get from the name, transforms data into words. 
 So it‚Äôs the generation of text.</p>
  </li>
</ul>

<p>When a chatbot is asked a question, the bot will break it down into an intent and entities. 
Now, what exactly are these two terms?</p>

<h2 id="intents-expressions-and-entities">Intents, expressions, and entities</h2>
<p><strong>Intent:</strong><br />
Well, an intent is something that a user would like to accomplish with the question. 
Another way to put it could be the user‚Äôs intention or need. Let me give an example.
When a user asks a question like: ‚ÄòWe need tickets to go to Brussels‚Äô. 
The intent is ‚Äòbuy a train ticket‚Äô.</p>

<p><strong>Expression:</strong><br />
Another important term related to intents is ‚Äòexpression‚Äô. 
In order for the AI to correctly identify an intent, it has to learn a couple of ways to express a certain intent. 
This is where the expressions come into play. 
When we add an intent to the chatbot, we must provide the bot with a couple of ways a user could say/express the intent. 
It‚Äôs obvious that we need to provide enough examples that convey the same message for each intent. 
The more expressions that are added, the more accurate the chatbot will be. 
When you add expressions to an intent you need to make sure that there is enough variation between the different expressions.</p>

<p><strong>Entities:</strong><br />
At last, we have the entities. 
These are small words or even word groups that are very relevant for the flow of the conversation. 
Entities could be names, cities, companies, etc. 
If we go back to the example I gave at Intent, Brussels is an entity. 
It holds the name of the city where the user would like to go to. 
Be aware that you should only use entities when the value is needed in the continuation of the flow.</p>

<p><span class="image"><img alt="intent" src="/img/2021-05-27-Chatbot-Immo/intent.jpg" class="image fit" style="margin:0px auto; max-width: 700px;" /></span></p>

<h2 id="building-blocks">Building blocks</h2>
<p>To build a chatbot, Chatlayer provides us with several different building blocks. 
Each of these has a different function.
On every bot dialog, you can put an intent, a required context, and an output context.</p>

<p><span class="image left"><img alt="feedback" src="/img/2021-05-27-Chatbot-Immo/feedback.jpg" class="image fit" style="margin:0px auto; max-width: 400px;" /></span></p>

<p>An intent is explained before so you should know what that is üòâ. 
If the user sends a message to the bot, the AI will check if it recognizes an intent. 
If this is the case, the chatbot will display the message where the intent is set.</p>

<p>The required context and output context belong together. 
Think for example about the intent ‚ÄòYes‚Äô or ‚ÄòNo‚Äô. 
If the bot asks a question where the user can answer yes or no, we can use these intents. 
But if there are multiple dialogs with the ‚ÄòYes‚Äô and ‚ÄòNo‚Äô intent, how could the bot know which dialog to go to?</p>

<p>If you take a look at this example in the first dialog, the bot asks the user if he/she wants to give some feedback about the bot. 
The user can answer with yes or no. If the answer is yes, the bot will go to the input validation (green), otherwise, it will go to the bot message (grey). 
To know to which ‚Äúgeneral.yes_or_agreed‚Äù intent the bot should go to, it can look at the output context and required context. 
In the dialog where the question is asked, you can give an output context. 
The bot will now look for a dialog with the right intent and the right context. 
That way you are sure that you will be going to the correct dialog.</p>

<p><a href="https://docs.chatlayer.ai/" target="_blank" rel="noopener noreferrer">A full tutorial on building bots within Chatlayer can be found here.</a></p>

<h2 id="the-multilingualism-of-the-bots">The multilingualism of the bots</h2>
<p>To set up a multilingual bot, you first need to make the bot in the primary language. 
I first made my chatbot in Dutch. Afterwards, you can easily translate all the messages and intents in an overview, retrain the NLP for that language and it is done! My chatbot is set up in Dutch and English.</p>

<p>Not every chatbot provider offers this functionality, which is one of the reasons we chose Chatlayer in this setup.</p>

<h2 id="flows">Flows</h2>

<h3 id="search-a-premises">Search a premises</h3>
<p>Our first flow relates to searching for premises. 
I of course didn‚Äôt have access to the database of the real estate agency so I had to find a different solution. 
So in this flow, the user gets asked a lot of questions about the premises, like maximum price, location, number of bedrooms‚Ä¶. 
With this information, I could construct a URL where the user could click on. 
This leads the user to the real estate agency website with the search results. 
In a more extended practical case, the bot could list the relevant premises right into the chatbot.</p>

<p><span class="image right"><img alt="houseSearch" src="/img/2021-05-27-Chatbot-Immo/houseSearch.jpg" class="image fit" style="margin:0px auto; max-width: 400px;" /></span></p>

<p>At the end of each flow, the bot asks the user if he/she needs help with something else. 
If the user answers with yes, a new flow can begin. 
Below you can see the diagram of this first flow. 
As you can see, a lot of the parameters are optional. 
If the user wants to see all the houses without filling out the other questions, he/she can do so. 
The decision in the beginning ‚ÄúDoes premises have bedrooms‚Äù is a decision the chatbot will make based on the type of premises the user chooses. 
I made this a go-to. If the type of the premises equals ‚Äúhouses‚Äù or ‚Äúapartments‚Äù, the bot will go to the dialog where the user could enter his/her preference about the rooms. 
Otherwise, the bot will go to the next bot dialog.</p>

<p><span class="image"><img alt="flow-diagram" src="/img/2021-05-27-Chatbot-Immo/flow-diagram.jpg" class="image fit" style="margin:0px auto; max-width: 1200px;" /></span></p>

<h4 id="api-implementation">API implementation</h4>
<p>At the end of the flow, the chatbot will send an API call with the necessary parameters to construct a URL. 
There is a basic url to which we can attach a piece depending on which parameter has been entered.</p>

<p>In the service the first thing I check is if the ‚Äòstatus‚Äô parameter has a value. 
The parameter can contain either ‚Äòbuy‚Äô or ‚Äòrent‚Äô. 
If this is not the case, there will be an error message which is sent back to the chatbot. 
The option if the user wants to buy, or to rent, is the only mandatory parameter. 
It could be possible that all the other parameters are empty. 
The rest of the function is all about checking if these parameters are null or not and attaching the correct pieces of the url.</p>

<p>It would be nice if we could just send a string back to the chatbot which it will display in a bot message. 
Sadly this is not the case. Chatlayer expects the API response to be in a specific format. 
The structure needs to be like the image below but they could be null.</p>

<p><span class="image"><img alt="profile" src="/img/2021-05-27-Chatbot-Immo/ChatlayerResponse.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p>As you can see, we need to provide Chatlayer with three things:</p>
<ol>
  <li>
    <p>Session<br />
Here we can pass along some variables that will be stored in de session storage.</p>
  </li>
  <li>
    <p>Messages<br />
Here we can specify which messages we would like to send to the chatbot, which will then display those messages to the user. 
It‚Äôs not limited to a normal text message, you could also construct some buttons, a carousel‚Ä¶</p>
  </li>
  <li>
    <p>Action<br />
This is used to specify the next dialog the bot should go to.</p>
  </li>
</ol>

<p>In this flow, I used this twice. 
One time to send the URL back to the user and once to display an error message if something has gone wrong. 
Because this was the first simple flow that we had set up in the chatbot and we knew that this was not the main flow I had chosen to, for now, just send the URL back to the chatbot as a text message.</p>

<h3 id="report-a-problem--ask-a-question">Report a problem / ask a question</h3>
<p>The second flow has a connection to the React application and is able to send problems/questions to the API which saves these in the database. 
More about the React application, API, and database come later in this blog.</p>

<p>To start at the beginning, the first thing a user has to do is log in to his/her Solid environment and specify their role (tenant/landlord). 
When the user is logged in, the chatbot gets the information about the user and the next bot dialog is being shown based on the role. 
Currently, only the tenant flow is worked out. 
The user gets a message from the bot that they can ask their question. 
It gives a few examples where the user could choose from.</p>

<h4 id="database">Database</h4>
<p>In the architecture you can see that there is a MySQL database. 
You might wonder ‚ÄúIf we already use a Solid database, then why would we use another?‚Äù. 
A Solid database is not really designed for searching through large amounts of data. 
So the data from the Solid is copied to this database in the cloud where we can easily search through the data. 
Below you will find a simple ERD of the database. 
I made this together with Jasper. 
This is the only flow where the database is currently used.</p>

<p><span class="image"><img alt="profile" src="/img/2021-05-27-Chatbot-Immo/ERD.jpg" class="image fit" style="margin:0px auto; max-width: 1300px;" /></span></p>

<h4 id="repairs">Repairs</h4>
<p>One of the paths that are worked out is if the user has a reparation that needs to be done or they have a question about who has to pay for the reparation. 
The user can reach this flow by clicking ‚ÄúRepairs‚Äù at the start, or just asking their question. 
They would have to answer a couple of questions about the reparation, think about the location and what is broken or needs to be repaired. 
Then, the bot will answer the most important question: ‚Äúwho has to pay for this?‚Äù. 
At the end of the conversation, the chatbot will send a request to the API with the problem and the user information to be saved in the database.</p>

<p><span class="image left"><img alt="houseRepairs" src="/img/2021-05-27-Chatbot-Immo/houseRepairs.jpg" class="image fit" style="margin:0px auto; max-width: 400px;" /></span></p>

<h4 id="renovations--design">Renovations / design</h4>
<p>The other path that is worked out is for the design and renovation questions. 
When the user clicks on ‚Äúquestions about the house‚Äù, he/she will get the first choice, is it a question about the design, or renovations. 
Design questions are for example questions about the repainting off the walls. 
This is a question that the bot could answer.</p>

<p>In the part about the renovations the bot says that all the big renovations must be discussed with the landlord. 
The bot then proposes to send an email to the landlord with the question. 
The user only has to type the body of the email. 
He/she gets to re-read the email to check for mistakes and then the bot will send the email.</p>

<h2 id="google-calendar-integration">Google calendar integration</h2>
<h3 id="getting-access">Getting access</h3>
<h4 id="enable-api">Enable API</h4>
<p>To get access to the API there are some different steps we need to follow.</p>

<p>The first step is enabling the Google Calendar API in the API console. 
To do this, we need to create a project on the Google Cloud Platform. 
Then we can navigate to the API library and enable the calendar API for our project.</p>

<p>When this is done, the next step is to create a client id. 
This can also be done in the Google Cloud Platform. 
The redirect URI is important here because this is where the access token is sent to. 
As you can see in the image below, when the client id is created, you get the client id and the client secret. 
These are important for authentication later on in this flow.</p>

<div style="text-align: center;">
  <img alt="googleCloudPortal" src="/img/2021-05-27-Chatbot-Immo/googleCloudPortal.PNG" width="auto" height="auto" target="_blank" class="image fit" />
</div>

<p>With the flow I‚Äôm following you won‚Äôt only get an access token back from the server but also a refresh token. 
This is needed because the connection with the API and the collection of the free meeting times all happens in the Spring Boot application without the interference of a user. 
The first time the user will have to open a url in the browser to authenticate him/her-self and give consent that the application may have access to the calendar of the user. 
The following times that we need to access the API, we can simply use the refresh token to get a new access token from the server.</p>

<h4 id="get-authorization-code">Get authorization code</h4>
<p>This step only gets executed the first time that the user logs in. 
So we start the process by asking the Google OAuth 2.0 server for an authorization code.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAuthTokenGoogle</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">AuthorizationCodeRequestUrl</span> <span class="n">authorizationUrl</span><span class="o">;</span>
    <span class="nc">GoogleClientSecrets</span><span class="o">.</span><span class="na">Details</span> <span class="n">web</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GoogleClientSecrets</span><span class="o">.</span><span class="na">Details</span><span class="o">();</span>
    <span class="n">web</span><span class="o">.</span><span class="na">setClientId</span><span class="o">(</span><span class="n">googleApiClient</span><span class="o">);</span>
    <span class="n">web</span><span class="o">.</span><span class="na">setClientSecret</span><span class="o">(</span><span class="n">googleApiSecret</span><span class="o">);</span>
    <span class="n">clientSecrets</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GoogleClientSecrets</span><span class="o">().</span><span class="na">setWeb</span><span class="o">(</span><span class="n">web</span><span class="o">);</span>
    <span class="n">httpTransport</span> <span class="o">=</span> <span class="nc">GoogleNetHttpTransport</span><span class="o">.</span><span class="na">newTrustedTransport</span><span class="o">();</span>
    <span class="n">flow</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GoogleAuthorizationCodeFlow</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">httpTransport</span><span class="o">,</span> <span class="no">JSON_FACTORY</span><span class="o">,</span> <span class="n">clientSecrets</span><span class="o">,</span>
            <span class="nc">Collections</span><span class="o">.</span><span class="na">singleton</span><span class="o">(</span><span class="nc">CalendarScopes</span><span class="o">.</span><span class="na">CALENDAR</span><span class="o">)).</span><span class="na">build</span><span class="o">();</span>
    <span class="n">authorizationUrl</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="na">newAuthorizationUrl</span><span class="o">()</span>
            <span class="o">.</span><span class="na">setRedirectUri</span><span class="o">(</span><span class="n">redirectUri</span><span class="o">)</span>
            <span class="o">.</span><span class="na">setAccessType</span><span class="o">(</span><span class="s">"offline"</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">authorizationUrl</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In the code above, we get the url where the user should login. 
We need to pass the client id and the client secret with the request as well as the redirect URI. 
You could also see that I only ask for the calendar scope, which is the only one I needed for this project. 
When the user opens this URL in the browser, the user has to login to his/her Google account after which Google prompts the user for consent to grant access to the calendar. 
When the login is successful, the server will send the authorization code back to the redirect URI specified in the request.</p>

<h4 id="exchange-authorization-code-for-refresh-and-access-tokens">Exchange authorization code for refresh and access tokens</h4>
<p>When the redirect URI is called, the following function is executed:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">callback</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">services</span><span class="o">.</span><span class="na">calendar</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">Events</span> <span class="n">eventList</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="nc">TokenResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="na">newTokenRequest</span><span class="o">(</span><span class="n">code</span><span class="o">).</span><span class="na">setRedirectUri</span><span class="o">(</span><span class="n">redirectUri</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
        <span class="n">credential</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="na">createAndStoreCredential</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="s">"userID"</span><span class="o">);</span>
        <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">services</span><span class="o">.</span><span class="na">calendar</span><span class="o">.</span><span class="na">Calendar</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">httpTransport</span><span class="o">,</span> <span class="no">JSON_FACTORY</span><span class="o">,</span> <span class="n">credential</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
        <span class="nc">Events</span> <span class="n">events</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">events</span><span class="o">();</span>
        <span class="n">eventList</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="s">"primary"</span><span class="o">).</span><span class="na">setTimeMin</span><span class="o">(</span><span class="n">date1</span><span class="o">).</span><span class="na">setTimeMax</span><span class="o">(</span><span class="n">date2</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">eventList</span><span class="o">.</span><span class="na">getItems</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="no">LOG</span><span class="o">.</span><span class="na">warn</span><span class="o">(</span><span class="s">"Exception while handling OAuth2 callback ("</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">()</span> <span class="o">+</span> <span class="s">")."</span>
                <span class="o">+</span> <span class="s">" Redirecting to google connection status page."</span><span class="o">);</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s">"Exception while handling OAuth2 callback ("</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">()</span> <span class="o">+</span> <span class="s">")."</span>
                <span class="o">+</span> <span class="s">" Redirecting to google connection status page."</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">message</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This is the part where we are exchanging the authorization code for the access and refresh tokens.
When I got those tokens from the server, I manually set the refresh token in the <code class="language-plaintext highlighter-rouge">application.properties</code> file so I could use it later to get new access tokens.
As a test, there is also some code to get the events between two dates, to make sure that I have access to the Google calendar API with the acquired access token.</p>

<h4 id="getting-an-access-token-with-the-refresh-token">Getting an access token with the refresh token</h4>
<p>In the actual flow I used the refresh token to get an access token from the Google server. 
This can be done with a simple POST request to the server with the client id, client secret and the refresh token. 
We then get a response with a new access token which we can use to send the request to the API.</p>

<h3 id="getting-the-data-from-the-calendar">Getting the data from the calendar</h3>
<h4 id="creating-new-client">Creating new client</h4>

<p><span class="image left"><img alt="clientObject" src="/img/2021-05-27-Chatbot-Immo/clientObject.jpg" class="image fit" style="margin:0px auto; max-width: 600px;" /></span></p>

<p>As you could see in the code examples above, to have easy access to the calendar and get the events etc. we create a client object. 
The client object is an instance of the Calendar object.</p>

<p>With this object we can get the calendars, the events and much more.</p>

<h4 id="get-freebusy-schedule">Get freebusy schedule</h4>
<p>Because we need the free meeting times of the user, we would need the freebusy schedule. 
This gives us an overview when the user is busy and we can extract the free meeting times from that. 
To know for which date I have to get the freebusy schedule, I first get the next 5 working days in the chatbot from which the user can choose. 
This date is then forwarded to the API to retrieve the schedule.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">FreeBusyRequestItem</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="nc">FreeBusyRequestItem</span> <span class="n">freeBusyRequestItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FreeBusyRequestItem</span><span class="o">();</span>
<span class="n">freeBusyRequestItem</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"iebemaes"</span><span class="o">);</span>
<span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">freeBusyRequestItem</span><span class="o">);</span>

<span class="nc">Calendar</span><span class="o">.</span><span class="na">Freebusy</span> <span class="n">freebusy</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">freebusy</span><span class="o">();</span>
<span class="nc">FreeBusyRequest</span> <span class="n">freeBusyRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FreeBusyRequest</span><span class="o">();</span>
<span class="n">freeBusyRequest</span><span class="o">.</span><span class="na">setTimeMin</span><span class="o">(</span><span class="n">dateTimemin</span><span class="o">);</span>
<span class="n">freeBusyRequest</span><span class="o">.</span><span class="na">setTimeMax</span><span class="o">(</span><span class="n">dateTimeMax</span><span class="o">);</span>
<span class="n">freeBusyRequest</span><span class="o">.</span><span class="na">setCalendarExpansionMax</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
<span class="n">freeBusyRequest</span><span class="o">.</span><span class="na">setGroupExpansionMax</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
<span class="n">freeBusyRequest</span><span class="o">.</span><span class="na">setTimeZone</span><span class="o">(</span><span class="s">"UTC"</span><span class="o">);</span>
<span class="n">freeBusyRequest</span><span class="o">.</span><span class="na">setItems</span><span class="o">(</span><span class="n">items</span><span class="o">);</span>
<span class="nc">Calendar</span><span class="o">.</span><span class="na">Freebusy</span><span class="o">.</span><span class="na">Query</span> <span class="n">query</span> <span class="o">=</span> <span class="n">freebusy</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">freeBusyRequest</span><span class="o">);</span>
<span class="nc">FreeBusyResponse</span> <span class="n">freeBusyResponse</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
</code></pre></div></div>

<h4 id="get-free-meeting-times">Get free meeting times</h4>
<p>To get the free meeting times, I made a list with all the timeslots starting every hour. 
Then I looped over this list and the list with the busy timeslots. 
When the start hour of a busy timeslot matched with the start hour of a timeslot from the first list, I deleted this timeslot from the first list. 
That way I ended up with a list with only free timeslots.</p>

<h4 id="send-the-meeting-times-back-to-chatlayer">Send the meeting times back to Chatlayer</h4>
<p>Now that we have a list with all the free timeslots, we need to get this list in the chatbot. 
I wanted the timeslots to appear in the chatbot as quick replies. 
For each item in the timeslot list there should be a quick reply item. 
When I had the correct structure, I could send these quick replies back to Chatlayer with a simple POST request.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="o">(</span><span class="nc">String</span> <span class="nl">meetingTime:</span> <span class="n">meetingTimes</span><span class="o">){</span>
        <span class="nc">String</span><span class="o">[]</span><span class="n">hours</span><span class="o">=</span><span class="n">meetingTime</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"-"</span><span class="o">);</span>
        <span class="nc">QuickRepliesItem</span> <span class="n">quickRepliesItem</span><span class="o">=</span><span class="k">new</span> <span class="nc">QuickRepliesItem</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">title</span><span class="o">=</span><span class="n">hours</span><span class="o">[</span><span class="mi">0</span><span class="o">]+</span><span class="s">"u tot "</span><span class="o">+</span><span class="n">hours</span><span class="o">[</span><span class="mi">1</span><span class="o">]+</span><span class="s">"u"</span><span class="o">;</span>
        <span class="n">quickRepliesItem</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
        <span class="n">quickRepliesItem</span><span class="o">.</span><span class="na">setImageUrl</span><span class="o">(</span><span class="s">"https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Simple_icon_time.svg/1200px-Simple_icon_time.svg.png"</span><span class="o">);</span>

        <span class="nc">SessionDataToSetItem</span> <span class="n">sessionDataToSetItem</span><span class="o">=</span><span class="k">new</span> <span class="nc">SessionDataToSetItem</span><span class="o">();</span>
        <span class="n">sessionDataToSetItem</span><span class="o">.</span><span class="na">setKey</span><span class="o">(</span><span class="s">"chosenTimeSlot"</span><span class="o">);</span>
        <span class="n">sessionDataToSetItem</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">meetingTime</span><span class="o">);</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">SessionDataToSetItem</span><span class="o">&gt;</span> <span class="n">sessiondata</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="n">sessiondata</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">sessionDataToSetItem</span><span class="o">);</span>

        <span class="nc">Payload</span> <span class="n">payload</span><span class="o">=</span><span class="k">new</span> <span class="nc">Payload</span><span class="o">();</span>
        <span class="n">payload</span><span class="o">.</span><span class="na">setNextDialogstateId</span><span class="o">(</span><span class="s">"045eac85-9c67-4b44-a0f5-aaacb724dbc6"</span><span class="o">);</span>
        <span class="n">payload</span><span class="o">.</span><span class="na">setSessionDataToSet</span><span class="o">(</span><span class="n">sessiondata</span><span class="o">);</span>

        <span class="n">quickRepliesItem</span><span class="o">.</span><span class="na">setPayload</span><span class="o">(</span><span class="n">payload</span><span class="o">);</span>
        <span class="n">quickReplies</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">quickRepliesItem</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="create-an-event">Create an event</h3>
<p>The last step in this flow is of course the creation of an event in the calendar. 
When the user has selected a day, a timeslot and entered his/her name and address, the event needs to be saved in the calendar. 
This can also be done with the client object. 
So I pass the previously stated parameters to the API which will create the event.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">createEvent</span><span class="o">(</span><span class="nc">String</span> <span class="n">date</span><span class="o">,</span> <span class="nc">String</span> <span class="n">meetingTime</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">address</span><span class="o">,</span> <span class="nc">String</span> <span class="n">problemType</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">hours</span> <span class="o">=</span>  <span class="n">meetingTime</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"-"</span><span class="o">);</span>
        <span class="nc">Event</span> <span class="n">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Event</span><span class="o">();</span>
        <span class="n">event</span><span class="o">.</span><span class="na">setSummary</span><span class="o">(</span><span class="s">"Herstelling bij: "</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
        <span class="n">event</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"Herstelling van: "</span> <span class="o">+</span> <span class="n">problemType</span><span class="o">);</span>
        <span class="n">event</span><span class="o">.</span><span class="na">setLocation</span><span class="o">(</span><span class="n">address</span><span class="o">);</span>

        <span class="nc">Date</span> <span class="n">date1</span><span class="o">=</span><span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy-MM-dd"</span><span class="o">).</span><span class="na">parse</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
        <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Calendar</span> <span class="n">calStartDate</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        <span class="n">calStartDate</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="n">date1</span><span class="o">);</span>
        <span class="n">calStartDate</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">hours</span><span class="o">[</span><span class="mi">0</span><span class="o">]));</span>
        <span class="nc">Date</span> <span class="n">startDate</span> <span class="o">=</span> <span class="n">calStartDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
        <span class="nc">DateTime</span> <span class="n">dateTimemin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DateTime</span><span class="o">(</span><span class="n">startDate</span><span class="o">);</span>

        <span class="nc">EventDateTime</span> <span class="n">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EventDateTime</span><span class="o">();</span>
        <span class="n">start</span><span class="o">.</span><span class="na">setDateTime</span><span class="o">(</span><span class="n">dateTimemin</span><span class="o">);</span>
        <span class="n">event</span><span class="o">.</span><span class="na">setStart</span><span class="o">(</span><span class="n">start</span><span class="o">);</span>

        <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Calendar</span> <span class="n">calEndDate</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
        <span class="n">calEndDate</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="n">date1</span><span class="o">);</span>
        <span class="n">calEndDate</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Calendar</span><span class="o">.</span><span class="na">HOUR_OF_DAY</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">hours</span><span class="o">[</span><span class="mi">1</span><span class="o">]));</span>
        <span class="nc">Date</span> <span class="n">endDate</span> <span class="o">=</span> <span class="n">calEndDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">();</span>
        <span class="nc">DateTime</span> <span class="n">dateTimeMax</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DateTime</span><span class="o">(</span><span class="n">endDate</span><span class="o">);</span>

        <span class="nc">EventDateTime</span> <span class="n">end</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EventDateTime</span><span class="o">();</span>
        <span class="n">end</span><span class="o">.</span><span class="na">setDateTime</span><span class="o">(</span><span class="n">dateTimeMax</span><span class="o">);</span>
        <span class="n">event</span><span class="o">.</span><span class="na">setEnd</span><span class="o">(</span><span class="n">end</span><span class="o">);</span>

        <span class="nc">String</span> <span class="n">calendarId</span> <span class="o">=</span><span class="s">"primary"</span><span class="o">;</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">events</span><span class="o">().</span><span class="na">insert</span><span class="o">(</span><span class="n">calendarId</span><span class="o">,</span> <span class="n">event</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>


<span class="o">}</span>
</code></pre></div></div>
<p>After the event is created in the calendar, I‚Äôm sending a response message to the chatbot that the event is created and setting the appropriate next dialog id.</p>

<p><span class="image"><img alt="chatbotconv part 1" src="/img/2021-05-27-Chatbot-Immo/chatbotConvP1.PNG" class="image fit" style="margin:0px auto; max-width: 500px;" /></span></p>

<p><span class="image"><img alt="chatbotconv part 2" src="/img/2021-05-27-Chatbot-Immo/chatbotConvP2.PNG" class="image fit" style="margin:0px auto; max-width: 500px;" /></span></p>

<p><a href="https://www.youtube.com/watch?v=qWsC7zrawBA" target="_blank" rel="noopener noreferrer">Have a look at the demo!</a></p>

<h1 id="solid">Solid</h1>
<h2 id="introduction-to-solid">Introduction to Solid</h2>
<h3 id="why-do-we-use-solid">Why do we use Solid?</h3>
<p>There are a couple issues with the way we handle data for which Solid can provide a solution.</p>

<p>Some examples of issues today:</p>
<ul>
  <li>In the personal data domain, there are a couple of big Tech companies who own the biggest part of our data
    <ul>
      <li>Problems with data-monopolies
        <ul>
          <li>Security risks
            <ul>
              <li>Data-breaches</li>
            </ul>
          </li>
          <li>Les innovation</li>
          <li>Political concerns
            <ul>
              <li>Can affect the public debate and our perception of right and wrong</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Companies are so successful because they have such a large amount of data, not because of their innovations</li>
      <li>Because of these couple big companies, it is difficult for new companies to innovate because they don‚Äôt have the data for it
        <ul>
          <li>Examples
            <ul>
              <li>Google</li>
              <li>Amazon</li>
              <li>Facebook</li>
              <li>‚Ä¶</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>People have lost control of their data
    <ul>
      <li>Hardly any visibility into what of your data is being retained</li>
      <li>Little to no control over how your data is used and who is using it</li>
      <li>‚Ä¶</li>
    </ul>
  </li>
</ul>

<h3 id="what-is-solid">What is Solid?</h3>
<p>Solid (Social Linked Data), made by Tim Berners-Lee,  is a specification which lets users store their data securely in a decentralized data store called pods. 
Solid itself isn‚Äôt much of an innovation, the innovation comes in bringing together different existing rules. 
Solid is based on open specifications just like the web itself. 
Open specifications mean interoperability across a broad ecosystem. 
The goal of Solid is to bring back data driven innovation and data ownership.</p>

<p>In the Solid ecosystem, there are three important concepts: users, apps and pods.</p>

<p>User:</p>
<ul>
  <li>Control which apps, organizations and people can access which part their data
    <ul>
      <li>Easier data sharing</li>
    </ul>
  </li>
  <li>Retains ownership and control over the data in his/her pod</li>
  <li>Can have more then one pod
    <ul>
      <li>Pods can be hosted my the same pod provider or be self-hosted or a combination</li>
    </ul>
  </li>
</ul>

<p>Applications:</p>
<ul>
  <li>Store and access data in pods</li>
  <li>Can get information from different pods</li>
</ul>

<p>Pods:</p>
<ul>
  <li>The data stores where you store your data</li>
  <li>You can store any kind of data in a Solid pod</li>
  <li>Right now you can get your pod from a pod provider or you could host your pod yourself</li>
</ul>

<h2 id="self-hosting-solid-pod-server">Self hosting Solid pod server</h2>
<p>There are different ways to setup a pod server where you can host your pod(s). 
I used the Docker container to setup my Solid server.</p>

<p>To run the docker container I could execute this command in a terminal:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -p 8443:8443 --name solid-server.
</code></pre></div></div>

<p>If we navigate to <code class="language-plaintext highlighter-rouge">localhost:8443</code>, we visit the homepage of the Solid server. 
First we get the message that the page is not secure but when clicking through, we arrive at the page where we can register a new account or login to an existing one.</p>

<p><span class="image"><img alt="Homepage Solid Server" src="/img/2021-05-27-Chatbot-Immo/homepageSolidServer.jpg" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"root"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./data/localhost.com/"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8443"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"serverUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:8443"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"webid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./config"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dbPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./.db"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sslKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./privkey.pem"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sslCert"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./fullchain.pem"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"multiuser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"corsProxy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/proxy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"enforceToc"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disablePasswordChecks"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tocUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://your-toc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"supportEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your support email address"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>When you host a pod server, there are some configuration options which you can modify. 
I think the most important one here is whether or not you want your server to be able to host more than one pod or not. 
For testing purposes, I set the multiuser setting to <code class="language-plaintext highlighter-rouge">true</code> so my server is capable of hosting multiple pods.</p>

<h3 id="register">Register</h3>
<p>When you want to register an account you need to provide some simple information like your name, email address, password and username. 
As you can see below, when creating an account, your webId (unique identifier for Solid pods) is made of your username and the domain (in this case this is <code class="language-plaintext highlighter-rouge">localhost:8443</code>). 
The <code class="language-plaintext highlighter-rouge">/profile/card#me</code> is just to specify where your profile information is stored. 
When registering a new account you need to add an entry for it in you local <code class="language-plaintext highlighter-rouge">hosts</code> file like this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1		newuser.localhost
</code></pre></div></div>

<p><span class="image"><img alt="Register Solid Server" src="/img/2021-05-27-Chatbot-Immo/RegisterSolidServer.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<h3 id="login">Login</h3>
<p>When the account is created you could login to your own Solid pod. 
When you login you first get a popup. You can enter your webId or you identity provider. 
In this case I‚Äôm logging in with my identity provider.</p>

<p><span class="image"><img alt="Login p1 Solid Server" src="/img/2021-05-27-Chatbot-Immo/loginPopup1.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p>And enter your username and password which you specified when the account is registered.</p>

<p><span class="image"><img alt="Login p2 Solid Server" src="/img/2021-05-27-Chatbot-Immo/loginPopup2.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<h3 id="edit-profile">Edit profile</h3>
<p>As a logged in user you can see your profile, but when you first login there is nothing there. 
However, you can easily edit your own information.</p>

<p><span class="image"><img alt="Home Page pod" src="/img/2021-05-27-Chatbot-Immo/podHomepage.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p><span class="image"><img alt="Edit profile" src="/img/2021-05-27-Chatbot-Immo/podEditProfile.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<h2 id="your-data">Your data</h2>
<p>Of course, the main thing you want to know about Solid is your storage. 
When the pod is created you have these standard sections ready for you. 
The sharing settings for these folders have also been set when the pod is created. 
Profile and public are two folders which everyone can read but not change. 
And as you would expect, private is only for you.</p>

<p><span class="image"><img alt="Pod Data" src="/img/2021-05-27-Chatbot-Immo/podData.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<h3 id="sharing-of-data">Sharing of data</h3>
<p>Within the Solid interface it is very easy to share data with other people, groups, apps‚Ä¶</p>

<p><span class="image"><img alt="Pod Sharing" src="/img/2021-05-27-Chatbot-Immo/podSharing.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p>You could set these sharing permissions on a folder but also on a specific file. 
In the standard scenario the files inside a folder just inherit the sharing permissions.</p>

<p>Solid also has a nice overview of which applications have access to your pod, and also which kind of access they have (read, write, append or control). 
In this overview you could also revoke access and update the kind of access that these applications have.</p>

<p><span class="image"><img alt="Pod Trused applications" src="/img/2021-05-27-Chatbot-Immo/podTrusted.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p>As mentioned before, you can store any kind of data on your pod, this goes from <code class="language-plaintext highlighter-rouge">.txt</code> files, to <code class="language-plaintext highlighter-rouge">.html</code> files and even <code class="language-plaintext highlighter-rouge">.ttl</code> files. 
For this project I‚Äôve chosen to store data in .ttl files because that‚Äôs what I saw the most in the documentation.</p>

<h3 id="turtle-rdf">Turtle (RDF)</h3>
<p>Before we can discuss Turtle we need to have a basic understanding of RDF and linked data. 
RDF stands for Resource Description Framework and is used to describe resources on the internet. 
A resource is anything on the internet, for example: a person, a book‚Ä¶ With RDF every resource is described as a triple. 
Those triples consist of a subject, a predicate and an object. 
Using this simple model, data (structured and semi-structured) can be mixed and shared between different applications. 
This linking structure forms a directed and labeled graph.</p>

<p><span class="image"><img alt="RDF graph" src="/img/2021-05-27-Chatbot-Immo/rdf.jpg" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p>Turtle itself is a format that allows RDF graphs to be written in a natural text form. 
Next to N-Triples, JSON-LD and RDF/XML it is one of the four common formats to write RDF. 
In Turtle you can declare prefixes to use as a shortcut throughout the rest of the file so you don‚Äôt have to write full URI‚Äôs everywhere.</p>

<p>Example:
This is the card file in the profile folder which contains all the information about the user.</p>

<p><span class="image"><img alt="profile" src="/img/2021-05-27-Chatbot-Immo/profileCard.png" class="image fit" style="margin:0px auto; max-width: 1000px;" /></span></p>

<p>The full notation for the full name would be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#me http://www.w3.org/2006/vcard/ns#fn Iebe Maes
</code></pre></div></div>
<p>Because of the short notation, Turtle is much easier to understand than the other formats.</p>

<h3 id="how-to-access-your-data">How to access your data?</h3>
<p>The login page is built in React.</p>

<p>The first step to get information in your solid pod is authentication. 
Luckily Solid has a library with some nice components that make the login process much easier.</p>

<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">LoginButton</span><span class="p">,</span> <span class="nx">LoggedOut</span><span class="p">,</span> <span class="nx">LogoutButton</span><span class="p">,</span> <span class="nx">LoggedIn</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@solid/react</span><span class="dl">'</span><span class="p">;</span>

<span class="p">&lt;</span><span class="nc">LoggedIn</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">needsToLogin</span> <span class="p">?</span> <span class="p">&lt;</span><span class="nc">GetInformation</span> <span class="na">sendInformation</span><span class="p">=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">sendInformation</span><span class="si">}</span> <span class="p">/&gt;</span> <span class="p">:</span> 
        <span class="p">&lt;</span><span class="nc">Row</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Col</span><span class="p">&gt;&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="p">=</span><span class="s">"text-  center"</span><span class="p">&gt;</span>Informatie is correct binnengekomen! U mag terugkeren naar de chatbot.<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;&lt;/</span><span class="nc">Col</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Row</span><span class="p">&gt;</span><span class="si">}</span>
<span class="p">&lt;/</span><span class="nc">LoggedIn</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">LoggedOut</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Row</span> <span class="na">className</span><span class="p">=</span><span class="s">"justify-content-md-center mt-5"</span><span class="p">&gt;</span>

              <span class="p">&lt;</span><span class="nc">Col</span> <span class="na">md</span><span class="p">=</span><span class="s">"auto"</span><span class="p">&gt;</span>

                <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="p">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>Welkom!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="p">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>Gelieve u aan te melden.<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nc">Col</span><span class="p">&gt;</span>

        <span class="p">&lt;/</span><span class="nc">Row</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Row</span> <span class="na">className</span><span class="p">=</span><span class="s">"justify-content-center"</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nc">Col</span> <span class="na">md</span><span class="p">=</span><span class="s">"auto text-center"</span><span class="p">&gt;</span>

                <span class="p">&lt;</span><span class="nc">LoginButton</span> <span class="na">className</span><span class="p">=</span><span class="s">"btn btn-primary"</span> <span class="na">popup</span><span class="p">=</span><span class="s">"popup.html"</span><span class="p">&gt;</span>log in <span class="p">&lt;/</span><span class="nc">LoginButton</span><span class="p">&gt;</span>

              <span class="p">&lt;/</span><span class="nc">Col</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">Row</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nc">LoggedOut</span><span class="p">&gt;</span>

</code></pre></div></div>
<p>The <code class="language-plaintext highlighter-rouge">loggedIn</code> and <code class="language-plaintext highlighter-rouge">loggedOut</code> component do exactly what you expect them to do, show some content when the user is logged in and show other content when the user isn‚Äôt logged in. 
Then we have the <code class="language-plaintext highlighter-rouge">loginButton</code> component which shows <code class="language-plaintext highlighter-rouge">popup.html</code> which is the popup screen you see in the login section above.</p>

<p>To get the actual data, from for example the profile, you would first need to get the webId. 
You can get this with the react hook provided by the same library from above.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">webId</span> <span class="o">=</span> <span class="nf">useWebId</span><span class="p">();</span>
</code></pre></div></div>

<p>Then we would need the data object.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="na">default</span><span class="p">:</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@solid/query-ldflex</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>And with the data object and the webId, we can get the profile.
Once we have this object you can ask for anything you see in the structure off the profile card under <code class="language-plaintext highlighter-rouge">:me</code>. 
Because your webid is something like ‚Äúusername.domain/profile/card#me‚Äù. 
The profile object we would get would actually be the <code class="language-plaintext highlighter-rouge">#me</code> part of the card.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">profile</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">webId</span><span class="p">];</span>
</code></pre></div></div>

<p>To get the full name, we place the predicate between <code class="language-plaintext highlighter-rouge">[ ]</code> after the profile object.</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">profile</span><span class="p">[</span><span class="dl">'</span><span class="s1">http://www.w3.org/2006/vcard/ns#fn</span><span class="dl">'</span><span class="p">]</span>
</code></pre></div></div>

<p>You can also see that for example the address isn‚Äôt stored under the <code class="language-plaintext highlighter-rouge">:me</code> part but it has an id. 
To get the properties of the address we would have to do something like this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">addressURL</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">profile</span><span class="p">[</span><span class="dl">'</span><span class="s1">http://www.w3.org/2006/vcard/ns#hasAddress</span><span class="dl">'</span><span class="p">]</span>

<span class="kd">const</span> <span class="nx">city</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">addressURL</span><span class="p">[</span><span class="dl">'</span><span class="s1">http://www.w3.org/2006/vcard/ns#locality</span><span class="dl">'</span><span class="p">]</span>
<span class="kd">const</span> <span class="nx">postalCode</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">addressURL</span><span class="p">[</span><span class="dl">'</span><span class="s1">http://www.w3.org/2006/vcard/ns#postal-code</span><span class="dl">'</span><span class="p">]</span>
<span class="kd">const</span> <span class="nx">street</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">addressURL</span><span class="p">[</span><span class="dl">'</span><span class="s1">http://www.w3.org/2006/vcard/ns#street-address</span><span class="dl">'</span><span class="p">]</span>
</code></pre></div></div>

<h1 id="conclusion">Conclusion</h1>

<p>First of all, I want to thank Ordina for the chance that they have given me to do this internship. 
Also a special thanks to all three of my mentors: Frederick Bousson, Jasper Rosiers and Hans Vanbellingen! 
They always provided me with feedback when I finished a part of the solution and would always make time to help me with my questions or to explain things that weren‚Äôt clear.</p>

<p>It really was an educational internship, where I‚Äôve learned a lot!</p>
<ul>
  <li>I learned more about how to properly develop a Spring Boot application</li>
  <li>I‚Äôve been researching Solid
    <ul>
      <li>What it is</li>
      <li>How to set it up</li>
      <li>How to extract data</li>
    </ul>
  </li>
  <li>I‚Äôve learned how to make chatbots with Chatlayer and understanding how they work</li>
  <li>Got a more thorough understanding of how to write unit tests</li>
  <li>Learned how to work with google API‚Äôs</li>
  <li>Taken a look at Azure AD</li>
  <li>Taken a look at how Ordina approaches the start of a project</li>
</ul>

<p>This internship has really given me the feeling that I chose the right study.</p>

<p>The only sad thing about this internship was that it was during the Covid-19 pandemic so I haven‚Äôt had the chance to really experience the work-life @Ordina. 
Despite corona, I had a very nice time working on this project.</p>

        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/cloud/2021/05/27/Chatbot-Immo.html&title=Immo chatbot&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=Immo chatbot&url=https://ordina-jworks.github.io/cloud/2021/05/27/Chatbot-Immo.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/cloud/2021/05/27/Chatbot-Immo.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/iebe-maes/" class="image spotlight-image" title="">
            <img src="/img/author/iebe-maes.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Iebe is a junior Java developer at Ordina Belgium with an interest in back-end, frond-end and cloud development. He likes to learn new technologies.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2023 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/2021-05-27-Chatbot-Immo/cover_blog.jpg";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
