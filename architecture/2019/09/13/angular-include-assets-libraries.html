<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Lessons learned on including library assets into Angular applications - Orjan De Smet">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/2019-09-09-angular-include-assets-libraries/tpryd.jpg"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/architecture/2019/09/13/angular-include-assets-libraries.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Lessons learned on including library assets into Angular applications - Orjan De Smet"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/2019-09-09-angular-include-assets-libraries/tpryd.jpg"/>

    
    <title>Lessons learned on including library assets into Angular applications - Orjan De Smet &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/launch-your-career">Career</a></li>
                <li class="menu-item"><a href="/tech-radar">Tech Radar</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>Lessons learned on including library assets into Angular applications</h2>
                

                
                    Posted Sep 13, 2019


    in <a href="/categories/architecture/">Architecture</a>



    by
    
        <a href="/author/orjan-de-smet">Orjan De Smet</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/angular/">Angular</a>, 
    
        <a href="/tags/builders/">Builders</a>, 
    
        <a href="/tags/assets/">Assets</a>, 
    
        <a href="/tags/library/">Library</a>, 
    
        <a href="/tags/monorepo/">Monorepo</a>
    

                

                

            </div>
        </header>
    </section>

    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <p>With Angular 6, which has now been released ages ago, workspaces were introduced.
This meant that a repository could include multiple applications and libraries, eventually building a monorepository.
I welcomed this change, as it meant that all applications in one repository could be kept up to date easily and more.
But Iâ€™m not here to talk about all the advantages and disadvantages of a monorepo.
Instead Iâ€™d like to talk about one specific challenge with this type of repository.</p>

<h2 id="how-to-include-assets-used-by-libraries">How to include assets used by libraries</h2>

<p>There are multiple solutions to this problem.
But not all solutions match all criteria for a good architecture.
These criteria are:</p>

<ul>
  <li>Assets should exist only once, preferably in the project that utilizes them.</li>
  <li>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</li>
  <li>A dependency on another library should be added with minimal change and with minimal affected projects.</li>
</ul>

<p>I havenâ€™t worked with many monorepo tools, other than <a href="https://nx.dev" target="_blank" rel="noopener noreferrer">Nrwl/nx</a>, so I will base my definition of affected projects on that.
Nrwl/nx uses a dependency graph to determine the affected projects.
In short: if a library has a changed file, then all projects that import this library (either directly or lazy-loaded) are affected.
This works recursively, so the projects that import those projectes are also affected and so on.
Some files, like <code class="language-plaintext highlighter-rouge">package.json</code> and <code class="language-plaintext highlighter-rouge">angular.json</code> have <code class="language-plaintext highlighter-rouge">implicitDependencies</code> set to <code class="language-plaintext highlighter-rouge">"*"</code>, which means a change in those files will regard all projects in the workspace as affected.</p>

<p>These are the solutions (in order) Iâ€™ve gone through to tackle this exact problem for a monorepo Iâ€™m currently managing.</p>

<p><em>Note: In that monorepo the focus was on json-files with translations used for <code class="language-plaintext highlighter-rouge">@ngx-translate</code>, but in my examples here I will use images.</em>
<em>In the example, the application, my-app, only depends on the library neighbourhood-dogs-lib and should only display a picture of my dog and Peteâ€™s dog, but not of Karenâ€™s cat.</em></p>

<h3 id="solution-1---assets-in-the-application-source">Solution 1 - Assets in the application source</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€ ğŸ“‚apps
â”‚  â””â”€ ğŸ“‚my-app
â”‚     â”œâ”€ ğŸ“‚src
â”‚     â”‚  â”œâ”€ ğŸ“‚assets
â”‚     â”‚  â”‚  â””â”€ ğŸ“‚images
â”‚     â”‚  â”‚     â”œâ”€ ğŸ–¼my-dog.jpg
â”‚     â”‚  â”‚     â””â”€ ğŸ–¼pete-dog.jpg
â”‚     â”‚  â”œâ”€ ğŸ“‚app
â”‚     â”‚  â”‚  â””â”€ ...
â”‚     â”‚  â”œâ”€ ğŸ“„index.html
â”‚     â”‚  â””â”€ ...
â”‚     â””â”€ ...
â””â”€ ğŸ“‚libs
   â”œâ”€ ğŸ“‚neighbourhood-dogs-lib
   â”‚  â”œâ”€ ğŸ“‚src
   â”‚  â”‚  â”œâ”€ ğŸ“‚lib
   â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„dog-list.component.ts
   â”‚  â”‚  â”‚  â””â”€ ğŸ“„dog.component.ts
   â”‚  â”‚  â””â”€ ...
   â”‚  â””â”€ ...
   â””â”€ ğŸ“‚neighbourhood-cats-lib
      â”œâ”€ ğŸ“‚src
      â”‚  â”œâ”€ ğŸ“‚lib
      â”‚  â”‚  â”œâ”€ ğŸ“„cat-list.component.ts
      â”‚  â”‚  â””â”€ ğŸ“„cat.component.ts
      â”‚  â””â”€ ...
      â””â”€ ...
</code></pre></div></div>

<p>I call this solution the â€œIâ€™ll figure it out laterâ€-solution.
The main idea was to set aside this problem because other tasks had higher priority, the monorepo wasnâ€™t nearly as big as it is now.
Basically, the assets used by a library were put in the <code class="language-plaintext highlighter-rouge">assets</code> folder of the applicationâ€™s source directory.
This meant that the build of an application would simply include these assets out of the box.
This is fine for a single application, but as soon as a second application (letâ€™s say, neighbourhood-animals-app) was to use this library, it, too, would need a copy of those assets in its source directory.
A change to one of the assets would also mean that two applications would need this change, which is prone to being forgotten.
Moreover, the image of Karenâ€™s cat is nowhere to be found because at this time, no application needs it.</p>

<p>As for the criteria:</p>

<table>
    <tbody>
        <tr>
            <td>Assets should exist only once, preferably in the project that utilizes them.</td>
            <td style="width: 70px">âŒ</td>
        </tr>
        <tr>
            <td>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</td>
            <td style="width: 70px">âš ï¸*</td>
        </tr>
        <tr>
            <td>A dependency on another library should be added with minimal change and with minimal affected projects.</td>
            <td style="width: 70px">âš ï¸**</td>
        </tr>
    </tbody>
</table>

<p>*Kind of, if I donâ€™t forget to copy our assets<br />
**Depends on the amount of applications that need these extra assets</p>

<h3 id="solution-2---shared-assets-directory">Solution 2 - Shared assets directory</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€ ğŸ“‚apps
â”‚  â””â”€ ğŸ“‚my-app
â”‚     â”œâ”€ ğŸ“‚src
â”‚     â”‚  â”œâ”€ ğŸ“‚app
â”‚     â”‚  â”‚  â””â”€ ...
â”‚     â”‚  â”œâ”€ ğŸ“„index.html
â”‚     â”‚  â””â”€ ...
â”‚     â””â”€ ...
â”œâ”€ ğŸ“‚libs
â”‚  â”œâ”€ ğŸ“‚neighbourhood-dogs-lib
â”‚  â”‚  â”œâ”€ ğŸ“‚src
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“‚lib
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„dog-list.component.ts
â”‚  â”‚  â”‚  â”‚  â””â”€ ğŸ“„dog.component.ts
â”‚  â”‚  â”‚  â””â”€ ...
â”‚  â”‚  â””â”€ ...
â”‚  â””â”€ ğŸ“‚neighbourhood-cats-lib
â”‚     â”œâ”€ ğŸ“‚src
â”‚     â”‚  â”œâ”€ ğŸ“‚lib
â”‚     â”‚  â”‚  â”œâ”€ ğŸ“„cat-list.component.ts
â”‚     â”‚  â”‚  â””â”€ ğŸ“„cat.component.ts
â”‚     â”‚  â””â”€ ...
â”‚     â””â”€ ...
â””â”€ ğŸ“‚shared-assets
   â””â”€ ğŸ“‚images
      â”œâ”€ ğŸ–¼my-dog.jpg
      â”œâ”€ ğŸ–¼pete-dog.jpg
      â””â”€ ğŸ–¼karen-cat.jpg
</code></pre></div></div>

<p>This is the â€œShare everythingâ€-solution. It was created to solve the main fault of the previous, namely that assets could exist twice.
Another important aspect here was to reduce the amount of times that <code class="language-plaintext highlighter-rouge">angular.json</code> would be changed when more assets from another library would be added.
Because <code class="language-plaintext highlighter-rouge">angular.json</code> implicitly affects all projects, this file should be kept untouched as much as possible.
So a one-time change was made to let the projects in <code class="language-plaintext highlighter-rouge">angular.json</code> include these shared assets:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"glob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**/*"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./shared-assets/images"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./assets/images"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Unfortunately this meant that all assets from all libraries would be added to those applications, which increases the bundle size significantly.
Another disadvantage is that the Nx dependency graph could not link changes in this directory with their corresponding libraries, unless every single file was mentioned in <code class="language-plaintext highlighter-rouge">nx.json</code> with an implicit dependency for that library.
Ironically, this solves criteria 3 perfectly, because nothing is affected, so thatâ€™s the bare minimum.</p>

<p>Going back through the criteria:</p>

<table>
    <tbody>
        <tr>
            <td>Assets should exist only once, preferably in the project that utilizes them.</td>
            <td style="width: 70px">âš ï¸*</td>
        </tr>
        <tr>
            <td>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</td>
            <td style="width: 70px">âŒ</td>
        </tr>
        <tr>
            <td>A dependency on another library should be added with minimal change and with minimal affected projects.</td>
            <td style="width: 70px">âœ…</td>
        </tr>
    </tbody>
</table>

<p>*There are no longer duplicate assets, but theyâ€™re not part of the project that utilizes them</p>

<h3 id="solution-3---custom-angular-builders">Solution 3 - Custom Angular builders</h3>

<p>A solution I came across was to copy the assets after a build into the <code class="language-plaintext highlighter-rouge">dist</code>-folder using a script in the <code class="language-plaintext highlighter-rouge">package.json</code> file, but for obvious reasons that wouldnâ€™t work easily when managing different apps.
Neither would it work with the dev-server, so I didnâ€™t even go there.
Including assets by adding them to the build targetâ€™s assets array is how Angular itself prescribes to solve this problem, so letâ€™s keep that.
However, I still wanted to change the <code class="language-plaintext highlighter-rouge">angular.json</code> file (and other files) as minimally as possible.</p>

<p>Enter Angular 8 and the stable version of the CLI Builder API!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€ ğŸ“‚apps
â”‚  â””â”€ ğŸ“‚my-app
â”‚     â”œâ”€ ğŸ“‚src
â”‚     â”‚  â”œâ”€ ğŸ“‚assets
â”‚     â”‚  â”‚  â””â”€ ğŸ“„include.json
â”‚     â”‚  â”œâ”€ ğŸ“‚app
â”‚     â”‚  â”‚  â””â”€ ...
â”‚     â”‚  â”œâ”€ ğŸ“„index.html
â”‚     â”‚  â””â”€ ...
â”‚     â””â”€ ...
â””â”€ ğŸ“‚libs
   â”œâ”€ ğŸ“‚neighbourhood-dogs-lib
   â”‚  â”œâ”€ ğŸ“‚src
   â”‚  â”‚  â”œâ”€ ğŸ“‚assets
   â”‚  â”‚  â”‚  â””â”€ ğŸ“‚images
   â”‚  â”‚  â”‚     â”œâ”€ ğŸ–¼my-dog.jpg
   â”‚  â”‚  â”‚     â””â”€ ğŸ–¼pete-dog.jpg
   â”‚  â”‚  â”œâ”€ ğŸ“‚lib
   â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„dog-list.component.ts
   â”‚  â”‚  â”‚  â””â”€ ğŸ“„dog.component.ts
   â”‚  â”‚  â””â”€ ...
   â”‚  â””â”€ ...
   â””â”€ ğŸ“‚neighbourhood-cats-lib
      â”œâ”€ ğŸ“‚src
      â”‚  â”œâ”€ ğŸ“‚assets
      â”‚  â”‚  â””â”€ ğŸ“‚images
      â”‚  â”‚     â””â”€ ğŸ–¼karen-cat.jpg
      â”‚  â”œâ”€ ğŸ“‚lib
      â”‚  â”‚  â”œâ”€ ğŸ“„cat-list.component.ts
      â”‚  â”‚  â””â”€ ğŸ“„cat.component.ts
      â”‚  â””â”€ ...
      â””â”€ ...
</code></pre></div></div>

<p>Using this new API, I was able to construct two new builders to replace the default <code class="language-plaintext highlighter-rouge">@angular-devkit/build-angular:browser</code> and <code class="language-plaintext highlighter-rouge">@angular-devkit/build-angular:dev-server</code> while still utilizing them.
These custom builders take the same options as the ones they replace and work more like a hook than a new builder.
The idea is to update the build target in the in-memory workspace before the default builder is actually executed.
Simply put, the custom builders read <code class="language-plaintext highlighter-rouge">angular.json</code>, update the assets array and pass the updated version to the original builders.
A single configuration file (<code class="language-plaintext highlighter-rouge">include.json</code> in the applicationâ€™s <code class="language-plaintext highlighter-rouge">assets</code> directory) lets the custom builder read which libraries the application depends on.
It then determines its source directory using the workspace configuration file (<code class="language-plaintext highlighter-rouge">angular.json</code>) and adds the following to the assets array:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"glob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**/*"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./libs/neighbourhood-dogs-lib/src/assets"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./assets"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>If I wanted my-app to also include the neighbourhoodâ€™s cats, then I could change <code class="language-plaintext highlighter-rouge">include.json</code> to also include <code class="language-plaintext highlighter-rouge">neighbourhood-cats-lib</code> and the next build would add the following to the assets array:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"glob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**/*"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./libs/neighbourhood-dogs-lib/src/assets"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./assets"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"glob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**/*"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./libs/neighbourhood-cats-lib/src/assets"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./assets"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Though Iâ€™d rather set the option that these assets are placed in sub folders, so I added that into the builders too.
That made the assets array into the following, which prevents libs from overwriting other assets:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"glob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**/*"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./libs/neighbourhood-dogs-lib/src/assets"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./assets/neighbourhood-dogs-lib"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="nl">"glob"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**/*"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./libs/neighbourhood-cats-lib/src/assets"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"output"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./assets/neighbourhood-cats-lib"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><em>Note: The reason this <code class="language-plaintext highlighter-rouge">include.json</code> file is in the <code class="language-plaintext highlighter-rouge">assets</code> directory was to make a custom <code class="language-plaintext highlighter-rouge">HttpTranslateLoader</code> (using a simple RxJS <code class="language-plaintext highlighter-rouge">mergeMap</code> and <code class="language-plaintext highlighter-rouge">forkJoin</code>) read that same file to determine which translation assets to download.</em></p>

<p>Letâ€™s go through the criteria one more time:</p>

<table>
    <tbody>
        <tr>
            <td>Assets should exist only once, preferably in the project that utilizes them.</td>
            <td style="width: 70px">âœ…</td>
        </tr>
        <tr>
            <td>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</td>
            <td style="width: 70px">âœ…*</td>
        </tr>
        <tr>
            <td>A dependency on another library should be added with minimal change and with minimal affected projects.</td>
            <td style="width: 70px">âœ…</td>
        </tr>
    </tbody>
</table>

<p>*Because the assets are inside the libraryâ€™s directory, the dependency graph can detect a change and determine the affected applications</p>

<p>There is one caveat though: the dependency graph will only detect dependencies if the library is also imported in the code of the application, which would be the case mostly.
If thatâ€™s not the case (for example if the library containing assets has no components/services/modules/â€¦), simply create an empty module in it and import it in the applications that depend on these assets.</p>

<h2 id="sharing-is-caring">Sharing is caring</h2>

<p>Because I care about the community I packaged this solution and published it to npm.
Itâ€™s called <code class="language-plaintext highlighter-rouge">ngx-library-assets</code> and is available at <a href="https://www.npmjs.com/package/ngx-library-assets" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/ngx-library-assets</a>.
Install it as a <code class="language-plaintext highlighter-rouge">devDependency</code>.</p>

<p><em>Disclaimer: I do not actually own a dog, or a cat. Neither do Pete and Karen. I donâ€™t even have any neighbours named Pete or Karen.</em></p>

        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/architecture/2019/09/13/angular-include-assets-libraries.html&title=Lessons learned on including library assets into Angular applications&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=Lessons learned on including library assets into Angular applications&url=https://ordina-jworks.github.io/architecture/2019/09/13/angular-include-assets-libraries.html&via=lifeatordinabe&related=lifeatordinabe" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/architecture/2019/09/13/angular-include-assets-libraries.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/orjan-de-smet" class="image spotlight-image" title="">
            <img src="/img/author/orjan-de-smet.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Orjan is a Frontend Developer at Ordina Belgium, keen on building structured quality applications with a focus on Reactive Programming and dealing with it. He is always interested to try new technologies and to share his experiences. In his spare time, he enjoys a good game or movie or dining out.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://twitter.com/lifeatordinabe" target="_blank">
                <i class="fa fa-fw fa-twitter"></i><span>Twitter</span>
            </a>
        </li>
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2020 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/2019-09-09-angular-include-assets-libraries/tpryd.jpg";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
