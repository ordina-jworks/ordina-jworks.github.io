<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Protractor testing in Ionic app - Yannick Vergeylen">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/ionic-protractor.png"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/ionic/2016/04/07/Ionic-Protractor.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Protractor testing in Ionic app - Yannick Vergeylen"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/ionic-protractor.png"/>

    
    <title>Protractor testing in Ionic app - Yannick Vergeylen &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/meet-the-team">Meet the team</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="https://join.ordina-jworks.io/">JOIN</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>Protractor testing in Ionic app</h2>
                

                
                    Posted Apr 7, 2016


    in <a href="/categories/ionic/">Ionic</a>



    by
    
        <a href="/author/yannick-vergeylen/">Yannick Vergeylen</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/ionic/">Ionic</a>, 
    
        <a href="/tags/protractor/">Protractor</a>, 
    
        <a href="/tags/pageobjects/">PageObjects</a>, 
    
        <a href="/tags/functional-modules/">Functional modules</a>
    

                

                

            </div>
        </header>
    </section>


    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <h3 id="using-protractor-in-an-ionic-app">Using Protractor in an ionic app</h3>

<p>Since a few days I’ve been playing around with <a href="https://angular.github.io/protractor/#/">Protractor</a>
and I am also involved on an internal project in which an Ionic app has to be created.
So I thought:</p>

<blockquote>
  <p>Why not use Protractor in my Ionic app?</p>
</blockquote>

<p>So here we are.</p>

<p>It’s not hard to get started and I will explain how I got it working.
For the full example please refer to <a href="http://learn.ionicframework.com/formulas/Protractor">the ionic documentation</a></p>

<h2 id="1-getting-started">1. Getting started</h2>

<p>First of all you need <a href="https://nodejs.org/">Node.js</a>.</p>

<p>When Node.js is installed you should install Ionic and Cordova using npm (Node Package Manager):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm <span class="nb">install</span> <span class="nt">-g</span> cordova ionic</code></pre></figure>

<p>I personally needed an app with tabs, but you can also start a blank app or an app with a side menu:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ionic start &lt;your app name&gt; tabs</code></pre></figure>

<p><em>You can also choose <code class="language-plaintext highlighter-rouge">blank</code> or <code class="language-plaintext highlighter-rouge">sidemenu</code> instead of <code class="language-plaintext highlighter-rouge">tabs</code></em></p>

<h2 id="2-running-the-app-in-the-browser">2. Running the app in the browser</h2>

<p>Once the Ionic app has been generated, you can run t it in the browser using the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> &lt;your app name&gt;
ionic serve</code></pre></figure>

<blockquote>
  <p>It’s worth noting that Ionic has live reload built in <strong>by default</strong>.
So any changes will be immediately
reflected in the browser.</p>
</blockquote>

<p>To view the application using the iOS and Android styling applied you can use the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"> ionic serve <span class="nt">-lab</span> </code></pre></figure>

<p>There are many more awesome things you can do with the Ionic CLI.
If you want to know more about the CLI you can find it in <a href="http://ionicframework.com/docs/cli/">the Ionic documentation</a>.</p>

<h2 id="3-structuring-the-application">3. Structuring the application</h2>
<p>At this moment you are set up with an Ionic starter app.
The first thing I did was refactor the code from technical to functional modules.</p>

<div class="row">
    <div class="4u">
        <img class="image fit" src="/img/2016-04-07-ionic-protractor/technical.jpg" alt="Technical modules" />
    </div>
    <div class="1u align-center">--&gt;</div>
    <div class="4u$">
        <img class="image fit" src="/img/2016-04-07-ionic-protractor/functional.jpg" alt="Functional modules" />
    </div>
</div>

<blockquote>
  <p>I strongly advise to use functional modules, it’s easier to work with.</p>
</blockquote>

<p>Related code should be in one folder and when testing you can use the same structure to test each module separately while coding.</p>

<blockquote>
  <p>You’ll find yourself navigating less trough your open tabs or a tree-view.</p>
</blockquote>

<p>Additionally, it makes your code more comprehensible to other developers.
<a href="https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md">The style guide from John Papa</a>
 on how to structure AngularJS applications is a very good resource.</p>

<h2 id="4-sign-in-page">4. Sign-in page</h2>
<p><em>The one we’ll be testing</em></p>

<p>After refactoring, I implemented a sign-in page, which has no access to the tabs.
The code can be seen below.
If you work in functional modules like I do, it is as easy as referring to the controller and the service from index.html, then pass <code class="language-plaintext highlighter-rouge">starter.sign-in</code> as a module to your application.</p>

<p><code class="language-plaintext highlighter-rouge">sign-in/sign-in-controller.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">angular</span>
        <span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">starter.sign-in</span><span class="dl">'</span><span class="p">,[])</span>
        <span class="p">.</span><span class="nf">controller</span><span class="p">(</span><span class="dl">'</span><span class="s1">SignInCtrl</span><span class="dl">'</span><span class="p">,</span><span class="nx">SignInCtrl</span><span class="p">);</span>

    <span class="nx">SignInCtrl</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$scope</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">$state</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">SignInService</span><span class="dl">'</span><span class="p">];</span>

    <span class="kd">function</span> <span class="nf">SignInCtrl</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span><span class="nx">$state</span><span class="p">,</span><span class="nx">SignInService</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">signIn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">SignInService</span><span class="p">.</span><span class="nf">signIn</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">user</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
                        <span class="nx">$state</span><span class="p">.</span><span class="nf">go</span><span class="p">(</span><span class="dl">'</span><span class="s1">tab.rooms</span><span class="dl">'</span><span class="p">);</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="nx">$scope</span><span class="p">.</span><span class="nx">incorrect</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">})</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">})();</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">sign-in/signin.html</code>:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;ion-view</span> <span class="na">view-title=</span><span class="s">"Sign in"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ion-content&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">"frmLogin"</span> <span class="na">novalidate</span> <span class="na">ng-cloak</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ion-list&gt;</span>
                <span class="nt">&lt;ion-item</span> <span class="na">class=</span><span class="s">"item item-input item-floating-label"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;label&gt;</span>
                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-label"</span><span class="nt">&gt;</span>Username<span class="nt">&lt;/span&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">ng-model=</span><span class="s">"user.username"</span> <span class="na">ng-required=</span><span class="s">"true"</span> <span class="na">placeholder=</span><span class="s">"Username"</span> <span class="na">id=</span><span class="s">"username"</span> <span class="na">name=</span><span class="s">"username"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"assertive"</span> <span class="na">ng-if=</span><span class="s">"frmLogin.$submitted || frmLogin.username.$touched"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">ng-if=</span><span class="s">"frmLogin.username.$error.required"</span><span class="nt">&gt;</span>Username is required<span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">ng-if=</span><span class="s">"frmLogin.username.$error.email"</span><span class="nt">&gt;</span>Username is not valid<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/ion-item&gt;</span>
                <span class="nt">&lt;ion-item</span> <span class="na">class=</span><span class="s">"item item-input item-floating-label"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;label&gt;</span>
                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-label"</span><span class="nt">&gt;</span>Password<span class="nt">&lt;/span&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">ng-model=</span><span class="s">"user.password"</span> <span class="na">ng-minlength=</span><span class="s">"4"</span> <span class="na">ng-required=</span><span class="s">"true"</span> <span class="na">placeholder=</span><span class="s">"Password"</span> <span class="na">id=</span><span class="s">"password"</span> <span class="na">name=</span><span class="s">"password"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"assertive"</span> <span class="na">ng-if=</span><span class="s">"frmLogin.$submitted || frmLogin.password.$touched"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"frmLogin.password.$error.required"</span><span class="nt">&gt;</span>Password is required<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/ion-item&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"padding"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"assertive"</span> <span class="na">ng-if=</span><span class="s">"incorrect"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div&gt;</span>Username or password is incorrect.<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"btnSignIn"</span> <span class="na">ng-disabled=</span><span class="s">"frmLogin.$invalid"</span> <span class="na">class=</span><span class="s">"button button-full button-positive"</span> <span class="na">ng-click=</span><span class="s">"signIn()"</span><span class="nt">&gt;</span>
                        Sign in
                    <span class="nt">&lt;/button&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/ion-list&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;/ion-content&gt;</span>
<span class="nt">&lt;/ion-view&gt;</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">sign-in/sign-in.service.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">angular</span>
        <span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">starter.sign-in</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">factory</span><span class="p">(</span><span class="dl">'</span><span class="s1">SignInService</span><span class="dl">'</span><span class="p">,</span> <span class="nx">SignInService</span><span class="p">);</span>

    <span class="nx">SignInService</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">$timeout</span><span class="dl">'</span><span class="p">];</span>

    <span class="kd">function</span> <span class="nf">SignInService</span> <span class="p">(</span><span class="nx">$timeout</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">_user</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">yannick@gmail.com</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">pass</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1234</span><span class="dl">'</span>
        <span class="p">};</span>

        <span class="kd">function</span> <span class="nf">signIn</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nf">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="c1">//return !!(user.username === _user.email &amp;&amp; user.password == _user.pass);</span>
            <span class="p">},</span><span class="mi">2000</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="na">signIn</span> <span class="p">:</span> <span class="nx">signIn</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">})();</span></code></pre></figure>

<p>Next you need to provide a state, so add the following in <code class="language-plaintext highlighter-rouge">app.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nf">state</span><span class="p">(</span><span class="dl">'</span><span class="s1">signin</span><span class="dl">'</span><span class="p">,{</span>
    <span class="na">url</span><span class="p">:</span><span class="dl">'</span><span class="s1">/signin</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">templateUrl</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sign-in/sign-in.html</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">controller</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SignCtrl</span><span class="dl">'</span>
<span class="p">)}</span></code></pre></figure>

<p>and change redirect to <code class="language-plaintext highlighter-rouge">/signin</code> by default:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$urlRouterProvider</span><span class="p">.</span><span class="nf">otherwise</span><span class="p">(</span><span class="dl">'</span><span class="s1">/signin</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<p><em>For complete authentication you should check the authenticated state when changing pages,
but that’s not in the scope of this blog</em></p>

<h2 id="5-preparing-protractor">5. Preparing protractor</h2>

<p>The sign-in part is the one I am going to test with Protractor.
First thing to do, is to install Protractor on your system:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm <span class="nb">install</span> <span class="nt">-g</span> protractor</code></pre></figure>

<p>The <code class="language-plaintext highlighter-rouge">webdriver manager</code> is a helper tool to easily get a Selenium server running.
Run the following commands in order to start it:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">webdriver-manager update
webdriver-manager start</code></pre></figure>

<p>To keep your code clean, you could put tests in a dedicated folder, but many argue against it.</p>

<blockquote>
  <p>Since I work in functional modules, tests of these modules should live in the module itself.</p>
</blockquote>

<p>Next I created a Protractor configuration file in the root of my project called <code class="language-plaintext highlighter-rouge">protractor.config.js</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">touch </span>protractor.config.js</code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">protractor.config.js</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">exports</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">capabilities</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">browserName</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">chrome</span><span class="dl">'</span>
    <span class="p">},</span>
    <span class="na">specs</span><span class="p">:</span> <span class="p">[</span>
        <span class="dl">'</span><span class="s1">www/sign-in/sign-in.spec.js</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="na">jasmineNodeOpts</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">showColors</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">defaultTimeoutInterval</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
        <span class="na">isVerbose</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="na">allScriptsTimeout</span><span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
    <span class="na">onPrepare</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">browser</span><span class="p">.</span><span class="nx">driver</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://localhost:8100</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<blockquote>
  <p>Don’t forget to set the correct URL to your running app.
If not, you’ll see many errors, except that you might be referring to a wrong URL</p>
</blockquote>

<h2 id="6-preparing-the-tests">6. Preparing the tests</h2>

<p>As you can see, there is already a spec file defined in the protractor config file, so let’s create it:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd </span>www/sign-in/
<span class="nb">touch </span>sign-in.spec.js</code></pre></figure>

<p>In the newly created file, you can start writing your tests.
If everything went well, you can simply add another test and it should validate to true.
It only tests if the first page you see, is the login page:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nf">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Signing in</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should start on sign-in view</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nf">expect</span><span class="p">(</span><span class="nx">browser</span><span class="p">.</span><span class="nf">getTitle</span><span class="p">()).</span><span class="nf">toEqual</span><span class="p">(</span><span class="dl">'</span><span class="s1">Sign in</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<p>Basically, we define a <code class="language-plaintext highlighter-rouge">describe</code> function which will describe the whole scope of our specs.
Every ‘it’ function is called a spec.
We only created one for now.
As you can see this is a very readable way of testing.
We expect the browsers title to be equal to ‘Sign in’.
If the <code class="language-plaintext highlighter-rouge">expect</code> statement evaluates to <code class="language-plaintext highlighter-rouge">true</code>, the spec has passed without failures, otherwise it will have a failure.</p>

<blockquote>
  <p>Feel free to change <code class="language-plaintext highlighter-rouge">Sign in</code> to something else to fail the test.</p>
</blockquote>

<p>To run the tests, we can execute the following command in the folder of our <code class="language-plaintext highlighter-rouge">protractor.config.js</code> file:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">protractor protractor.config.js</code></pre></figure>

<p>Running this command will read the config file and run all the spec-files defined.
You will get some output in the command line.
At the end you’ll get a summary like <strong>1 specs, 0 failures Finished in x.xxx seconds</strong>.</p>

<p>This is a simple test but it doesn’t show the full potential of Protractor at all.
Lets add a new spec as part of the describe.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should be unable to click Sign-in button when fields are empty</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">btnSignIn</span><span class="dl">'</span><span class="p">));</span>
    <span class="nf">expect</span><span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nf">getAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">)).</span><span class="nf">toEqual</span><span class="p">(</span><span class="dl">'</span><span class="s1">true</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>So here we test the availability of the sign-in button when the fields are empty.
Next is to test if the button becomes available if the fields are filled in with valid data.
So lets add another test:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should be possible to click Sign-in button when fields are filled in</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">btnSignIn</span><span class="dl">'</span><span class="p">));</span>
    <span class="kd">var</span> <span class="nx">txtUsername</span> <span class="o">=</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">));</span>
    <span class="kd">var</span> <span class="nx">txtPassword</span> <span class="o">=</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">));</span>
    <span class="nx">txtUsername</span><span class="p">.</span><span class="nf">sendKeys</span><span class="p">(</span><span class="dl">'</span><span class="s1">yannick@gmail.com</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">txtPassword</span><span class="p">.</span><span class="nf">sendKeys</span><span class="p">(</span><span class="dl">'</span><span class="s1">1234</span><span class="dl">'</span><span class="p">);</span>
    <span class="nf">expect</span><span class="p">(</span><span class="nx">button</span><span class="p">.</span><span class="nf">getAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">)).</span><span class="nf">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>All these tests should pass correctly in protractor.</p>

<h2 id="7-page-object-pattern">7. Page Object Pattern</h2>

<p>You might have noticed that your tests run synchronous after each other.
In this scenario this might be useful, but sometimes you need to start with a ‘clean page’ which would mean you need to duplicate a lot of code (for finding the button and text-fields).</p>

<blockquote>
  <p>When you are working in an agile team, it is quite common that requirements or user stories change.
This can implicate you’ll have to change a lot of duplicated code.
How can we work around that.</p>
</blockquote>

<p>The solution is called the <strong>page object pattern</strong>.
The general idea is to put your page in a JavaScript object.
Lets dive into <code class="language-plaintext highlighter-rouge">sign-in.page.js</code>.
This file should also be put into the module folder:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">SignInPage</span> <span class="o">=</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">browser</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://localhost:8100/signin</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">SignInPage</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nf">create</span><span class="p">({},</span> <span class="p">{</span>
    <span class="na">txtUsername</span><span class="p">:</span> <span class="p">{</span> <span class="na">get</span><span class="p">:</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">username</span><span class="dl">'</span><span class="p">));</span> <span class="p">}},</span>
    <span class="na">txtPassword</span><span class="p">:</span> <span class="p">{</span> <span class="na">get</span><span class="p">:</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">password</span><span class="dl">'</span><span class="p">));</span> <span class="p">}},</span>
    <span class="na">btnSignIn</span><span class="p">:</span> <span class="p">{</span> <span class="na">get</span><span class="p">:</span> <span class="nf">function </span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nf">element</span><span class="p">(</span><span class="nx">by</span><span class="p">.</span><span class="nf">id</span><span class="p">(</span><span class="dl">'</span><span class="s1">btnSignIn</span><span class="dl">'</span><span class="p">));</span> <span class="p">}},</span>
    <span class="na">typeUsername</span><span class="p">:</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span> <span class="nf">function </span><span class="p">(</span><span class="nx">keys</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">txtUsername</span><span class="p">.</span><span class="nf">sendKeys</span><span class="p">(</span><span class="nx">keys</span><span class="p">);</span> <span class="p">}},</span>
    <span class="na">typePassword</span><span class="p">:</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span> <span class="nf">function </span><span class="p">(</span><span class="nx">keys</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">txtPassword</span><span class="p">.</span><span class="nf">sendKeys</span><span class="p">(</span><span class="nx">keys</span><span class="p">);</span> <span class="p">}},</span>
    <span class="na">clickSignIn</span><span class="p">:</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span> <span class="nf">function </span><span class="p">(</span><span class="nx">keys</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">btnSignIn</span><span class="p">.</span><span class="nf">click</span><span class="p">();</span> <span class="p">}}</span>
<span class="p">});</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">SignInPage</span><span class="p">;</span></code></pre></figure>

<p>In the constructor we make sure our browser opens the signin page by passing the correct URL.
Then we use the <code class="language-plaintext highlighter-rouge">prototype</code> method to link our HTML elements with the object.
Finally, it is wise to create helper methods for basic functionality, such as filling in a username, in case you ever would want to change that behaviour.
Then you only need to change that line and all your tests will still pass.</p>

<blockquote>
  <p>Using logical method names keeps your tests readable which is what you’ll want when you look back in a few months.</p>
</blockquote>

<p>We can now change our <code class="language-plaintext highlighter-rouge">sign-in.spec.js</code> to this:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">SignInPage</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./sign-in.page.js</span><span class="dl">'</span><span class="p">);</span>
<span class="nf">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Signing in</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">page</span><span class="p">;</span>
    <span class="nf">beforeEach</span><span class="p">(</span><span class="nf">function </span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">page</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SignInPage</span><span class="p">();</span>
    <span class="p">});</span>
    <span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should be unable to click Sign-in button when fields are empty</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nf">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">txtUsername</span><span class="p">.</span><span class="nf">getText</span><span class="p">()).</span><span class="nf">toEqual</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
        <span class="nf">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">txtPassword</span><span class="p">.</span><span class="nf">getText</span><span class="p">()).</span><span class="nf">toEqual</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
        <span class="nf">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">btnSignIn</span><span class="p">.</span><span class="nf">getAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">)).</span><span class="nf">toEqual</span><span class="p">(</span><span class="dl">'</span><span class="s1">true</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nf">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should be possible to click Sign-in button when fields are filled in</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">page</span><span class="p">.</span><span class="nf">typeUsername</span><span class="p">(</span><span class="dl">'</span><span class="s1">yannick@gmail.com</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">page</span><span class="p">.</span><span class="nf">typePassword</span><span class="p">(</span><span class="dl">'</span><span class="s1">1234</span><span class="dl">'</span><span class="p">);</span>
        <span class="nf">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">btnSignIn</span><span class="p">.</span><span class="nf">getAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">)).</span><span class="nf">toBe</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="nx">page</span><span class="p">.</span><span class="nf">clickSignIn</span><span class="p">();</span>
        <span class="nf">expect</span><span class="p">(</span><span class="nx">browser</span><span class="p">.</span><span class="nf">getTitle</span><span class="p">()).</span><span class="nf">toEqual</span><span class="p">(</span><span class="dl">'</span><span class="s1">Rooms</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span></code></pre></figure>

<p>What changed?
We created a page variable and before each <code class="language-plaintext highlighter-rouge">it</code> we assigned a new SignInPage object to the page variable.
This way, your page gets loaded again before running every spec.
This means it always returns in the same state.
Now you can create your specs as user stories.</p>

<h2 id="8-conclusion">8. Conclusion</h2>

<p>Protractor is an awesome way to test your app’s functionality.
Using a descriptive syntax you can emulate almost every user action and run trough the whole app in no time, again and again.
Using Protractor, you won’t have to spend a lot of time testing your application manually,
and you can focus on feature development without having to worry about accidentally breaking some functionality.
Protractor will ensure that your user gets a working app without frustrations!</p>

        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/ionic/2016/04/07/Ionic-Protractor.html&title=Protractor testing in Ionic app&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=Protractor testing in Ionic app&url=https://ordina-jworks.github.io/ionic/2016/04/07/Ionic-Protractor.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/ionic/2016/04/07/Ionic-Protractor.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/yannick-vergeylen/" class="image spotlight-image" title="">
            <img src="/img/author/yannick-vergeylen.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Yannick is a young and driven software developer. Widely interested and with a studious attitude he keeps looking for new ways to improve the web with better software and experiences.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2023 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/ionic-protractor.png";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
