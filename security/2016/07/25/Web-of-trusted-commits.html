<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A web of trusted commits - Martin Kwee">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/digitally-signing-your-json-documents.png"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/security/2016/07/25/Web-of-trusted-commits.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="A web of trusted commits - Martin Kwee"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/digitally-signing-your-json-documents.png"/>

    
    <title>A web of trusted commits - Martin Kwee &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/meet-the-team">Meet the team</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="https://join.ordina-jworks.io/">JOIN</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>A web of trusted commits</h2>
                

                
                    Posted Jul 25, 2016


    in <a href="/categories/security/">Security</a>



    by
    
        <a href="/author/martin-kwee/">Martin Kwee</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/security/">Security</a>, 
    
        <a href="/tags/git/">Git</a>, 
    
        <a href="/tags/encryption/">Encryption</a>, 
    
        <a href="/tags/digital-signature/">Digital Signature</a>, 
    
        <a href="/tags/cryptography/">Cryptography</a>
    

                

                

            </div>
        </header>
    </section>


    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <h2 id="who-do-you-trust">Who Do You Trust?</h2>
<p>When you’re building software with people from around the world, it’s important to validate that commits and tags are coming from an identified source. By using a distributed revision control system like Git, anyone can have an offline copy of your project’s code repository. In theory having a central repository is not necessary, but it can be used to provide an “official” source from which other developers can clone from and work on. These other floating repositories may contain malicious code because, unfortunately, it is remarkably easy to fake your identity when committing code using Git.</p>

<p>The following command allows any individual with bad intentions to commit (malicious) code under your name, meaning that you will get the blame for the backdoor or exploit “you” committed:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  <span class="c"># Individual commit.
</span>
  <span class="nv">$ </span>git commit <span class="nt">-a</span> <span class="nt">-m</span> <span class="s2">"a message"</span> <span class="nt">--author</span> <span class="s2">"Sherlock H. &lt;sherlock.h@bakerstreet.org&gt;"</span>

  <span class="c"># Global settings.
</span>
  <span class="nv">$ </span>git config <span class="nt">--global</span> user.name <span class="s1">'Sherlock H.'</span>
  <span class="nv">$ </span>git config <span class="nt">--global</span> user.email sherlock.h@bakerstreet.org
  </code></pre></figure>

<h2 id="ensuring-trust">Ensuring Trust</h2>

<p>This blog post tells the story of Sherlock H. Sherlock is a witty developer who holds any security-related topic very close to his heart. After a fair amount of pondering about how he could solve the problem of black-hearted developers impersonating his personality, he decided to add <strong>a Digital Signature</strong> to his commits. By adding a signature Sherlock can finally sleep soundly at night because the signature indicates that he really issued the commit and that it has not been tampered with since he sent it. Moreover it can be used to trace the origin of malicious code that has made its way into a repository. The signature also assures non-repudiation, meaning that it becomes difficult for the signer to deny having signed something because the Digital Signature is unique to both the commit and the signer, and binds them together. Sherlock can now wholeheartedly vouch for the commit.</p>

<p>Consider the following scenario:</p>

<blockquote>
  <p>Sherlock wants to send an urgent message to his fellow developer John W. telling that their application has been compromised by Jim M, a criminal mastermind who only has unkind intentions. John wants the guarantee that the message he received is sent by Sherlock and has not been tampered with by Jim.</p>
</blockquote>

<p>In order to securely exchange messages, both Sherlock and John will make use of their <strong>Key Pairs</strong>. A Key Pair consists of a <strong>Public and Private Key</strong> which are two unique mathematically related cryptographic keys. As its name suggests, the Public Key is made available to everyone by handing out copies or sharing them through a publicly accessible repository. The Private Key however must be kept confidential to its respective owner.</p>

<p>Sherlock and John can do the following with the use of their Key Pair:</p>

<ul>
  <li><strong>Signing</strong>
    <ul>
      <li>The message is still readable to everyone.</li>
      <li>Guarantee of the sender’s identity (aka Sherlock).</li>
      <li>Guarantee that the message has not been tampered with since it has been signed by the sender (aka Sherlock).</li>
    </ul>
  </li>
  <li><strong>Encryption</strong>
    <ul>
      <li>The message is only readable by the designated recipient (aka John).</li>
      <li>No guarantee of the sender’s identity (aka Sherlock).</li>
      <li>Encryption can be done <strong>symmetrically</strong> by using a Shared Secret Key, a single key is then used for both encryption and decryption. <strong>Asymmetrical</strong> encryption (aka Public Key encryption) with a Public/Private Keypair uses one key for encryption and another for decryption. Note that the advantages and challenges of using either encryption type is beyond the scope of this blog post.</li>
    </ul>
  </li>
</ul>

<h2 id="enforcing-trust">Enforcing Trust</h2>

<p>Sherlock will combine a digital signature with encryption to convince John that his message is trustworthy.</p>

<ol>
  <li>
    <p>Sherlock wants to send the following message to John: <code class="language-plaintext highlighter-rouge">Data! Data! Data! I can’t make bricks without clay.</code>. He calculates the <strong>Hash</strong> of this message by applying a publicly known hashing algorithm to the message. The calculated hash by using the SHA-256 hashing algorithm is <code class="language-plaintext highlighter-rouge">d6ba26816599a75310c4c263126d4b44979c7026f90e1db8e9b317d6658f3811</code>. The hash value is unique to the hashed data.</p>
  </li>
  <li>
    <p>Sherlock encrypts the Hash with his Private Key. This encrypted Hash together with a certificate containing additional information about the sender forms the Digital Signature. The reason why the Hash is encrypted and not the entire message, is that a hash function can convert an arbitrary input into a fixed length value which is usually much shorter than the original message. This saves time since hashing is much faster than signing.</p>
  </li>
  <li>
    <p>Sherlock sends the original message and its Digital Signature to John.</p>
  </li>
  <li>
    <p>John receives the message and Digital Signature.</p>
  </li>
  <li>
    <p>Whatever is encrypted with a Public Key can only be decrypted by using its corresponding Private Key and vice versa. Therefore John uses Sherlock’s Public Key to decrypt the Signature.</p>
  </li>
  <li>
    <p>John also re-calculates the Hash of the original message by applying the same hashing algorithm as Sherlock.</p>
  </li>
  <li>
    <p>John compares the Hash he calculated himself and the decrypted Hash received with Sherlock’s message.
If they’re identical he knows the message has not been tampered with during transit.
Should the message been compromised by Jim, then John would have calculated a different Hash than the encrypted Hash that Sherlock has sent along with his message.</p>
  </li>
</ol>

<p><img class="image fit" alt="Digital Signature" src="/img/web-of-trusted-commits/digital_signature.png" /></p>

<h2 id="creating-an-identity">Creating An Identity</h2>

<p>In order to sign his commits, Sherlock decided to use <strong>Gnu Privacy Guard (GPG)</strong> as his weapon of choice. GPG is a complete and free implementation of the OpenPGP standard. It allows to encrypt and sign data and communication, features a versatile key management system as well as access modules for all kinds of public key directories.</p>

<ul>
  <li>
    <p>Download and install GPG from the <a href="https://www.gnupg.org/download/">official website</a></p>
  </li>
  <li>
    <p>Open a command prompt</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">      <span class="c"># Generate a new Key Pair.
</span>
      <span class="nv">$ </span>gpg <span class="nt">--gen-key</span>
      </code></pre></figure>

<ul>
  <li>
    <p>Sherlock accepted the default <code class="language-plaintext highlighter-rouge">RSA and RSA</code> key. RSA is a widely-used asymmetric encryption algorithm and is named after Ron Rivest, Adi Shamir and Len Adleman who invented it in 1977. Should you be interested in more mathematical details how this algorithm works, I can highly recommend watching <a href="https://www.youtube.com/watch?v=wXB-V_Keiu8">“Public Key Cryptography: RSA Encryption Algorithm”</a> on YouTube.</p>
  </li>
  <li>
    <p>Enter the desired key size. I recommend the <code class="language-plaintext highlighter-rouge">maximum key size of 4096 bits</code> because they provide far better long-term security. While the default of 2048 bits is secure now, it won’t be in the future. 1024 bit keys are already considered within the range of being breakable and while technology advances 2048 bit keys will also become breakable. Eventually 4096 bit keys will be broken too, but that will be so far in the future that better encryption algorithms will also likely have been developed by then.</p>
  </li>
  <li>
    <p>Sherlock accepted the <code class="language-plaintext highlighter-rouge">default expiration</code> for his key.</p>
  </li>
  <li>
    <p>He entered his <code class="language-plaintext highlighter-rouge">real name and email address</code>. Sherlock provided the verified email address for his GitHub account. This will make it very easy to link his account with his Public Key.</p>
  </li>
  <li>
    <p>Provide a <code class="language-plaintext highlighter-rouge">secure passphrase</code>. Choose wisely and be sure to remember it because else the key cannot be used and any data encrypted using that key will be lost.</p>
  </li>
  <li>
    <p>Congratulations, a newly fresh Key Pair should be generated now.</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">      <span class="c"># List all keys.
</span>
      <span class="nv">$ </span>gpg <span class="nt">--list-keys</span>
        pub   4096R/90C3C3DE 2016-07-24
        uid     Sherlock H &lt;sherlock.h@bakerstreet.org&gt;
        sub   4096R/586B3A7B 2016-07-24
      </code></pre></figure>

<ul>
  <li>Like many other developers, Sherlock is very active on GitHub and would like to link his Public Key with his account. He therefore will need to create a textual version of his Public Key. After having executed the command below, the content of the generated ‘pubkey.txt’ needs to be added to his account as described in the <a href="https://help.github.com/articles/adding-a-new-gpg-key-to-your-github-account/">GitHub Help pages</a>. More details about distributing and registering your Public Key to a key server can be found in the chapter ‘<a href="https://www.gnupg.org/gph/en/manual.html#AEN464">Distributing keys</a>’ of the GPG Users Guide. For other usages like encryption and decryption, please refer to <a href="http://www.dewinter.com/gnupg_howto/english/GPGMiniHowto.html">GPG’s Mini HowTo</a>.</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">    <span class="c"># Export the Public Key to a text file.
</span>
    <span class="nv">$ </span>gpg <span class="nt">--armor</span> <span class="nt">--output</span> pubkey.txt <span class="nt">--export</span> <span class="s1">'Sherlock H'</span>
    </code></pre></figure>

<h2 id="signing-your-work">Signing Your Work</h2>
<p>Once Sherlock generated his Key Pair, he can configure Git to use it for signing commits and tags. Following tools can be used to store a GPG key passphrase in a keychain so he doesn’t have to provide it every time he signs a commit: <a href="https://gpgtools.org/">GPG Suite</a> (Mac) or <a href="https://www.gpg4win.org/">Gpg4win</a> (Windows).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  <span class="c"># Set the signing key by taking your Public Key id as parameter.
</span>
  <span class="nv">$ </span>git config <span class="nt">--global</span> user.signingkey 90C3C3DE

  <span class="c"># Automatically signs every commit.
</span>
  <span class="nv">$ </span>git config <span class="nt">--global</span> commit.gpgsign <span class="nb">true</span>

  <span class="c"># Manually sign a commit.
</span>
  <span class="nv">$ </span>git commit <span class="nt">-S</span> <span class="nt">-m</span> <span class="s2">"some commit message"</span>

  <span class="c"># Verify whether your commit has been signed.
</span>
  <span class="nv">$ </span>git log <span class="nt">--show-signature</span>

    commit 81314da640320c65896a4348842d303a754f37d2
    gpg: Signature made Sun Jul 24 15:02:25 2016 CEST using RSA key ID 90C3C3DE
    gpg: Good signature from <span class="s2">"Sherlock H &lt;sherlock.h@bakerstreet.org&gt;"</span>
    Author: Sherlock H &lt;sherlock.h@bakerstreet.org&gt;
    Date:   Sun Jul 24 15:01:52 2016 +0200

  <span class="c"># Verify all signatures during merge. If the signatures can not be verified then merge will be aborted.
</span>
  <span class="nv">$ </span>git merge <span class="nt">--verify-signatures</span> other_branch
  </code></pre></figure>

<p>Earlier this year GitHub <a href="https://github.com/blog/2144-gpg-signature-verification">announced</a> that they now will show when commits and tags are signed and verified using any of the contributor’s GPG keys upload to GitHub. Keep your eyes open for commits and tags labeled with those green <code class="language-plaintext highlighter-rouge">verified</code> badges.</p>

<h2 id="secure-by-design">Secure-By-Design</h2>
<p>Ordina’s <a href="https://www.ordina.be/themes/security-and-privacy/">Secure-By-Design programme</a> encourages to consider and take account of possible security risks as early as possible in a business process.
So follow Sherlock’s example by embedding and safeguarding security in your daily work as a developer and <strong>Sign Your Work!</strong></p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://help.github.com/categories/gpg/">GitHub’s Help on GPG</a></li>
  <li><a href="https://www.gnupg.org/gph/en/manual/book1.html">The GNU Privacy Handbook</a></li>
  <li><a href="http://www.dewinter.com/gnupg_howto/english/GPGMiniHowto.html">GPG’s Mini HowTo</a></li>
  <li><a href="https://mikegerwitz.com/papers/git-horror-story">“A Git Horror Story”</a> by Mike Gerwitz</li>
  <li><a href="https://www.youtube.com/watch?v=wXB-V_Keiu8">“Public Key Cryptography: RSA Encryption Algorithm”</a></li>
</ul>

        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/security/2016/07/25/Web-of-trusted-commits.html&title=A web of trusted commits&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=A web of trusted commits&url=https://ordina-jworks.github.io/security/2016/07/25/Web-of-trusted-commits.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/security/2016/07/25/Web-of-trusted-commits.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/martin-kwee/" class="image spotlight-image" title="">
            <img src="/img/author/martin-kwee.jpg"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Martin is a Java consultant at Ordina Belgium. He enjoys a good technical challenge and has a strong interest in architecture and eHealth.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2023 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/digitally-signing-your-json-documents.png";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
