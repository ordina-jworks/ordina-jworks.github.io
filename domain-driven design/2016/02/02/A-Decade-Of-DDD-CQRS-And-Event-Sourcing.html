<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
        <meta charset="utf-8">
    <meta name="description" content="We build innovative solutions with Java and JavaScript. To support this mission, we have several Competence Centers. From within those Competence Centers, we provide coaching to the employee and expert advice towards our customer. In order to keep in sync with the latest technologies and the latest trends, we frequently visit conferences around the globe.
">
    <meta name="keywords" content="Ordina,ORAJ,JWorks,Blog,Java,JavaScript,TypeScript,Angular,DevOps">
    <meta name="author" content="Ordina Belgium">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/img/favicons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/img/favicons/favicon-128.png" sizes="128x128" />

    

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A decade of DDD, CQRS and Event Sourcing - Ken Coenen">
    <meta name="twitter:description" content="Ordina JWorks Tech Blog">
    <meta name="twitter:image" content="http://ordina-jworks.github.io/img/DDDEurope2015.jpg"/>

    <!-- Facebook Open Graph -->
    <meta property="og:url" content="http://ordina-jworks.github.io/domain-driven%20design/2016/02/02/A-Decade-Of-DDD-CQRS-And-Event-Sourcing.html"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="A decade of DDD, CQRS and Event Sourcing - Ken Coenen"/>
    <meta property="og:description" content="Ordina JWorks Tech Blog"/>
    <meta property="og:image" content="http://ordina-jworks.github.io/img/DDDEurope2015.jpg"/>

    
    <title>A decade of DDD, CQRS and Event Sourcing - Ken Coenen &mdash; Ordina JWorks Tech Blog</title>
    

        <!-- Styles -->
    <!-- Font awesome CSS -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- Magnific Popup -->
    <link href="/css/magnific-popup.css" rel="stylesheet">
    <!-- Owl carousel -->
    <link href="/css/owl.carousel.css" rel="stylesheet">

    <!-- CSS for this page -->

    <!-- Syntax highlighting -->
    <link href="/css/syntax.css" rel="stylesheet">


    <!--[if lte IE 8]>
    <script src="/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="/css/main.css"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/css/ie9.css"/><![endif]-->
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/ie8.css"/><![endif]-->

    <!-- Custom CSS. Type your CSS code in custom.css file -->
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Vertical timeline -->
	<link rel="stylesheet" href="/css/vertical-timeline/style.css"> <!-- Resource style -->

    <!-- Favicon -->
    <link rel="shortcut icon" href="#">

    <script src="https://use.typekit.net/gzh0mbm.js"></script>
    <script>
        try {
            Typekit.load({async: true});
        } catch (e) {
        }
    </script>
</head>

<body>
<div id="header-image"></div>


<!-- Page Wrapper -->
<div id="page-wrapper">

        <!-- Header -->
    <header id="header">
        <h1>
            <a href="/">
                JWorks Tech Blog
            </a>
        </h1>

        <nav>
            <a href="#menu">Menu</a>
            <form action="/search/" method="get" class="header-search search-form">
                <input type="text" id="search-box-header" name="query" placeholder="Search &hellip;">
            </form>
        </nav>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <div class="inner">
            <h2>Menu</h2>
            <ul class="links">
                <li class="menu-item"><a href="/">Home</a></li>
                <li class="menu-item"><a href="/about">About Us</a></li>
                <li class="menu-item"><a href="/meet-the-team">Meet the team</a></li>
                <li class="menu-item"><a href="/jobs">Jobs</a></li>
                <li class="menu-item"><a href="/search">Search</a></li>
                <li class="menu-item"><a href="/contact">Contact Us</a></li>
            </ul>
            <a href="#" class="close">Close</a>
        </div>
    </nav>

    <section id="banner">
        <header>
            <div class="inner">
                

                <h2>A decade of DDD, CQRS and Event Sourcing</h2>
                

                
                    Posted Feb 2, 2016


    in <a href="/categories/domain-driven-design/">Domain-Driven Design</a>



    by
    
        <a href="/author/ken-coenen/">Ken Coenen</a>
        
    



    <br/>
    <i class="fa fa-tags"></i>
    
        <a href="/tags/domain-driven-design/">Domain-Driven Design</a>, 
    
        <a href="/tags/cqrs/">CQRS</a>, 
    
        <a href="/tags/event-sourcing/">Event Sourcing</a>, 
    
        <a href="/tags/software-craftmanship/">Software Craftmanship</a>
    

                

                

            </div>
        </header>
    </section>


    <section id="wrapper">
        <div class="inner">
            <section id="one" class="wrapper spotlight style1 post-body">
    <div class="inner" style="text-align: left;">
        <div class="content">
            <blockquote>
  <p>Command and Query Responsibility Segregation is the <strong>most misinterpreted pattern</strong> in software design. CQRS doesn’t mean eventual consistency, it’s not about eventing and messaging. It’s not even what most people believe about having separate models for reading and writing.</p>

  <p>In his talk <a href="http://dddeurope.com/2016/greg-young.html">A decade of DDD, CQRS and Event Sourcing</a> on DDDEurope 2016, Greg Young gives us a retrospective over the last ten years practicing CQRS and event sourcing.</p>
</blockquote>

<hr />

<h3 id="cqrs">CQRS?</h3>

<p>Before I go any further, let’s start explaining what CQRS really is. It’s all about <strong>applying a design pattern</strong> when you notice that your class contains both query- and command methods. It’s not a new principle. Bertrand Meyer described <strong>Command-Query Separation</strong> in his book Object-oriented Software Construction as follows:</p>

<blockquote>
  <p>“Every method should either be a command that performs an action, or a query that returns data to the caller, but not both. In other words, Asking a question should not change the answer.”</p>
</blockquote>

<p>We can apply CQRS principles in many levels of our application, but when people talk about CQRS they are really speaking about applying the CQRS pattern to the object that represents the service boundary of the application. The following example illustrates this.</p>

<p><img class="image fit" src="/img/cqrs/customerservice.png" alt="CQRS" /></p>

<p>Although this doesn’t seem very interesting to do at first, architecturally we can do many interesting things by applying this pattern:</p>

<ul>
  <li>One example is that the separation is more explicit and programmers will not find it odd to use <strong>different data models</strong> which use the same data. Reading records from the database must be fast and there’s no problem at all if you can achieve this by using multiple representations of the same data.</li>
  <li>CQRS is also an <strong>enabler for event-based programming models</strong>. It’s common to see CQRS system split into separate services communicating with Event Collaboration. This allows these services to easily take advantage of Event Sourcing.</li>
</ul>

<p>You should be cautious however not to use it everywhere and only in some <strong>Bounded Contexts</strong> that need it, as everyone agrees that applying the CQRS principle adds complexity.</p>

<h3 id="history">History</h3>

<blockquote>
  <p>“When you searched CQRS on Google a decade ago, it thought it was just Cars misspelled.”</p>
</blockquote>

<p>CQRS is not a new concept. You might even say that event sourcing has been around for thousands of years. The ancient Sumerians wrote accounting info on <strong>clay tablets</strong> and baked them. That document stored events in time. Immutable events. And documents are built up of this event information.</p>

<p>As I said earlier, Meyer talked about the principle in his book which was released in 1988.</p>

<p>It’s QCon San Francisco in 2006 which really gave a boost to the popularity of CQRS and event sourcing. Martin Fowler picked up <a href="http://martinfowler.com/bliki/CommandQuerySeparation.html">CommandQuerySeparation in his Bliki</a> and after that, things began to grow.</p>

<p>CQRS is more of a <strong>stepping stone</strong> and you have to put it in its historical context. It was a <strong>natural consequence of what was happening with Domain-Driven Design</strong> at that time. CQRS is not an end goal, it should be seen as a stepping stone for going to an event sourced system.</p>

<h3 id="good-things">Good things</h3>

<p>The community around CQRS and event sourcing is growing to about <strong>3000 people</strong>. More and more domains are involved with event sourcing. In other domains, other added values were discovered. These people had breakthroughs by practicing CQRS, eg. in a warehouse system, instead of denying a user’s request because the system couldn’t handle the requests anymore, it accepts an event and processes it a later time.</p>

<p>Another good thing about event sourcing, once you model events, you are forced to think about the <strong>temporality of systems</strong>: what happens at a specific time? how will this object behave in this situation?</p>

<p><strong>Event Storming</strong> exercises help you to figure out which domains you have in your system and give you a clear view on the different events. You can then formalize events and commands.</p>

<p>Ideas about Event Sourcing have been spreading. Functional programming gained popularity in parallel with event sourcing. Event sourcing is a <strong>natural functional model</strong>. Every state is a left fold of your previous history.</p>

<p>A lot of other things also pushed Event Sourcing forward:</p>

<ul>
  <li>Cloud computing</li>
  <li>Popularity of Actor Models</li>
  <li>Microservices</li>
</ul>

<h3 id="bad-things">Bad things</h3>

<p>Some people see CQRS as a full-blown architecture, but it’s not. This is wrong. CQRS and event sourcing is not a top level architecture. You cannot build an Event Sourced system. Instead, you end up into building a monolith which is event sourced internally. Event sourcing is simply not a good solution to every problem. For example, once you deal with immutable events, you need to think about corrections to data. Whenever a user corrects a value and hits the save button again, you would need to have an event for that and it would be too complex to handle.</p>

<p>A lot of little things are misinterpreted by the community and this caused <strong>dogmas</strong> to pop up:</p>

<ul>
  <li><em>“Value objects can be mutable in some use cases”</em> - It’s not because Eric Evans once said “Value objects are normally immutable” that you have to think that in some situations, you can justify mutable objects. There is never an excuse to create mutable objects and they should be avoided at all times.</li>
  <li><em>“The Write side cannot query the Read side”</em> - There are times that you have to. When you have an invariant that crosses thousands of aggregates, you cannot avoid it.</li>
  <li><em>“Inputs should always equal Outputs” eg. if i have an order command, an order event should be the result</em> - This is not always the case and there are situations where input and output aren’t one on one.</li>
  <li><em>“Must use one-way commands”</em> There’s no such way as fire your command, put it on a queue and forget. One way commands don’t exist! They happened in the real world. They cannot be rolled back. Using commands gives you the opportunity to respond to it. One-way commands can however be changed in events in an event sourced system.</li>
</ul>

<p>Over the years some CQRS frameworks have been created. Greg’s advice is… <strong>Don’t write a CQRS framework</strong>! It will guaranteed be abandoned after a year. It’s not a framework, it’s more like a reference implementation. We also need to pull back away from <strong>Process Manager frameworks</strong>. You can probably solve your problem with an <strong>Actor Model</strong>.</p>

<p>A <strong>queue of messages</strong> doesn’t work for all kinds of systems. You can probably linearize in 90% of the use cases, it will also probably be cheaper. For the other 10%, interesting things are happening. We’re gonna see a push to <strong>occasionally connected systems</strong>. When you choose availability and high throughput, you’ll have to move to message-driven architectures and linearization is not an option.</p>

<h3 id="future-things">Future things</h3>

<p>A lot of interesting things are happening in the software world. We’re growing to <strong>N-Temporal systems</strong>, where multiple things happen at multiple timeframes.</p>

<p>Greg concluded with a quote of Ernest Hemingway.</p>

<blockquote>
  <p>“We are all apprentices in a craft where no one ever becomes a master.”</p>
</blockquote>

<h3 id="recommended-reading">Recommended reading</h3>

<p><img class="image left" src="/img/cqrs/event-centric.png" alt="Event Centric" />
Greg wrote a book about this matter, called <a href="http://www.amazon.com/Event-Centric-Simplicity-Addison-Wesley-Signature/dp/0321768221">Event Centric - Finding Simplicity in Complex Systems</a>. In this book, he explains how to use DDD with Command-Query Responsibility Separation to select the right design solutions and make them work in the real world.</p>

<p><br />
<br /></p>

<h3 id="other-sources">Other sources</h3>

<ul>
  <li>Martin Fowler on CQRS: <a href="http://martinfowler.com/bliki/CQRS.html">http://martinfowler.com/bliki/CQRS.html</a></li>
  <li>Greg Young on CQRS: <a href="http://codebetter.com/gregyoung/2010/02/16/cqrs-task-based-uis-event-sourcing-agh/">http://codebetter.com/gregyoung/2010/02/16/cqrs-task-based-uis-event-sourcing-agh/</a> and <a href="http://www.squarewidget.com/greg-young-on-cqrs">http://www.squarewidget.com/greg-young-on-cqrs</a></li>
</ul>

        </div>
    </div>
    <div class="share-page" >
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ordina-jworks.github.io/domain-driven%20design/2016/02/02/A-Decade-Of-DDD-CQRS-And-Event-Sourcing.html&title=A decade of DDD, CQRS and Event Sourcing&source=https://ordina-jworks.github.io" rel="nofollow" target="_blank" title="Share on LinkedIN">
            <img src="/img/social-media/LinkedIn.png"
                 alt="Share on LinkedIn" />
        </a>
        <a href="https://twitter.com/intent/tweet?text=A decade of DDD, CQRS and Event Sourcing&url=https://ordina-jworks.github.io/domain-driven%20design/2016/02/02/A-Decade-Of-DDD-CQRS-And-Event-Sourcing.html&via=lifeatordinabe&related=lifeatordinabe" rel="nofollow" target="_blank" title="Share on Twitter">
            <img src="/img/social-media/Twitter.png"
                 alt="Share on Twitter" />
        </a>
        <a href="https://facebook.com/sharer.php?u=https://ordina-jworks.github.io/domain-driven%20design/2016/02/02/A-Decade-Of-DDD-CQRS-And-Event-Sourcing.html" rel="nofollow" target="_blank" title="Share on Facebook">
            <img src="/img/social-media/Facebook.png"
                 alt="Share on Facebook" />
        </a>
    </div>
        
</section>


<section id="two" class="wrapper alt spotlight style2">
    
    <div class="inner">
        <a href="/author/ken-coenen/" class="image spotlight-image" title="">
            <img src="/img/author/ken-coenen.png"
                 alt="" class="p-image"/>
        </a>

        <div class="content">
            
            <p><p>Ken is the Business Unit Manager of Ordina JWorks. Aside from his day-to-day occupation as a Business Unit Manager, he is also Backend Practice Manager, passionate about all Java- and JavaScript related technologies. In this capacity, he narrows the gap between consultants and potential innovative customer projects. He does this by organizing workshops, talks and courses about the newest technologies, whereby people can grow in their role as a software consultant.</p>
</p>
            
        </div>
    </div>
    
</section>

        </div>
    </section>
</div>



<footer>
    <div class="contact">
        <div class="address">
            <div class="icon"><i class="fa fa-fw fa-home"></i></div>
            <div class="text">Ordina Belgium<br/>Blarenberglaan 3B,<br/>2800 Mechelen, Belgium</div>
        </div>
        <div class="phone">
            <div class="icon"><i class="fa fa-fw fa-phone"></i></div>
            <div class="text"><a href="tel:003215295858">+32 15 29 58 58</a></div>
        </div>
        <div class="email">
            <div class="icon"><i class="fa fa-fw fa-envelope-o"></i></div>
            <div class="text"><a href="mailto:jworks@ordina.be">jworks@ordina.be</a></div>
        </div>
    </div>
    <ul class="social">
        <li>
            <a href="https://twitter.com/lifeatordinabe" target="_blank">
                <i class="fa fa-fw fa-twitter"></i><span>Twitter</span>
            </a>
        </li>
        <li>
            <a href="https://www.facebook.com/lifeatordinabe" target="_blank">
                <i class=" fa fa-fw fa-facebook"></i><span>Facebook</span>
            </a>
        </li>
        <li>
            <a href="https://www.linkedin.com/company/ordinabelgium" target="_blank">
                <i class=" fa fa-fw fa-linkedin"></i><span>LinkedIn</span>
            </a>
        </li>
        <li>
            <a href="/youtube" target="_blank">
                <i class=" fa fa-fw fa-youtube"></i><span>YouTube</span>
            </a>
        </li>
        <li>
            <a href="/github" target="_blank">
                <i class=" fa fa-fw fa-github"></i><span>GitHub</span>
            </a>
        </li>
        <li>
            <a href="/feed.xml" target="_blank">
                <i class=" fa fa-fw fa-rss"></i><span>RSS Feed</span>
            </a>
        </li>
    </ul>
    <div class="copyright">
        &copy; 2022 Ordina JWorks. All rights reserved.
        <br /> Disclaimer: Opinions expressed on this blog reflect the writer's views and not the position of Ordina
        <img id="analyticsImg" src="" width="1" height="1" style="border: 0px"/>
    </div>
</footer>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/jquery.pin.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]>
<script src="/js/ie/respond.min.js"></script><![endif]-->


<script>
    var imageHref = "/img/DDDEurope2015.jpg";
    $(function () {
        $('body').addClass('toggle');
    });
</script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o);
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-70040502-1', 'auto');
    ga('send', 'pageview');
</script>
<script type="text/javascript">
    window.addEventListener('load', function () {
        if (window.ga && ga.create) {
            console.log('GA loaded correctly');
        } else {
            console.log('GA is blocked or failed to load - tracking manually...')
            document.getElementById('analyticsImg').src = 'https://jworks-techblog-analytics.cfapps.io/collect?title=' + document.title;
        }
    }, false);
</script>

<!-- Vertical timeline -->
<script src="/js/vertical-timeline/modernizr.js"></script>
<script src="/js/vertical-timeline/main.js"></script>


</body>
</html>
